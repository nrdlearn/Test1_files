(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[13,20],{"./lib/app/constants/global.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"C_MULTIPLE_FIELDS_COMPONENTS",(function(){return i}));var r=n("./lib/app/ui/components/aside/options/counter.jsx"),o=n("./lib/app/ui/components/aside/options/checkbox.jsx"),a=n("./lib/app/ui/components/aside/options/file-upload/index.jsx"),i=[{types:["counter"],component:r.default},{types:["checkbox"],component:o.default},{types:["fileUpload"],component:a.default}]},"./lib/app/ui/components/aside/category/controls.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/redux/es/redux.js"),c=n("./node_modules/sweetalert2/dist/sweetalert2.all.js"),l=n.n(c),u=n("./lib/app/ui/components/common/expand-menu/index.jsx"),s=(n("./lib/app/ui/components/shared/props.jsx"),n("./lib/app/store/slices/Product/index.jsx")),p=n("./lib/app/store/slices/Editor/index.jsx");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,e);var t,n,r,a=g(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).productCategoryDelete=t.productCategoryDelete.bind(h(t)),t.editCategory=t.editCategory.bind(h(t)),t.editOptions=t.editOptions.bind(h(t)),t.productCategoryCopy=t.productCategoryCopy.bind(h(t)),t.productCategoryMove=t.productCategoryMove.bind(h(t)),t}return t=i,(n=[{key:"editCategory",value:function(){this.props.editorCategoryEdit(this.props.category,this.props.panel)}},{key:"editOptions",value:function(){this.props.editorOptionEdit(null,this.props.category,this.props.panel)}},{key:"productCategoryDelete",value:function(){var e=this.props,t=e.productCategoryDelete,n=e.category,r=e.panel.id,o=n.id;l.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&t(r,o)}),(function(){}))}},{key:"productCategoryCopy",value:function(){var e=this.props,t=e.productCategoryCopy,n=e.category,r=e.panel,o=e.Product,a=r.id,i=n.id,c={};o.panels.map((function(e){c[e.id]=e.title})),l.a.fire({title:"Make a copy of category",text:"Select a copy destination panel",input:"select",inputOptions:c,inputPlaceholder:"To current panel",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Copy"}).then((function(e){if(e.isConfirmed){var n=e.value,r=n.length?n:a;t(a,i,r)}}),(function(){}))}},{key:"productCategoryMove",value:function(){var e=this.props,t=e.productCategoryMove,n=e.category,r=e.panel,o=e.Product,a=r.id,i=n.id,c={};o.panels.map((function(e){c[e.id]=e.title})),l.a.fire({title:"Move category",input:"select",inputOptions:c,inputPlaceholder:"Select destination panel",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Move"}).then((function(e){if(e.isConfirmed){var n=e.value,r=n.length?n:a;t(a,i,r)}}),(function(){}))}},{key:"render",value:function(){return this.props.isAdmin?o.a.createElement(u.default,{style:{position:"absolute",right:12,top:5,zIndex:9},help:{intro:"Edit Custom Option",position:"left"},actions:[{icon:"lnr lnr-magic-wand",action:this.productCategoryCopy,tooltip:"Copy Custom Option"},{icon:"lnr lnr-move",action:this.productCategoryMove,tooltip:"Move Custom Option"},{icon:"lnr lnr-pencil",action:this.editCategory,tooltip:"Edit Custom Option"},{icon:"lnr lnr-list",action:this.editOptions,tooltip:"Edit Choices"},{icon:"lnr lnr-trash",action:this.productCategoryDelete,tooltip:"Delete Custom Option"}]}):null}}])&&m(t.prototype,n),r&&m(t,r),i}(o.a.PureComponent);j(x,"displayName","Aside.Category.Controls");t.default=Object(a.connect)((function(e){return{Product:{panels:e.Product.panels}}}),(function(e){return y(y({},Object(i.bindActionCreators)({productCategoryDelete:s.productCategoryDelete,editorCategoryEdit:p.editorCategoryEdit,editorOptionEdit:p.editorOptionEdit,productCategoryCopy:s.productCategoryCopy,productCategoryMove:s.productCategoryMove},e)),{},{dispatch:e})}),null,{pure:!0})(x)},"./lib/app/ui/components/aside/category/index.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c,l,u,s,p=n("./node_modules/react/index.js"),d=n.n(p),f=n("./node_modules/lodash-es/lodash.default.js"),y=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/redux/es/redux.js"),b=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),g=n("./lib/app/ui/components/aside/category/controls.jsx"),v=n("./lib/app/ui/components/aside/options/index.jsx"),h=n("./lib/app/ui/components/aside/options/select.jsx"),O=n("./lib/app/ui/components/aside/options/autocomplete.jsx"),j=n("./lib/app/ui/components/aside/options/multiple.jsx"),x=n("./lib/app/ui/components/aside/options/input-multiple.jsx"),w=n("./lib/app/ui/components/common/no-content.jsx"),E=n("./lib/app/utils/logic-engine.jsx"),P=n("./node_modules/@shopify/polaris/index.es.js"),C=n("./lib/app/utils/helpers/index.jsx"),_=n("./lib/app/ui/components/aside/options/options-img/index.jsx"),k=n("./lib/app/ui/components/aside/options/qtyBreakdownTable.jsx"),S=n("./lib/app/utils/i18n.jsx"),T=n("./lib/app/utils/update-layer-by-option.jsx"),I=n("./lib/app/utils/store/getters.jsx"),A=n("./lib/app/ui/components/aside/printable-areas/index.jsx"),D=n("./lib/app/constants/global.jsx"),R=n("./lib/app/ui/components/admin/editor/category/types.jsx"),L=n("./lib/app/ui/components/aside/options/autocomplete-number-option/index.jsx"),N=n("./lib/app/ui/components/aside/options/radio.jsx"),B=n("./lib/app/store/slices/App/index.jsx"),U=n("./lib/app/store/slices/Product/index.jsx");function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=X(e);if(t){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var J=b.default.div(r||(r=$(["\n  margin: 10px 0;\n  position: relative;\n\n  &.cpb-category-admin-mode {\n    border: 0.7px dashed #1e82dd;\n    padding: 20px;\n    margin: 20px 0;\n    border-radius: 3px;\n  }\n"]))),Z=b.default.div(o||(o=$(["\n  font-size: 1.2em;\n  line-height: 1.5em;\n  position: relative;\n  cursor: ","\n"])),(function(e){return e.collapsible?"pointer":""})),ee=b.default.div(a||(a=$(["\n  color: #636363;\n  transition: height ease-in-out 0.5s;\n  ",";\n"])),(function(e){var t=e.collapsible,n=e.active;return"\n      height: ".concat(t?n?"auto":"0px":"auto"," !important;\n      opacity: ").concat(t?n?"1":"0":"1",";\n      visibility: ").concat(t?n?"visible":"hidden":"visible",";\n    ")})),te=b.default.p(i||(i=$(["\n  margin-bottom: 10px;\n  margin-top: 5px;\n"]))),ne=b.default.div(c||(c=$(["\n  display: inline-block;\n  vertical-align: middle;\n"]))),re=b.default.div(l||(l=$(["\n  display: inline-block;\n  vertical-align: middle;\n  margin-left: 30px;\n  cursor: pointer;\n\n  i.material-icons {\n    font-size: 20px;\n  }\n"]))),oe=b.default.div(u||(u=$(["\n  cursor: pointer;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  text-decoration: underline;\n  user-select: none;\n  margin-top: 1rem;\n\n  &:hover {\n    text-decoration: none;\n  }\n"]))),ae={textDecoration:"line-through"},ie=b.default.div(s||(s=$([""]))),ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(a,e);var t,n,r,o=H(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).result=0,t.state={active:!1,nextStepText:"Go To Next Step"},t.toggleActive=t.toggleActive.bind(Y(t)),t.productCategoryUpdate=t.productCategoryUpdate.bind(Y(t)),t.updateLayer=t.updateLayer.bind(Y(t)),t.goToNextStep=t.goToNextStep.bind(Y(t)),t}return t=a,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.num,r=t.isAdmin,o=t.productCategoryActiveSet,a=t.category,i=t.layout;if(t.removebgApiKey,"col-list"===i){var c=f.default.get(this.getVisibleCategories(this.props,this.getVisiblePanels().map((function(e){return e.categories})).flat()),"0");c&&c.id===a.id&&o({categoryID:a.id,active:!0})}else 0===n&&o({categoryID:a.id,active:!0});r&&(this.interval=setInterval((function(){var t=e.props.category;e.category!==JSON.stringify(t)&&e._mounted&&e.forceUpdate()}),40))}},{key:"componentDidUpdate",value:function(e,t,n){var r=this.props.settings;if(r.collapsibleCategories){var o=this.getVisiblePanels(),a=this.getVisiblePanels(e),i=this.getVisibleCategories(),c=this.getVisibleCategories(e);f.default.isEqual(o,a)&&f.default.isEqual(i,c)&&f.default.isEqual(r,e.settings)||this.updateStepText()}}},{key:"componentDidMount",value:function(){this._mounted=!0;var e=this.props,t=e.isAdmin,n=e.productCategoryActiveSet,r=e.category;e.quantity,t&&n({categoryID:r.id,active:!0}),r.addNextStepButton&&this.updateStepText()}},{key:"updateStepText",value:function(){var e=this.getNextStepButtonText;this.setState({nextStepText:e})}},{key:"engravingDinamicCategory",get:function(){var e=this.props,t=e.category,n=e.quantity;return"engravingForWholesale"===Object(R.getCategoryLegacyType)(t)&&!t.categoryDynamic&&n>1}},{key:"componentWillUnmount",value:function(){this.props.isAdmin&&clearInterval(this.interval),this._mounted=!1}},{key:"registerListeners",value:function(e){}},{key:"getCollapsible",get:function(){var e=this.props,t=e.category,n=e.collapsibleCategories;return!t.disableCollapsible&&n}},{key:"toggleActive",value:function(){var e=this.props,t=e.productCategoryActiveSet,n=e.category;this.getCollapsible&&!["engravingForWholesale"].includes(Object(R.getCategoryLegacyType)(n))&&t({categoryID:n.id})}},{key:"productCategoryUpdate",value:function(e,t){var n=this.props,r=n.category,o=n.panel,a=n.productCategoryUpdate;a(t,o.id,r.id)}},{key:"changeTitleVisibility",value:function(e,t){var n=this.props.category,r=Object.assign({},n,{titleHidden:t});this.productCategoryUpdate(e,r)}},{key:"updateLayer",value:function(e){var t=this;return function(){var n,r=(n=regeneratorRuntime.mark((function n(r,o){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",T.default.bind(t)(e,r,o));case 1:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){W(a,r,o,i,c,"next",e)}function c(e){W(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}()}},{key:"getOptionClassName",value:function(e){return"option option-type-"+e}},{key:"getCategory",value:function(){var e=this.props.category,t=z({},e);if(e.display)switch(e.type){case"single":case"input":case"dateTime":case"font":t.type=e.display}return t}},{key:"renderOptions",value:function(){var e=this,t=this.props,n=t.panel,r=t.product,o=t.layers,a=t.productQuantityUpdate,i=t.settings,c=t.customLayers,l=t.removebgApiKey,u=t.shopId,s=t.panels,p=t.quantity,y=t.locationId,m=t.inventoryLevels,b=t.bundleBuilderMode,g=t.inventoryEnabled,E=t.isAdmin,P=this.getCategory(),C={panel:n,category:P,product:r,bundleBuilderMode:b,inventoryEnabled:g};if("select"===Object(R.getCategoryLegacyType)(P))return d.a.createElement("div",{className:this.getOptionClassName(Object(R.getCategoryLegacyType)(P))},d.a.createElement(h.default,{data:P,category:P,action:this.updateLayer,layers:o,panel:n,locationId:y}));if("autocomplete"===Object(R.getCategoryLegacyType)(P))return d.a.createElement("div",{className:this.getOptionClassName("select")},d.a.createElement(O.default,{data:P,category:P,action:this.updateLayer,layers:o,panel:n,locationId:y}));if("autocompleteNumber"===Object(R.getCategoryLegacyType)(P))return d.a.createElement("div",{className:this.getOptionClassName("select")},d.a.createElement(L.default,{settings:i,data:P,category:P,onChange:this.updateLayer.bind(this),layers:o,panel:n,locationId:y}));if(["multiple"].includes(Object(R.getCategoryLegacyType)(P)))return d.a.createElement("div",{className:this.getOptionClassName(Object(R.getCategoryLegacyType)(P))},d.a.createElement(j.default,{locationId:y,data:P,action:this.updateLayer,panel:n}));if(["img","percentage"].includes(Object(R.getCategoryLegacyType)(P)))return d.a.createElement(_.default,{locationId:y,panel:n,category:P,action:this.updateLayer});if(["inputMulti","inputLong","wholesaleOrder","engravingForWholesale","fontSize","input","additionalPriceField"].includes(Object(R.getCategoryLegacyType)(P)))return d.a.createElement("div",{className:this.getOptionClassName(Object(R.getCategoryLegacyType)(P))},d.a.createElement(x.default,{data:P,action:this.updateLayer,panel:n,category:P,locationId:y,capitalize:!!["engravingForWholesale"].includes(Object(R.getCategoryLegacyType)(P))}));if(["radio"].includes(Object(R.getCategoryLegacyType)(P)))return d.a.createElement(N.default,M({},C,{onChange:this.updateLayer,isAdmin:i.isAdmin,layers:o,locationId:y,inventoryLevels:m,mounted:this._mounted}));if("qtyBreakdown"===Object(R.getCategoryLegacyType)(P))return d.a.createElement("div",{className:this.getOptionClassName(Object(R.getCategoryLegacyType)(P))},d.a.createElement(_.default,{locationId:y,panel:n,category:P,action:this.updateLayer}),d.a.createElement(k.default,{productQuantityUpdate:a,panel:n,category:P,layers:o,panels:s,quantity:p,settings:i,locationId:y}));if("calculateFields"===Object(R.getCategoryLegacyType)(P))return null;var S=f.default.find(D.C_MULTIPLE_FIELDS_COMPONENTS,(function(e){return e.types.includes(Object(R.getCategoryLegacyType)(P))}));if(S){var T=S.component;return P&&P.options.filter((function(e){return E||!b&&!g&&e.inStock&&Object(I.g_getOptionIsVisible)(e,o,c,E,b,g,y,m)||(b||g)&&Object(I.g_getOptionIsVisible)(e,o,c,E,b,g,y,m)})).map((function(t,r){return d.a.createElement(T,{key:n.id+"-"+t.id,onChange:e.updateLayer.bind(e),locationId:y,customLayers:c,shopId:u,option:t,panel:n,category:P,layers:o,optionID:t.id,data:t.option,removebgApiKey:l})}))}return"printablearea"===Object(R.getCategoryLegacyType)(P)&&"hidden"!==P.display?d.a.createElement(A.default,{category:P}):0===P.options.length?d.a.createElement(w.default,{message:"You have no options yet.",height:"200px"}):P.options.filter((function(e){return E||!b&&!g&&e.inStock||(b||g)&&Object(I.g_getOptionInStock)(e,y,m)})).map((function(t,r){return d.a.createElement(v.default,M({key:n.id+"-"+t.id+"-"+r},C,{customClass:e.getOptionClassName(Object(R.getCategoryLegacyType)(P)),action:e.updateLayer(t),locationId:y,option:t}))}))}},{key:"onRadioChange",value:function(e,t){var n=this.props,r=n.productCategoryUpdate,o=n.category,a=n.panel,i=n.productManageDynamicCategories,c=n.quantity,l=e.currentTarget.value;switch(l=f.default.isString(l)?"true"===l:l,t){case"templateSameOnAll":[o].forEach((function(e){e.templateSameOnAll=l,r(e,a.id)})),i({quantity:l?1:c,prevQuantity:l?c:1,categoryType:"engravingForWholesale",checkLogic:!1})}}},{key:"renderTabs",value:function(){var e=this,t=this.props,n=t.category,r=(t.quantity,d.a.createElement("div",{className:"cpb-category__tabs"},d.a.createElement("label",null,d.a.createElement("input",{key:n.id+"_cat",checked:!0===n.templateSameOnAll,type:"radio",name:"engravingForWholesale",value:!0,onChange:function(t){return e.onRadioChange(t,"templateSameOnAll")}}),d.a.createElement("span",{className:"cpb-category__tabs-label"},"Same text on all products")),d.a.createElement("br",null),d.a.createElement("label",null,d.a.createElement("input",{key:n.id+"_cat",checked:!1===n.templateSameOnAll,type:"radio",name:"engravingForWholesale",value:!1,onChange:function(t){return e.onRadioChange(t,"templateSameOnAll")}}),d.a.createElement("span",{className:"cpb-category__tabs-label"},"Different text on all products"))));return this.engravingDinamicCategory&&r}},{key:"renderTitle",value:function(){var e=this,t=this.props,n=t.category,r=(t.collapsibleCategories,t.isAdmin),o=t.panel,a=n.title,i=n.titleHidden,c=i?"Make this title visible":"Make this title hidden",l=i?"hidden":"visibile",u=d.a.createElement("span",{style:r&&i&&!n.categoryDynamic?ae:{}},r?a:i&&!n.categoryDynamic||i?"":a);return d.a.createElement(Z,{className:"cpb-category-title",collapsible:this.getCollapsible},d.a.createElement("div",{onClick:this.toggleActive},d.a.createElement(ne,{className:"cpb-category-title__inner"},u,this.getCollapsible&&d.a.createElement("div",{className:"cpb-category-collapse-button"})),this.renderTabs(),r?d.a.createElement(re,null,d.a.createElement(P.Tooltip,{content:c},d.a.createElement("i",{className:"material-icons",onClick:function(t){return e.changeTitleVisibility(o.id,!i)}},l))):null))}},{key:"categoryToBeDisplayed",value:function(e,t,n,r){var o=this.props.panels;return!!r||Object(E.default)(e,t,n,null,o)}},{key:"getVisibleCategories",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.default.get(this.props,"panel.categories")||[],n=e.layers,r=e.customLayers,o=e.panels;return f.default.filter(t,(function(e){return Object(E.default)(e.logic,n,r,null,o)}))}},{key:"getVisiblePanels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.panels,n=e.layers,r=e.customLayers;return f.default.filter(t,(function(e){return Object(E.default)(e.logic,n,r,null,t)}))}},{key:"goToNextStep",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props,n=t.category,r=t.productCategoryActiveSet,o=t.panel,a=t.settings,i=t.appSettingsCurrentViewUpdate,c=t.appSettingsCurrentTabUpdate,l=t.layers,u=t.customLayers;if(!(!a.collapsibleCategories||a.collapsibleCategories&&n.disableCollapsible)){var s=a.hasSummary,p=a.layout,d=a.showSummarySection,y="col-tabs"===p||"row-tabs"===p?s:d,m=this.getVisibleCategories(),b=this.getVisiblePanels(),g=0,v=f.default.findIndex(b,(function(e){return f.default.find(e.categories,{id:n.id})}))||0,h=function e(t){var n=t.pCategories,r=t.pPanels,a=t.startPos,i=void 0===a?0:a,c=t.panelIndex,s=void 0===c?0:c,p=n||r;f.default.isArray(p)&&(p=f.default.filter(p,(function(e){return Object(E.default)(e.logic,l,u,null,null,o)})));var d=f.default.isArray(p)&&p[i];if((g+=1)>f.default.size(m)+f.default.size(b))return{index:i,data:null,panelIndex:s};if(d)return{index:i,data:d,panelIndex:s};var h=i+1;if(h>p.length-1){if(n){var O=e({pPanels:b,startPos:v+1,panelIndex:v+1});if(O.data){var j=f.default.findIndex(b,O.data);if(!f.default.size(O.data.categories)){if(y){if(b.length-1!==O.index){var x=b[v],w=x?f.default.filter(f.default.clone(b),(function(e){return f.default.size(e.categories)&&e.id!==x.id})):[],P=w&&w[0]&&f.default.findIndex(b,(function(e){return e.id===w[0].id}));return!f.default.isUndefined(P)&&O.index<P?e({pPanels:b,startPos:P,panelIndex:P}):{data:"summary",panelIndex:b.length}}return{data:"summary",panelIndex:b.length}}return{data:null,panelIndex:j+1}}return e({pCategories:O.data.categories,startPos:0,panelIndex:j})}return y&&s+1>=b.length-1?{data:"summary",index:null,panelIndex:s+1}:{data:null,index:h,panelIndex:s}}return{index:h,data:null,panelIndex:s}}return e({pCategories:p,startPos:h,panelIndex:s})},O=f.default.findIndex(m,n),j=h({pCategories:m,startPos:O+1,panelIndex:v});if(j.data)if(e&&r({categoryID:j.data.id,active:!0}),j.panelIndex!==v||"summary"===j.data){var x=e&&c(j.panelIndex);if(f.default.isBoolean(f.default.get(x,"isValid"))&&x.isValid){var w=b[j.panelIndex];w&&w.selectView&&i(w.selectView),e&&r({categoryID:n.id,active:!1})}}else e&&r({categoryID:n.id,active:!1});return j.data}}},{key:"getNextStepButtonText",get:function(){var e=this.props,t=e.category,n=e.settings,r=this.goToNextStep(!1);return f.default.get(r,"title")||"summary"===r?n.collapsibleCategories&&t.addNextStepButtonTemplate&&Object(C.h_replaceStringByTemplate)({newTitle:t.addNextStepButtonTemplate,template:t.addNextStepButtonTemplate},(function(e,t,n){switch(e){case"next_category_title":t&&(t=t.replace(n,"summary"===r?S.I18n.t("summary.title"):r.title||""));break;default:t&&(t=t.replace(n,""))}return t}))||"Go To Next Step":null!==r?"Go To Next Step":void 0}},{key:"getOptionDescription",get:function(){var e=this.props,t=e.layers,n=e.category,r=n&&f.default.find(t,(function(e){return e.category===n.id&&f.default.find(n.options,{id:e.option})})),o=r&&f.default.find(n.options,{id:r.option});return o?o.optionDescription:""}},{key:"render",value:function(){var e=this.props,t=e.isAdmin,n=e.layers,r=e.customLayers,o=e.panel,a=(e.panels,e.collapsibleCategories,e.settings,e.locationId),i=e.inventoryLevels,c=e.bundleBuilderMode,l=e.inventoryEnabled,u=this.getCategory(),s=u.description?d.a.createElement(te,{dangerouslySetInnerHTML:{__html:u.description}}):"",p=this.getCollapsible,f="cpb-category ".concat(u.id);f+=" cpb-category-".concat(u.id),f+=" cpb-category-".concat(Object(R.getCategoryLegacyType)(u)),f+=" ".concat(u.active?"category.active":""),f+=" ".concat(t?"cpb-category-admin-mode":""),f+=" ".concat(p?u.active?"cpb-category-collapse-active":"cpb-category-collapse":""),u.extraClassName&&(f+=" ".concat(u.extraClassName)),"printablearea"===Object(R.getCategoryLegacyType)(u)&&"hidden"===u.display&&(f+=" cpb-hidden");var y="cpb-category-options-container ".concat(Object(R.getCategoryLegacyType)(u));if(f=f.replace(/\s\s+/g," "),!t&&0===u.options.filter((function(e){return t||!c&&!l&&e.inStock||(c||l)&&Object(I.g_getOptionInStock)(e,a,i)})).length)return null;var m=d.a.createElement(J,{className:f},this.renderTitle(),t&&d.a.createElement(g.default,{hasValue:!!u.title,panel:o,category:u}),d.a.createElement(ee,{className:"cpb-category-content",active:p&&u.active,collapsible:p},d.a.createElement("div",{className:"cpb-category-desc"},s),d.a.createElement(ie,{className:y},this.renderOptions()),u.showOptionDescription&&["text","img","color","percentage","qtyBreakdown"].includes(Object(R.getCategoryLegacyType)(u))&&d.a.createElement("div",{className:"cpb-category-option-description",dangerouslySetInnerHTML:{__html:this.getOptionDescription}}),p&&u.addNextStepButton&&this.state.nextStepText&&d.a.createElement(oe,{onClick:this.goToNextStep,className:"cpb-category-next-step-btn"},this.state.nextStepText,d.a.createElement("span",{className:"cpb-category-next-step-btn-inner"}))));return u.logic&&u.logic.rules&&u.logic.rules.length>0?this.categoryToBeDisplayed(u.logic,n,r,t)?m:null:m}}])&&Q(t.prototype,n),r&&Q(t,r),a}(d.a.PureComponent);t.default=Object(y.connect)((function(e){return{isAdmin:e.App.settings.isAdmin,layout:e.App.settings.layout,collapsibleCategories:e.App.settings.collapsibleCategories,layers:e.Product.layers,quantity:e.Product.quantity,customLayers:e.Product.customLayers,hideNextCategories:e.Product.hideNextCategories,panels:e.Product.panels,settings:e.App.settings,removebgApiKey:e.Global.removebgApiKey,currentView:e.App.settings.currentView,shopId:e.Routing.shopId,locationId:e.Routing.locationId,inventoryLevels:e.Inventory.levels,bundleBuilderMode:e.App.settings.bundleBuilderMode,inventoryEnabled:e.Global.inventoryEnabled}}),(function(e){return z(z({},Object(m.bindActionCreators)({productCategoryUpdate:U.productCategoryUpdate,productLayerUpdate:U.productLayerUpdate,productCustomLayerDelete:U.productCustomLayerDelete,productManageDynamicCategories:U.productManageDynamicCategories,productCategoryHelpersUpdate:U.productCategoryHelpersUpdate,productCategoryActiveSet:U.productCategoryActiveSet,productQuantityUpdate:U.productQuantityUpdate,appSettingsCurrentViewUpdate:B.appSettingsCurrentViewUpdate,appSettingsCurrentTabUpdate:B.appSettingsCurrentTabUpdate,productDataUpdate:U.productDataUpdate},e)),{},{dispatch:e})}),null)(ce)},"./lib/app/ui/components/aside/controls/CustomerProductName.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r);t.default=function(e){return e.isEnabled?o.a.createElement("div",{className:"cpb-configuration-product-name-wrapper"},o.a.createElement("div",{className:"cpb-category-title"},o.a.createElement("span",{className:"cpb-configuration-product-name-title"},"Configuration product name")),o.a.createElement("div",{className:"cpb-configuration-product-name-text-wrapper"},o.a.createElement("input",{type:"text",className:"cpb-configuration-product-name-text","data-cpb-configuration":"title"}))):null}},"./lib/app/ui/components/aside/controls/actions.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c,l=n("./node_modules/react/index.js"),u=n.n(l),s=n("./node_modules/react-redux/es/index.js"),p=n("./node_modules/redux/es/redux.js"),d=n("./node_modules/uid-safe/index.js"),f=n.n(d),y=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=n("./lib/app/ui/components/aside/controls/quantity-box.jsx"),b=n("./lib/app/ui/components/aside/controls/add-to-cart/index.jsx"),g=n("./lib/app/utils/i18n.jsx"),v=n("./lib/app/utils/async/index.jsx"),h=n("./lib/app/ui/components/aside/controls/agreement-checkbox.jsx"),O=n("./lib/app/utils/logic-engine.jsx"),j=n("./lib/app/ui/components/aside/controls/fullprice.jsx"),x=n("./lib/app/ui/components/admin/editor/category/types.jsx"),w=n("./lib/app/store/slices/App/index.jsx");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var R=y.default.div(r||(r=D(["\n          margin-top: 30px;\n          margin-bottom: 45px;\n          ","\n\t"])),(function(e){return e.hidden?"display:none":""})),L=y.default.div(o||(o=D(["\n      text-align: left;\n      margin-top: 20px;"]))),N=y.default.div(a||(a=D(["\n      text-align: right;\n      margin-top: 20px;"]))),B=y.default.span(i||(i=D(["\n      cursor: pointer;\n\n      i {\n        margin-right: 5px;\n      }"]))),U=(y.default.div(c||(c=D(["\n      font-size: 1.3em;\n      font-weight: 600;\n      line-height: 41px;"]))),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,e);var t,n,r,o=k(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).getTechnicalData=t.getTechnicalData.bind(T(t)),t.getPropertyList=t.getPropertyList.bind(T(t)),t.wishlist=t.wishlist.bind(T(t)),t.share=t.share.bind(T(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.layers,n=e.appLoadStatusUpdate;window._cpb&&window._cpb.helpers&&(window._cpb.helpers.getTechnicalData=this.getTechnicalData),document.body.dispatchEvent(new CustomEvent("CPB_ON_PRODUCT_MOUNTED",{detail:{}})),document.body.dispatchEvent(new CustomEvent("CPB_ON_OPTIONS_UPDATE",{detail:{newLayers:t}})),n({appIsMounted:!0}),window.CPB.appIsMounted=!0}},{key:"share",value:function(){var e=this.getTechnicalData(),t=f.a.sync(18);window.saveImage&&window.saveImage(!1,(function(n){if(n){n=n.split(",")[1];var r={configid:t,technicalData:e,buffer:n};window.location.hash="configid=".concat(t),Object(v.shareProduct)()(r).done((function(){})).fail((function(e){console.error("Error Sharing Product",e)}))}}))}},{key:"wishlist",value:function(){var e=this.getTechnicalData(),t=f.a.sync(18);window.saveImage&&window.saveImage(!1,(function(n){if(n){n=n.split(",")[1];var r={configid:t,technicalData:e,buffer:n};window.location.hash="configid=".concat(t),Object(v.addToWishlist)()(r).done((function(){})).fail((function(e){console.error("Error Sharing Product",e)}))}}))}},{key:"getTechnicalData",value:function(){return this.props.layers.filter((function(e){return"base"!==e.panel})).map((function(e){return{panel:e.panel,category:e.category,option:e.option,value:e.value}}))}},{key:"getPropertyList",value:function(){var e=this.props,t=e.panels,n=e.settings,r=e.layers,o={},a=r.filter((function(e){return"base"!==e.panel})).map((function(e){var n=t.find((function(t){return t.id===e.panel})),r=n.categories.find((function(t){return t.id===e.category})),o=r.options.find((function(t){return t.id===e.option})),a=o.option.data.label,i=r.title;if("input"===Object(x.getCategoryLegacyType)(r)&&(a=e.value),""===i)if(1===n.categories.length)i=n.title||n.id;else{var c=r.options.indexOf(o);i=n.title+" "+c}return{title:i,value:a,cost:o.price||0}})),i=n.currency||"USD";return a.forEach((function(e){var t=g.I18n.l(Number(e.cost),{style:"currency",currency:i,minimumFractionDigits:2,maximumFractionDigits:2});o[e.title]=e.value+" ("+t+")"})),o}},{key:"checkAgreementLogic",value:function(){var e=this.props,t=e.settings,n=e.layers,r=e.customLayers,o=e.panels,a=t.hasAgreement,i=t.isAdmin,c=a&&!i,l=t.logic&&t.logic.rules&&t.logic.rules.filter((function(e){return"hasAgreementLogic"===e.logicRuleLabel}));if(l&&l.length){var u={rules:l,action:t.logic.action};return c&&Object(O.default)(u,n,r,t,o)}return c}},{key:"render",value:function(){var e=this.props,t=e.isAdmin,n=e.engine,r=e.settings,o=e.quantity,a=e.hidden,i=void 0!==a&&a,c=r.quantityBox;return u.a.createElement(R,{hidden:i,className:"cpb-product-actions  cpb-quantity-".concat(o)},c&&u.a.createElement(m.default,null),this.checkAgreementLogic()&&u.a.createElement(h.default,this.props),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"cpb-product-actions-first"},u.a.createElement(j.default,null)),u.a.createElement("div",{className:"col-md-8 col-xs-12 cpb-product-actions-second"},"magento"===n&&u.a.createElement("div",{className:"cpb-product-actions-additional"},u.a.createElement(L,{className:"cpb-product-actions-wishlist"},u.a.createElement(B,{onClick:this.wishlist},u.a.createElement("i",{className:"lnr lnr-heart"}),"Add To Wishlist")),u.a.createElement(N,{className:"cpb-product-actions-share"},u.a.createElement(B,{onClick:this.share},u.a.createElement("i",{className:"lnr lnr-link"}),"Share"))))),u.a.createElement("div",{className:"row"},u.a.createElement(b.default,{isAdmin:t})))}}])&&C(t.prototype,n),r&&C(t,r),a}(u.a.PureComponent));A(U,"displayName","Preview.Aside.Actions"),t.default=Object(s.connect)((function(e){return{engine:e.App.shop.engine,layers:e.Product.layers,customLayers:e.Product.customLayers,panels:e.Product.panels,settings:e.App.settings,quantity:e.Product.quantity,isAdmin:e.App.settings.isAdmin,currency:e.App.settings.currency}}),(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(p.bindActionCreators)({appLoadStatusUpdate:w.appLoadStatusUpdate},e))}),null,{pure:!0})(U)},"./lib/app/ui/components/aside/controls/add-to-cart/index.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"isEmpty",(function(){return ee}));var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/redux/es/redux.js"),c=n("./node_modules/sweetalert2/dist/sweetalert2.all.js"),l=n.n(c),u=n("./lib/app/utils/async/index.jsx"),s=n("./lib/app/utils/i18n.jsx"),p=n("./lib/app/ui/components/common/loading.jsx"),d=n("./node_modules/jquery/dist/jquery.min.js"),f=n.n(d),y=n("./node_modules/uid-safe/index.js"),m=n.n(y),b=n("./lib/app/utils/logic-engine.jsx"),g=n("./node_modules/lodash-es/lodash.default.js"),v=n("./lib/app/utils/image-storage/index.jsx"),h=n("./lib/app/ui/components/aside/controls/helpers/AddToCartValidate/index.jsx"),O=n("./lib/app/utils/helpers/index.jsx"),j=(n("./lib/app/utils/check-platform.jsx"),n("./node_modules/is-base64/is-base64.js")),x=n.n(j),w=n("./lib/app/ui/components/aside/controls/add-to-cart/methods/index.jsx"),E=n("./lib/app/utils/store/getters.jsx"),P=(n("./node_modules/intl/locale-data/jsonp/en-ZA.js"),n("./lib/app/constants/web-fonts.jsx")),C=n("./lib/app/utils/string/index.jsx"),_=(n("./lib/app/ui/components/preview/render-konva/utils/point.jsx"),n("./lib/app/utils/get-available-views.jsx")),k=n("./lib/app/ui/components/preview/render-konva/const.jsx"),S=n("./lib/app/ui/components/aside/controls/add-to-cart/methods/getAddToCartErrorMessage.jsx"),T=n("./lib/app/ui/components/aside/controls/add-to-cart/methods/getBlankImage.jsx"),I=(n("./lib/app/ui/components/common/forms/v3/help-hint.jsx"),n("./lib/app/ui/components/admin/editor/category/types.jsx")),A=n("./lib/app/store/slices/App/index.jsx"),D=n("./lib/app/store/slices/Loader/index.jsx"),R=n("./lib/app/store/slices/Product/index.jsx"),L=n("./lib/app/store/slices/Product/selectors.jsx"),N=n("./node_modules/fraction.js/fraction.js"),B=n.n(N);function U(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||J(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){V(a,r,o,i,c,"next",e)}function c(e){V(a,r,o,i,c,"throw",e)}i(void 0)}))}}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return W(this,n)}}function W(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=J(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ee=function(e){return null==e||"string"==typeof e&&""===e.trim()||Array.isArray(e)&&!e.length||"object"===$(e)&&!Object.keys(e).length},te=function(e){var t,n,r=!0,o=0,a=X(e.panels);try{for(a.s();!(n=a.n()).done;){var i=n.value;t=0;var c,l=X(i.categories);try{for(l.s();!(c=l.n()).done;){var u=c.value,s=Object(I.getCategoryLegacyType)(u);if(!r||"calculateFields"===s){r=!1;break}t+=1}}catch(e){l.e(e)}finally{l.f()}if(!r)break;o+=1}}catch(e){a.e(e)}finally{a.f()}return r?null:g.default.get(e,"panels.".concat(o,".categories.").concat(t,".data"))||null},ne=function(e){var t=e.printableElements,n={};if(g.default.isArray(t)&&!g.default.isEmpty(t)){var r=[t.filter((function(e){return"img"===e.type})),t.filter((function(e){return"text"===e.type}))],o=r[0],a=r[1];g.default.isEmpty(o)||(n.images=o.map((function(e){return e.value}))),g.default.isEmpty(a)||(n.texts=a.map((function(e){var t=K(K({},e.text),{},{value:e.value}),n=P.default.find((function(e){return e.family===t.fontFamily})),r=g.default.get(n,"files.italic"),o=g.default.get(n,"files.regular");return t.fontSource=o,t.fontWeight.includes("italic")&&r&&(t.fontSource=r),t})))}var i={};return Object.keys(v.default.storage).map((function(e){var t=v.default.storage[e].state,n=t.coverage,r=t.offset,o=t.rotate,a=t.scale,c=t.url;"cover"===n&&0===r.x&&0===r.y&&0===o&&1===a||(i[e]={state:{coverage:n,offset:r,rotate:o,scale:a,url:c}})})),n.imageStorageCoords=i,g.default.isEmpty(n)?null:n},re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(d,e);var t,r,a,i,c=q(d);function d(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),Y(Q(e=c.call(this)),"handleSaveConfig",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!n||e.validateAddToCart()){var r=e.props,o=r.loaderActionOverlayAdd,a=r.loaderActionClear,i=Object(L.productSelectProduct)(),c="function"==typeof t;o(s.I18n.t("loader.collectingData"));var l=m.a.sync(18),p=i.layers.filter((function(e){return"base"!==e.panel})),d={layers:p.map((function(e){return{panel:e.panel,category:e.category,option:e.option,value:e.value}})),printableElements:g.default.get(i,"printableElements")||[],quantity:i.quantity};return d.printableElements.forEach((function(e){e.active=!1})),d.additionalData=ne({printableElements:d.printableElements}),d.quantity=i.quantity||1,Object(u.saveProductConfig)()(d,l).always((function(){c&&(t(l),a())})),c||a(),l}})),e.state={loading:!1},e.handleSubmit=e.handleSubmit.bind(Q(e)),e.productReset=e.productReset.bind(Q(e)),e.advanceTab=e.advanceTab.bind(Q(e)),e.validateAddToCart=e.validateAddToCart.bind(Q(e)),e.handleSaveConfig=e.handleSaveConfig.bind(Q(e)),window._cpb=K({},{saveConfig:e.handleSaveConfig}),e}return t=d,(r=[{key:"afterAddToCart",value:function(){f.a.ajax({url:"/cart.js",dataType:"json",cache:!1,success:function(e){try{var t=f()(".cart-button .cart_count");t&&t.length>0&&t.text(e.items.length)}catch(e){console.error("Wasn't able to find the element [.cart-button .cart_count]")}}})}},{key:"validateAddToCart",value:function(){var e=this.props,t=e.settings,n=e.inventoryLevels,r=void 0===n?[]:n,o=e.isInventoryEnabled,a=e.bundleBuilderMode,i=e.locationId,c=Object(L.productSelectProduct)(),l=new h.AddToCartValidate(c,t,{},r,i);return l.init(o,a),l.isValid}},{key:"handleSubmit",value:(i=M(regeneratorRuntime.mark((function e(){var t,r,o,a,i,c,l,p,d,f,y,b,h,j,x,P,A,D,R,N,V,F,z,q,W,Q,G,H,Y,X,$,J,Z,ee,re,ae,ie,ce,le,ue,se,pe,de,fe,ye,me,be,ge,ve,he,Oe,je,xe,we,Ee,Pe,Ce,_e,ke,Se,Te,Ie,Ae,De,Re,Le=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(De=function(){return(De=M(regeneratorRuntime.mark((function e(t,r){var o,a,i,f,y,m,b,v,O,j,w,E,P,_,T,I;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this,d({hideLayersOnPrintable:!1}),c(s.I18n.t("loader.addingToCart")),a=Object(u.addToCart)(),window._cpb.settings&&window._cpb.settings.addToCartOverride&&"function"==typeof window._cpb.settings.addToCartOverride&&(a=window._cpb.settings.addToCartOverride),i=parseFloat(xe)/t.quantity,Object(u.saveProductConfig)()(K(K({},r),{},{cartData:ke.map((function(e){return{properties:g.default.get(e,"data.properties",{}),quantity:g.default.toNumber(g.default.get(e,"data.quantity",1))}}))}),t.configid),f=function(){l();var e=o.afterAddToCart;"function"==typeof e&&e(t);var n=new Event("cpb-add-to-cart",{bubbles:!0,data:t,technicalData:r});document.dispatchEvent(n)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,n=[{text:"{{price}}",value:Number(e).toFixed(2)},{text:"{{config}}",value:t.configid},{text:"{{product_title}}",value:Y.name}],r="".concat(Y.name," - Customer's Product with price ").concat(Number(e).toFixed(2));return h&&h.length&&(r=h,n.map((function(e){return r=g.default.replace(r,e.text,e.value)}))),r},t.id){e.next=59;break}if(H){e.next=56;break}if(m=y(i),!Z.length){e.next=44;break}if(e.prev=13,!(Object(C.u_getBufferSizeMB)(t.buffer)>=15)){e.next=36;break}return e.next=18,n.e(37).then(n.bind(null,"./node_modules/browser-image-compression/dist/browser-image-compression.mjs"));case 18:return b=e.sent,v=b.default,e.next=22,v.getFilefromDataUrl("data:image/png;base64,".concat(t.buffer),"".concat(m,".png"));case 22:return O=e.sent,e.next=25,v(O,{maxSizeMB:14,useWebWorker:!0,maxWidthOrHeight:k.MAX_PRINT_FILE_SIZE});case 25:return j=e.sent,e.next=28,v.getDataUrlFromFile(j);case 28:return w=e.sent,E=w.split(",")[1],P=t.properties._image.match(/.*\/(.*)$/)[1],_={mimetype:"image/png",buffer:E,name:P},e.next=34,Object(u.uploadImage)().bind(o)(_);case 34:T=e.sent,t.properties._image=T;case 36:e.next=41;break;case 38:e.prev=38,e.t0=e.catch(13),console.error(e.t0);case 41:g.default.get(t,"properties._image")&&g.default.isObject(Oe)&&(Oe._image=t.properties._image),e.next=51;break;case 44:if(!V.length){e.next=49;break}t.properties._image=g.default.get(V,"[0].src"),Oe._image=t.properties._image,e.next=51;break;case 49:return e.next=51,Object(u.getProductMedia)().bind(this)().done((function(e){var n=g.default.filter(g.default.map(g.default.get(e,"product.media.edges"),(function(e){var t=g.default.get(e,"node"),n=g.default.get(t,"mediaContentType");if(n){var r="",o=g.default.get(t,"preview.image.transformedSrc")||"",a=g.default.get(t,"alt")||"";switch(n){case"IMAGE":r=g.default.get(t,"image.originalSrc")||""}return{src:r,alt:a,poster:o}}})));t.properties._image=g.default.get(n,"[0].src"),Oe._image=g.default.get(n,"[0].src")})).fail().always();case 51:I=N?Oe:t.properties,console.log("AddCpbOrderedToDeliveryProfile",q),Object(u.createCustomerProduct)().bind(o)(i,{name:m,properties:I,sku:ye||"",weight:se/t.quantity,variantsData:{taxable:g.default.get($,"0.taxable"),requires_shipping:g.default.get($,"0.requires_shipping"),weight:g.default.get($,"0.weight")}},x?1:0,F?1:0,z?1:0,q?1:0,W?1:0).done((function(e){t.id=e.createdProduct.variants[0].id,a({items:ke.map((function(e){return e.data})),redirect:t.redirect}).then(f).catch((function(e){p(Object(S.default)(e),{close:!0})}))})).fail((function(e){console.error("Error Adding To Cart",e),p(s.I18n.t("loader.error.cartCreate"),{close:!0})})),e.next=57;break;case 56:p("\n\t\t\t\t\t\t\tSorry, we cannot find suitable product variants for this configuration and Auto-generated variants mode is disabled. <p>Please go to your product in the Custom Product Builder admin panel, go to Settings -> Add to cart mode -> Either click Create Variants or switch to Auto-generated variants mode.</p>\n\t\t\t\t\t",{close:!0});case 57:e.next=60;break;case 59:a({items:ke.map((function(e){return e.data})),redirect:t.redirect}).then(f).catch((function(e){p(Object(S.default)(e),{close:!0})}));case 60:case"end":return e.stop()}}),e,this,[[13,38]])})))).apply(this,arguments)},Ae=function(e,t){return De.apply(this,arguments)},Ie=function(e,t){var n=this,r=[],o=null,a=[];c(s.I18n.t("loader.uploadingUserFiles")),e.forEach((function(e){var t=e.file,n=e.name,i=e.type;t&&(o=new Promise((function(r,o){oe(t,(function(c){n&&e.imageCoordsString&&(n=n.replace(/\.[^/.]+$/,""),n+=".png");var l={name:n||"custom-image.png",mimetype:e.imageCoordsString?"image/png":i||"image/png",buffer:c.split(",")[1]};Object(u.uploadImage)().bind(X)(l,"orders").then((function(e){a.push({imagePath:e,file:t}),r(e)})).fail((function(e){o(console.error("Error uploading customized image to order2",e))}))}))})),r.push(Promise.resolve(o)),o=null)})),Promise.all(r).then((function(t){t.forEach((function(t,n){if(t){var r=e[n],o=r.property,i=a.find((function(e){return e.imagePath===t}));J.properties[o]&&J.properties[o].replace(i.file,i.imagePath),r.imageCoordsString&&(J.properties["".concat(r.propertyLabel)]=r.imageCoordsString)}})),Ae.apply(n,[J,ce])})).catch((function(e){console.error("Error uploading customized image to order3",e),p(s.I18n.t("loader.error.cartUpload"),{close:!0})}))},Te=function(){return(Te=M(regeneratorRuntime.mark((function e(t,n,o){var i,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=function(e,t,n){r.displayAllViewsInOrderProperties&&(t["View - ".concat(e.charAt(0).toUpperCase()+e.slice(1))]=n)},!t||!t.src){e.next=25;break}if(c=t.src.split(",")[1],l={name:"order.png",mimetype:"image/png",buffer:c},e.prev=4,!c){e.next=11;break}return e.next=8,Object(u.uploadImage)().bind(X)(l,"orders");case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=t.src;case 12:d=e.t0,J.properties=J.properties||{},G===n?(i(n,J.properties,d),J.properties._image=d,c&&(J.buffer=l.buffer)):i(n,J.properties,d),a&&(J.properties["_image_".concat(n)]=d),o(!0),e.next=23;break;case 19:e.prev=19,e.t1=e.catch(4),console.error("Error uploading customized image to order1",e.t1),p(s.I18n.t("loader.error.cartUpload"),{close:!0});case 23:e.next=26;break;case 25:o(!1);case 26:case"end":return e.stop()}}),e,null,[[4,19]])})))).apply(this,arguments)},Se=function(e,t,n){return Te.apply(this,arguments)},t=this.props,r=t.settings,o=t.quantity,a=t.anotherViewsInCart,i=t.isInventoryEnabled,c=t.loaderActionOverlayAdd,l=t.loaderActionClear,p=t.loaderActionErrorAdd,d=t.appSettingsUpdate,f=t.skuTabSeparated,y=t.bundleBuilderMode,b=t.baseSkuOverride,h=t.autogeneratedProductName,j=t.isAdditionalPropsDisabled,x=t.disablePanelsTitlesInCart,P=t.views,A=t.appSettingsCurrentViewUpdate,D=t.isProductWeightPropsDisabled,R=t.customLayers,N=t.removeProductAdditionalData,V=t.media,F=t.addAutogeneratedToParentsCollection,z=t.addAutogeneratedTagsFromParent,q=t.AddCpbOrderedToDeliveryProfile,W=t.AddCpbOrderedToSalesChannels,Q=this.props,G=Q.cartImage,H=Q.isAutoGenerationOff,Y=Object(L.productSelectProduct)(),X=this,$=this.props.variants,J={quantity:o||1,id:null,properties:{},configid:m.a.sync(18),redirect:r.hasRedirectToCart},console.log("configId",J.configid),Z=Object(_.default)(P),G&&"collage"!==G&&Z.length&&!Z.includes(G)&&(G=Z[0]),this.validateAddToCart()){e.next=16;break}return e.abrupt("return");case 16:return ee=Y.panels,H=H&&!Object(E.g_checkPreGenerationConflictCategories)(ee).check,d({hideLayersOnPrintable:!0}),c(s.I18n.t("loader.collectingData")),re=[],ee.map((function(e){e.categories.map((function(e){if("input"===e.type)return re.push(e.id)}))})),ae=Y.layers.filter((function(e){return!(re.includes(e.category)&&!e.value||"base"===e.panel)})),ie=ee.map((function(e){return{id:e.id,categories:e.categories.map((function(e){return"engravingForWholesale"===Object(I.getCategoryLegacyType)(e)?{id:e.id,type:Object(I.getCategoryLegacyType)(e),templateSameOnAll:e.templateSameOnAll}:"fileUpload"===Object(I.getCategoryLegacyType)(e)?{id:e.id,type:Object(I.getCategoryLegacyType)(e),options:e.options.map((function(e){return{id:e.id,beforeRemoveBg:e.beforeRemoveBg,imageWithMockup:e.imageWithMockup}}))}:{id:e.id,type:Object(I.getCategoryLegacyType)(e)}}))}})),(ce={layers:ae.map((function(e){return{panel:e.panel,category:e.category,option:e.option,value:e.value,categoryParentID:e.categoryParentID}})),printableElements:g.default.get(Y,"printableElements")||[],quantity:o||1,categoryHelpers:g.default.cloneDeep(Y.categoryHelpers)||{},categoriesData:ie}).printableElements.forEach((function(e){e.active=!1})),ce.additionalData=ne({printableElements:ce.printableElements}),le=[],ue=1,(se=g.default.get($,"0.weight")||"")&&(se=parseFloat(se)*J.quantity),pe={},de=[],fe=[],ye=b&&b.length?b:g.default.get($,"0.sku")||"",e.next=37,Promise.all(ae.map(function(){var e=M(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=M(regeneratorRuntime.mark((function e(n,o){var a,c,l,u,s,p,d,m,b,v,h,O,j,E,P,C,_,k,S,T,A,D,L,N,U;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=ee.find((function(e){return e.id===t.panel})),c=a.categories.find((function(e){return e.id===t.category})),l=c.options.find((function(e){return e.id===t.option})),!c||!["checkbox"].includes(Object(I.getCategoryLegacyType)(c))||!1!==t.value){e.next=6;break}return e.abrupt("return",n());case 6:if(u=J.quantity,s=g.default.get(c,"quantitySourcePanel",!1),p=g.default.find(ee,(function(e){return e.id===(s||t.panel)}))||{id:t.panel},c.quantitySource?(d=Y.layers.find((function(e){return e.panel===p.id&&e.category===c.quantitySource})))&&(m=Y.panels.find((function(e){return e.id===d.panel})))&&(b=m.categories.find((function(e){return e.id===d.category})))&&b.options.find((function(e){return e.id===d.option}))&&(v=Number(d.value),u*=v||1):u*=c.quantityMultiplier||1,"wholesaleOrder"===Object(I.getCategoryLegacyType)(c)&&(u=+t.value),l.quantityMultiplier&&(u*=l.quantityMultiplier),h="",x||(h+="".concat(a.title," - ")),""===(h+=c.title)&&(1===a.categories.length?h=a.title||a.id:(O=c.options.indexOf(l),h=a.title+" "+O)),j=l.option.data.label,g.default.includes(["input","inputLong","inputMulti","dateTime","date","time","wholesaleOrder","engravingForWholesale","fileUpload","fontSize"],Object(I.getCategoryLegacyType)(c))&&(j=t.value),"percentage"===Object(I.getCategoryLegacyType)(c)&&(ue=Number(t.price)/100),"fileUpload"!==Object(I.getCategoryLegacyType)(c)){e.next=38;break}if(E=g.default.find(Y.layers,{panel:a.id,category:c.id,option:l.id}),!(P=E&&{fileUploadValue:E.value,fileNameValue:g.default.get(E,"fileUploadData.name")||E.value,fileTypeValue:g.default.get(E,"fileUploadData.type")||"image/png"})||!P.fileUploadValue){e.next=38;break}if(!c.addEditedImageWithCoordsToCartProperties){e.next=35;break}if(C={category:c,panel:a,option:l,uploadedImage:P,optionTitle:h},!g.default.find(R,(function(e){var t=g.default.get(e,"image.source"),n=t.panel,r=t.category,o=t.option;return e.image.enabled&&C.panel.id===n&&C.category.id===r&&C.option.id===o}))){e.next=32;break}return e.next=29,Object(w.dispatchGetLayerImage)(C);case 29:e.t0=e.sent,e.next=33;break;case 32:e.t0=[];case 33:_=e.t0,g.default.forEach(_,(function(e){e.file&&le.push(e)}));case 35:le.push({file:P.fileUploadValue,property:h,name:P.fileNameValue||null,type:P.fileTypeValue||null,imageCoords:!1}),l.beforeRemoveBg&&le.push({file:l.beforeRemoveBg,property:h,name:l.beforeRemoveBg||null,type:P.fileTypeValue||null,imageCoords:!1}),l.imageWithMockup&&le.push({file:l.imageWithMockup,property:h,name:l.imageWithMockup||null,type:P.fileTypeValue||null,imageCoords:!1});case 38:return"counter"!==Object(I.getCategoryLegacyType)(c)&&"autocompleteNumber"!==Object(I.getCategoryLegacyType)(c)||(j="".concat(l.option.data.label?l.option.data.label+": ":"").concat(t.value),"slash"===(l.option.data&&l.option.data.valuePreview)&&(k=new B.a(t.value),S=k.toFraction(!0),T="".concat(t.value<1?"0 ":"").concat(t.value||parseFloat(S)?S:""),j="".concat(l.option.data.label?l.option.data.label+": ":"").concat(T))),(A=!!i||r.skuToCartProps)&&l.sku.length&&void 0!==c.skuOrder&&(pe[a.id]||(pe[a.id]=[]),pe[a.id].push({sku:l.sku,skuOrder:c.skuOrder,title:"".concat(a.title," - SKU"),panelIndex:ee.indexOf(a),prefix:a.skuPrefix?a.skuPrefix:""}),de.push({sku:l.sku,skuOrder:c.skuOrder})),A&&l.sku.length&&f&&(D=Object.keys(c.assignedOrderSkuToPanels),g.default.forEach(D,(function(e){var t=g.default.find(ae,{panel:e});if(t){var n=g.default.get(c,"assignedOrderSkuToPanels.".concat(t.panel)),r=g.default.find(ee,{id:t.panel}),o=g.default.isNumber(n)&&r&&r.assignSkuFromOtherPanels;o&&!pe[t.panel]&&(pe[t.panel]=[]),o&&pe[t.panel].push({sku:l.sku,skuOrder:n,title:"".concat(r.title," - SKU"),panelIndex:ee.indexOf(r),prefix:r.skuPrefix?r.skuPrefix:""}),o&&de.push({sku:l.sku,skuOrder:n})}}))),L=l.price||0,g.default.get(l,"option.data.chargePerCharacter")&&(L="".concat(j.length," x ").concat(L)),"additionalPriceField"===Object(I.getCategoryLegacyType)(c)&&(L=t.value),y&&l.inventory&&l.inventory.variant&&(!l.inventory.inventoryManagement||"NOT_MANAGED"!==l.inventory.inventoryManagement)&&fe.push({data:{id:l.inventory.variant,quantity:Math.floor(u)},technicalData:{}}),N=l.weight?l.weight*u:0,se=+se+Number(N),U={panelIndex:ee.indexOf(a),categoryIndex:a.categories.indexOf(c),optionIndex:c.options.indexOf(l),panel:a.id,category:c.id,option:l.id,title:h,value:j,sku:l.sku,skuOrder:c.skuOrder,cost:L,quantity:u,total:L*u,inventoryManagement:l.inventory&&l.inventory.inventoryManagement,haveBundle:y&&l.inventory&&(!l.inventory.inventoryManagement||"NOT_MANAGED"!==l.inventory.inventoryManagement)&&l.inventory.id},e.abrupt("return",n(U));case 53:e.prev=53,e.t1=e.catch(0),console.error(e.t1);case 56:case"end":return e.stop()}}),e,null,[[0,53]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 37:return me=(me=e.sent).filter((function(e){return!!e})),e.prev=39,e.next=42,Object(w.getCroppingAreaImages)({customLayers:R,layers:Y.layers});case 42:be=e.sent,g.default.forEach(be,(function(e){return le.push(e)})),e.next=49;break;case 46:e.prev=46,e.t0=e.catch(39),console.warn("[getCroppingAreaImages] - Error",e.t0);case 49:f?me=g.default.sortBy([].concat(U(me),U(Object.keys(pe).map((function(e){var t=pe[e],n=t[0].prefix;return g.default.orderBy(t,"skuOrder","asc").map((function(e){n+=e.sku})),{title:t[0].title,panelIndex:t[0].panelIndex,categoryIndex:-1,optionIndex:-1,value:n}})))),["panelIndex","categoryIndex","optionIndex"]):(ye+=g.default.orderBy(de,"skuOrder","asc").map((function(e){return e.sku})).join(""),me=[{title:"SKU",panelIndex:-1,categoryIndex:-1,optionIndex:-1,value:ye}].concat(U(g.default.sortBy(me,["panelIndex","categoryIndex","optionIndex"])))),ge=new Map,me.forEach((function(e){var t="".concat(e.title);if(me.find((function(t){var n=r.disablePanelsTitlesInCart;return t.title===e.title&&(t.panelIndex===e.panelIndex&&t.categoryIndex!==e.categoryIndex||t.panelIndex===e.panelIndex&&t.categoryIndex===e.categoryIndex&&t.optionIndex!==e.optionIndex||n&&t.panelIndex!==e.panelIndex)}))&&(t+="_".concat(e.panelIndex,"_").concat(e.categoryIndex,"_").concat(e.optionIndex)),ge.has(t)){var n=ge.get(t);n.push(e),ge.set(t,n)}else ge.set(t,[e])})),ve=r.currency||"USD",he={},Oe={},J.isCalculated=!!te(this.props),ge.forEach((function(e,t){var n=[],o=0,a="",c=!1;e.forEach((function(e){var t=g.default.find(ee,{id:e.panel}),l=t&&g.default.find(t.categories,{id:e.category}),u=l&&g.default.find(l.options,{id:e.option}),s=Object(O.h_getCategoryItems)({panels:ee,categoryType:"wholesaleOrder"},{optionID:e.option});s&&(e.value="".concat(s.option.data.label," - ").concat(K({},e).value)),l&&["fileUpload"].includes(Object(I.getCategoryLegacyType)(l))&&(e.value="Url - ".concat(e.value),u.beforeRemoveBg&&(e.value+="<br>BeforeRemoveBgUrl - ".concat(u.beforeRemoveBg)),u.imageWithMockup&&(e.value+="<br>imageWithMockup - ".concat(u.imageWithMockup))),Number(e.cost)>0&&(o+=Number(e.cost));var p=(e.quantity||1)/J.quantity;n.push(e.value),a=(r.skuToCartProps||i)&&"NOT_MANAGED"!==e.inventoryManagement&&e.sku&&e.sku.length?" [".concat(e.sku,"]").concat(p?" x".concat(Math.floor(p)):""):"",l&&!0===l.removeFromDescription&&(c=!0)}));var l=(o=s.I18n.l(o,{style:"currency",currency:ve,minimumFractionDigits:2,maximumFractionDigits:2}))&&"0"!==o?" (".concat(o,")"):"";n=n.join(", "),he[t]=N?"".concat(n):"".concat(n).concat(a).concat(l),c||"SKU"===t||(Oe[t]=N?"".concat(n):"".concat(n).concat(a).concat(l))})),je=[],g.default.get(Y,"panels",[]).map((function(e){return g.default.get(e,"categories",[]).map((function(t){return je.push(K(K({},t),{},{panel:e}))}))})),g.default.get(Y,"printableElements",[]).map((function(e,t){var n=g.default.get(Y,"printableAreas",[]).find((function(t){return t.id===e.areaId})),r=je.find((function(e){return e.id===n.category})),o=r.panel,a="".concat(o.title," - ").concat(r.title," #").concat(t+1),i="";"text"===e.type?(i='Text: "'.concat(e.value,'"'),i+=", ".concat(g.default.get(e,"text.fontFamily","Default font")),i+=", ".concat(g.default.get(e,"text.fontSize","30"),"pt"),i+=" ".concat(g.default.get(e,"text.fontWeight","")),i+=", ".concat(g.default.get(e,"text.fillColor","Default color"))):i="Image: ".concat(e.value),he[a]=i})),J.properties=he,J.isCalculated&&(J.properties.base_price=g.default.get(this.props,"product.base.price")||null,J.properties.is_calculated=!0),xe=Y.price,y&&me.map((function(e){e.haveBundle&&Number(e.total)&&(xe-=Number(e.total))})),H&&!Object(E.g_checkPreGenerationConflictCategories)(ee).check&&($=$||[],we=parseFloat(xe)/J.quantity,Ee=(we<0?0:we).toFixed(2),(Pe=$.find((function(e){return parseFloat(e.price).toFixed(2)===Ee})))?J.id=Pe.id:J.isCalculated&&($.length?J.id=$[0].id:J.id=this.props.productId)),j||(J.properties[r.cartPropVarConfigId||"configId"]=J.configid,J.properties[r.cartPropVarProductUrl||"productUrl"]=document.location.origin+document.location.pathname),!D&&se&&(J.properties.weight=se/J.quantity),1!==ue&&(J.properties.total_price=Y.fullPrice),Ce=fe&&fe[0]||{},g.default.get(Ce,"data")&&(Ce.data.totalQty=0),_e=fe.reduce((function(e,t){var n=e.findIndex((function(e){return e.data.id===t.data.id}));return-1===n?e.push(K(K({},t),{data:K(K({},t.data),{},{totalQty:t.data.quantity})})):e[n].data.totalQty=e[n].data.totalQty+t.data.quantity,e}),[K({},Ce)]).filter((function(e){return e.data&&e.data.id})).map((function(e){return K(K({},e),{},{data:{id:e.data.id,quantity:e.data.totalQty}})})),ke=[{data:J,technicalData:ce}].concat(U(_e)),Z.length?(Re={},a?Object.keys(v.default.views).map((function(e){return Re[e]=!1})):(Re[G]=!1,r.displayAllViewsInOrderProperties&&Object.keys(v.default.views).map((function(e){return Re[e]=!1}))),c(s.I18n.t("loader.uploadingImages")),setTimeout((function(){var e=this,t=r.currentView,n=Object.keys(Re);n.map((function(o,a){setTimeout((function(){var i=new Image;!function(){var e=M(regeneratorRuntime.mark((function e(i){var c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("collage"!==o){e.next=4;break}v.default.getCollage(r.printFileSize,(function(e){e?i(e):(e=(Object.values(Y.base.image)||[])[0],i(e,!0))})),e.next=23;break;case 4:if(!v.default.views[o]){e.next=16;break}if(!r.separateOrderByViews){e.next=10;break}A(o),setTimeout(M(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.views[o].getPrintSnapshot();case 2:r=e.sent,i(r),n.length-1===a&&A(t);case 5:case"end":return e.stop()}}),e)}))),0),e.next=14;break;case 10:return e.next=12,v.default.views[o].getPrintSnapshot();case 12:c=e.sent,i(c);case 14:e.next=23;break;case 16:if(l=Y.base.image[o]){e.next=22;break}return e.next=20,Object(T.default)();case 20:(u=e.sent)&&(l=u);case 22:oe(l,i);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()((function(t){i.src=t,i.onload=function(){i&&Se(i,o,(function(){Re[o]=!0,c("".concat(s.I18n.t("loader.uploadingImages")," ").concat(Object.keys(Re).filter((function(e){return Re[e]})).length,"/").concat(Object.keys(Re).length)),Object.keys(Re).filter((function(e){return!Re[e]})).length||(le?Ie.apply(e,[le,function(){return Ae.apply(e,[J,ce])}]):Ae.apply(e,[J,ce]))}))}}))}),r.separateOrderByViews?3*a:0)}))}),0)):(V.length?J.properties._image=g.default.get(V,"[0].src"):!V.length&&H&&(J.properties._image="https://cdn.shopify.com/s/files/applications/50259d37be2fdd4e0e403337db9d1716.png"),le?Ie.apply(this,[le,function(){return Ae.apply(Le,[J,ce])}]):Ae.apply(this,[J,ce]));case 73:case"end":return e.stop()}}),e,this,[[39,46]])}))),function(){return i.apply(this,arguments)})},{key:"productReset",value:function(){var e=this.props,t=e.productReset,n=e.settings,r=(e.productLayerUpdate,Object(L.productSelectProduct)());l.a.fire({title:s.I18n.t("addToCart.modals.reset.title"),text:s.I18n.t("addToCart.modals.reset.message"),confirmButtonText:s.I18n.t("addToCart.modals.reset.confirm"),cancelButtonText:s.I18n.t("addToCart.modals.reset.cancel"),showCancelButton:!0,icon:"question"}).then(function(){var e=M(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isConfirmed){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t({defaultOptions:n.defaultOptions,panels:r.panels,base:r.base});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"panelToBeDisplayed",value:function(e,t,n,r){var o=Object(L.productSelectProduct)();if(r)return!0;var a=Object(b.default)(e,t,n,null,o.panels);return void 0===a||a}},{key:"advanceTab",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props,n=t.appSettingsCurrentViewUpdate,r=t.currentTab,o=t.panels,a=t.appSettingsCurrentTabUpdate,i=t.settings,c=t.customLayers,l=Object(L.productSelectLayers)(),u=function(e,t){if(e){var r=U(o).filter((function(e){return Object(b.default)(e.logic,U(l),U(c),null,o)})),u=a(t).isValid,s=r[t];if(s&&s.selectView&&u&&n(s.selectView),u){var p=window.CPB_MobileFixedScroll;"aloha"===i.theme.id&&p&&g.default.get(p,"state.minOffsetTop")&&g.default.get(p,"state.minWidth")&&p.methods.isFixed()&&f()(window).width()<=p.state.minWidth&&setTimeout((function(){p.methods.bodyScrollTo(p.state.minOffsetTop-1)}),350)}}},s=0;if(e){s=r+1;var p=i.hasSummary?o.length+1:o.length;u(s!==p,s)}else u((s=r-1)>=0,s)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isAdmin,r=t.settings,a=t.currentTab,i=t.productDrawPanels;if(this.state.loading)return o.a.createElement(p.default,null);var c=["col-tabs","row-tabs"].includes(r.layout),l=c&&r.hasNextTab&&i.length&&a!==i.length-1?"":"cpb-hide";return o.a.createElement("div",{className:"cpb-product-actions-container"},o.a.createElement("button",{className:"cpb-actions-btn cpb-next-tab-button cpb-prev-tab-button ".concat(c&&r.hasPrevTab&&0!==r.currentTab?"":"cpb-hide"),"data-intro":"Advance To Prev Tab","data-position":"left",onClick:function(){return e.advanceTab(!1)}},o.a.createElement(s.Translate,{value:"addToCart.buttons.prevTab"})),!1,o.a.createElement("button",{className:"cpb-actions-btn cpb-next-tab-button ".concat(l),"data-intro":"Advance To Next Tab","data-position":"left",onClick:this.advanceTab},o.a.createElement(s.Translate,{value:"addToCart.buttons.nextTab"})),o.a.createElement("button",{className:"cpb-actions-btn cpb-reset-button ".concat(r.hasReset?"":"cpb-hide"),"data-intro":"Reset Product","data-position":"left",onClick:this.productReset},o.a.createElement(s.Translate,{value:"addToCart.buttons.reset"})),!n&&o.a.createElement("button",{className:"cpb-actions-btn cpb-add-to-cart-button",onClick:this.handleSubmit},o.a.createElement("i",{className:"lnr lnr-cart"}),o.a.createElement(s.Translate,{value:"addToCart.buttons.addToCart"})),!1)}}])&&F(t.prototype,r),a&&F(t,a),d}(o.a.PureComponent);function oe(e,t){if(x()(e))return t(e);var n=new XMLHttpRequest;n.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},n.readyState===n.DONE&&200===n.status&&e.readAsDataURL(n.response)},n.onreadystatechange=function(){n.readyState===XMLHttpRequest.HEADERS_RECEIVED&&200===n.status&&"responseType"in n&&"application/json"!==n.getResponseHeader("Content-Type")&&(n.responseType="blob")},n.open("GET",e,!0),n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="text",n.send()}t.default=Object(a.connect)((function(e){return{layout:e.App.settings.layout,settings:e.App.settings,views:e.App.settings.views,variants:e.App.variants,productId:e.Routing.productId,Routing:e.Routing,cartImage:e.App.settings.cartImage,anotherViewsInCart:e.App.settings.anotherViewsInCart,currentTab:e.App.settings.currentTab,hasSummary:e.App.settings.hasSummary,panels:e.Product.panels,quantity:e.Product.quantity,isAdmin:e.App.settings.isAdmin,customLayers:e.Product.customLayers,isInventoryEnabled:e.Global.inventoryEnabled,skuTabSeparated:e.App.settings.skuTabSeparated,bundleBuilderMode:e.App.settings.bundleBuilderMode,isAutoGenerationOff:e.Product.isAutoGenerationOff,baseSkuOverride:e.App.settings.baseSkuOverride,autogeneratedProductName:e.App.settings.autogeneratedProductName,isAdditionalPropsDisabled:e.App.settings.isAdditionalPropsDisabled,disablePanelsTitlesInCart:e.App.settings.disablePanelsTitlesInCart,isProductWeightPropsDisabled:e.App.settings.isProductWeightPropsDisabled,inventoryLevels:e.Inventory.levels,locationId:e.Routing.locationId,removeProductAdditionalData:e.App.settings.removeProductAdditionalData,media:e.App.shop.productMedia,productDrawPanels:Object(L.productSelectorDrawPanelsWithSummaryIDs)(e),addAutogeneratedToParentsCollection:e.Global.addAutogeneratedToParentsCollection,addAutogeneratedTagsFromParent:e.Global.addAutogeneratedTagsFromParent,AddCpbOrderedToDeliveryProfile:e.Global.AddCpbOrderedToDeliveryProfile,AddCpbOrderedToSalesChannels:e.Global.AddCpbOrderedToSalesChannels}}),(function(e){return K(K({},Object(i.bindActionCreators)({appUIModalCartToggle:A.appUIModalCartToggle,productReset:R.productReset,appSettingsCurrentViewUpdate:A.appSettingsCurrentViewUpdate,appSettingsCurrentTabUpdate:A.appSettingsCurrentTabUpdate,loaderActionOverlayAdd:D.loaderActionOverlayAdd,loaderActionClear:D.loaderActionClear,loaderActionErrorAdd:D.loaderActionErrorAdd,appSettingsUpdate:A.appSettingsUpdate,productLayerUpdate:R.productLayerUpdate},e)),{},{dispatch:e})}))(re)},"./lib/app/ui/components/aside/controls/add-to-cart/methods/dispatchGetLayerImage.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/lodash-es/lodash.default.js"),o=n("./lib/app/utils/string/index.jsx");function a(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,l,"next",e)}function l(e){a(i,r,o,c,l,"throw",e)}c(void 0)}))}}function c(){return(c=i(regeneratorRuntime.mark((function e(t){var n,a,i,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.panel,a=t.category,i=t.option,c=t.uploadedImage,l=t.optionTitle,e.next=3,new Promise((function(e,t){var o=[],c=0,l=!1;document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_GET_LAYER_IMAGE",{detail:{panel:n,category:a,option:i,delayCall:function(){return c+=1},onImageLoaded:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return setTimeout((function(){r.default.get(t,"imageDataURL")||(t={}),o.push(t),o.length===c&&(e(r.default.filter(o,(function(e){return!!e.imageDataURL}))),l=!0)}),0)}}})),setTimeout((function(){l||(e([]),console.error("PRODUCT_BUILDER_GET_LAYER_IMAGE - there was an unexpected error getting the image"))}),3e5)}));case 3:return u=e.sent,e.abrupt("return",r.default.map(u,(function(e){var t=e.imageDataURL,n=e.customLayer,r=e.imageCoords,a="",i=c.fileNameValue||"",u=i.substring(i.lastIndexOf(".")+1,i.length)||i,s="".concat(l," (").concat("customized",' by "').concat(n.title,'", View - ').concat(Object(o.capitalize)(n.view)||"Front",")");if(u&&i!==u&&(i=i.replace(".".concat(u),""),i+="".concat("customized",".").concat(u)),r){var p=r.offset,d=r.rotate,f=r.scale,y=r.flip;a="\n\t\t\t\tOffset X = ".concat(Object(o.u_floorDecimals)(100*p.x,1),"px;\n\t\t\t\tOffset Y = ").concat(Object(o.u_floorDecimals)(100*p.y,1),"px;\n\t\t\t\tFlip X = ").concat(-1===y.x?"On":"Off",";\n\t\t\t\tRotation = ").concat(d,";\n\t\t\t\tScale = ").concat(Object(o.u_floorDecimals)(100*f,1),"%;\n\t\t\t").replace(/\s+/g," ").trim()}return{file:t,property:s,propertyLabel:"".concat(s," - Coords"),name:i||null,type:c.fileTypeValue||null,imageCoordsString:a||!1}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.default=function(e){return c.apply(this,arguments)}},"./lib/app/ui/components/aside/controls/add-to-cart/methods/getAddToCartErrorMessage.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./lib/app/utils/i18n.jsx");t.default=function(e){var t=r.I18n.t("loader.error.cartAdd");try{var n=JSON.parse(e.responseText||""),o=n&&n.description;t="".concat(t).concat(o?'<br><span class="cpb-error">'.concat(o,"</span>"):"")}catch(e){console.warn("afterAddToCartMethod - parse description JSON",e)}return t}},"./lib/app/ui/components/aside/controls/add-to-cart/methods/getCroppingAreaImages.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./lib/app/utils/image-storage/index.jsx"),o=n("./lib/app/utils/string/index.jsx"),a=n("./lib/app/utils/logic-engine.jsx"),i=n("./lib/app/ui/components/preview/render-konva/layers/cropping-area/utils/index.jsx"),c=n("./node_modules/lodash-es/lodash.default.js");function l(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){l(a,r,o,i,c,"next",e)}function c(e){l(a,r,o,i,c,"throw",e)}i(void 0)}))}}function s(){return(s=u(regeneratorRuntime.mark((function e(t){var n,l,s,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.customLayers,l=t.layers,e.prev=1,s=c.default.filter(n,{type:"cropping-area"}).filter((function(e){return Object(a.default)(e.logic,l,n)})),e.next=5,Promise.all(s.map(function(){var e=u(regeneratorRuntime.mark((function e(t){var n,a,l,u,s,p,d,f,y,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=3,a=t.aspectRatio.width||0,l=t.aspectRatio.height||0,u=t.position.x||0,s=t.position.y||0,p={ratio:{width:a,height:l},position:{x:u,y:s}},e.t0=c.default.get(r.default,"views.".concat(t.view,".getPrintSnapshotWithParams")),!e.t0){e.next=11;break}return e.next=10,r.default.views[t.view].getPrintSnapshotWithParams(p);case 10:e.t0=e.sent;case 11:if(d=e.t0,f="".concat(t.title," (View - ").concat(Object(o.capitalize)(t.view)||"Front",")"),d){e.next=15;break}throw new Error("imageStorage.views[".concat(t.view,"] is ").concat(d));case 15:return y=Object(i.convertAspectToSize)({width:a,height:l},100),m="\n\t\t\t\t\tWidth = ".concat(Object(o.u_floorDecimals)(y.width,n),"%;\n\t\t\t\t\tHeight = ").concat(Object(o.u_floorDecimals)(y.height,n),"%;\n\t\t\t\t\tX = ").concat(Object(o.u_floorDecimals)(100*u,n),"%;\n\t\t\t\t\tY = ").concat(Object(o.u_floorDecimals)(100*s,n),"%;\n\t\t\t").replace(/\s+/g," ").trim()||!1,e.abrupt("return",{file:d,property:f,propertyLabel:"".concat(f," - Cropping Params"),name:c.default.kebabCase(t.title)+"__".concat(t.id,".png"),type:"image/png",imageCoordsString:m});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return p=e.sent,e.abrupt("return",p);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}t.default=function(e){return s.apply(this,arguments)}},"./lib/app/ui/components/aside/controls/add-to-cart/methods/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./lib/app/ui/components/aside/controls/add-to-cart/methods/dispatchGetLayerImage.jsx");n.d(t,"dispatchGetLayerImage",(function(){return r.default}));var o=n("./lib/app/ui/components/aside/controls/add-to-cart/methods/getCroppingAreaImages.jsx");n.d(t,"getCroppingAreaImages",(function(){return o.default}))},"./lib/app/ui/components/aside/controls/agreement-checkbox.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c,l=n("./node_modules/react/index.js"),u=n.n(l),s=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),p=n("./node_modules/redux/es/redux.js"),d=n("./node_modules/react-redux/es/index.js"),f=n("./lib/app/store/slices/Product/index.jsx");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var P=s.default.div(r||(r=E(["\n\tmargin: 20px 0 20px;\n\tdisplay: flex;\n\twidth: 100%;\n\tflex-wrap: wrap;\n\tpadding-top: 25px;\n"]))),C=s.default.label(o||(o=E(["\n\tdisplay: flex;\n\tflex-wrap: wrap;\n"]))),_=s.default.input(a||(a=E(["\n\twidth: 20px;\n\theight: 20px;\n"]))),k=s.default.div(i||(i=E(["\n\tfont-size: 18px;\n\tmargin-left: 10px;\n\tfont-weight: 600;\n"]))),S=s.default.div(c||(c=E(["\n\tfont-size: 20px;\n\twidth: 100%;\n"]))),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,n,r,o=O(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).agreementOnChange=t.agreementOnChange.bind(x(t)),t}return t=a,(n=[{key:"agreementOnChange",value:function(e){(0,this.props.productAgreementValueUpdate)(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.settings,r=t.agreementCheckboxValue;return u.a.createElement(P,{className:"cpb-agreement-wrapper"},u.a.createElement(C,{className:"cpb-agreement-label"},u.a.createElement(_,{className:"cpb-agreement-checkbox",type:"checkbox",value:r,checked:!!r,name:"agreementCheckbox",onChange:function(t){return e.agreementOnChange(!r)}}),u.a.createElement(k,{className:"cpb-agreement-title"},n.hasAgreementLabel)),u.a.createElement(S,{className:"cpb-agreement-description",dangerouslySetInnerHTML:{__html:n.hasAgreementDescription}}))}}])&&v(t.prototype,n),r&&v(t,r),a}(l.Component);t.default=Object(d.connect)((function(e){return{agreementCheckboxValue:e.Product.agreementCheckboxValue}}),(function(e){return b(b({},Object(p.bindActionCreators)({productAgreementValueUpdate:f.productAgreementValueUpdate},e)),{},{dispatch:e})}))(T)},"./lib/app/ui/components/aside/controls/quantity-box.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c,l,u,s,p,d,f,y=n("./node_modules/react/index.js"),m=n.n(y),b=n("./node_modules/react-redux/es/index.js"),g=n("./node_modules/redux/es/redux.js"),v=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),h=n("./node_modules/lodash-es/lodash.default.js"),O=n("./node_modules/lodash-es/debounce.js"),j=(n("./node_modules/rc-slider/assets/index.css"),n("./lib/app/utils/i18n.jsx")),x=n("./lib/app/utils/helpers/index.jsx"),w=n("./lib/app/utils/store/getters.jsx"),E=n("./lib/app/ui/components/admin/editor/category/types.jsx"),P=n("./lib/app/store/slices/Loader/index.jsx"),C=n("./lib/app/store/slices/Product/index.jsx"),_=n("./lib/app/store/slices/Product/selectors.jsx");function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){I(a,r,o,i,c,"next",e)}function c(e){I(a,r,o,i,c,"throw",e)}i(void 0)}))}}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return N(this,n)}}function N(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var F=v.default.div(r||(r=M(["\n\tmargin: 20px 0;\n"]))),z=v.default.div(o||(o=M(["\n   font-size: 18px;\n    margin: 5px;\n    font-weight: 600;\n"]))),q=v.default.div(a||(a=M(["\n    display: flex;\n"]))),W=v.default.button(i||(i=M(["\n    text-align: center;\n    width: 36px;\n    height: 36px;\n    border-radius: 0;\n    cursor:pointer;\n    \n    &:disabled {\n    \tcursor:default;\n    \topacity: .7;\n    }\n"]))),Q=v.default.input(c||(c=M(["\n    font-size: 18px;\n    margin: 5px;\n    font-weight: 600;\n    width: 64px;\n"]))),G=(v.default.table(l||(l=M(["\n\twidth: 100%;\n"]))),v.default.thead(u||(u=M([""]))),v.default.th(s||(s=M(["\n\ttext-align: left;\n\tpadding: 10px 5px;\n"]))),v.default.tbody(p||(p=M([""]))),v.default.tr(d||(d=M(["\n\t&.cpb-bracket-met{\n\t\tbackground: rgba(0, 0, 0, 0.1);\n\t}\n\t&.cpb-active{\n\t\tbackground: rgba(12, 170, 12, 0.7294117647058823);\n    \tcolor: #fff;\n\t}\n"]))),v.default.td(f||(f=M(["\n\ttext-align:left;\n\tpadding: 10px 5px;\n"]))),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(i,e);var t,n,r,o,a=L(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),V(B(t=a.call(this,e)),"onChangeDebounced",(function(e){h.default.isFunction(e)&&e()})),t.productQuantityUpdate=t.productQuantityUpdate.bind(B(t)),t.debounceDelay=500,t.onChangeDebounced=Object(O.default)(t.onChangeDebounced,t.debounceDelay),t.onKeyPress=!1,t.state={value:1},t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.panels,n=e.layers,r=e.quantity,o=this.state.value,a=t.map((function(e){return e.categories})).flat(),i=h.default.isArray(a)&&a.find((function(e){return"qtyBreakdown"===Object(E.getCategoryLegacyType)(e)&&!h.default.get(e,"syncWithQtyOption.enabled")}));if(i){var c=n.find((function(e){return e.category===i.id}));if(c){var l=i.options.find((function(e){return e.id===c.option})),u=h.default.get(l,"option.data.inputMinValue");void 0!==u&&this.productQuantityUpdate({value:Number(u)||1})}}r!==o&&this.productQuantityUpdate({value:Number(r)||1})}},{key:"componentDidUpdate",value:function(e,t,n){var r=this.props.quantity;e.quantity!==r&&(this.debounceDelay||(this.setDebounceDelay=500),this.productQuantityUpdate({value:r,validate:!1,sendToReducer:!1}))}},{key:"setDebounceDelay",set:function(e){this.debounceDelay=e,this.onChangeDebounced=e?Object(O.default)(this.onChangeDebounced,e):this.onChangeDebounced.bind(this)}},{key:"setOnKeyPress",set:function(e){this.onKeyPress=e,this.setDebounceDelay=e?500:0}},{key:"productQuantityUpdate",value:function(e){var t=this,n=e.offset,r=e.value,o=e.validate,a=void 0===o||o,i=e.sendToReducer,c=void 0===i||i,l=this.props,u=l.productQuantityUpdate,s=l.settings,p=l.quantity,d=Number(this.state.value)||1;if(!(void 0===r&&1===d&&n<0)){var f=Number(void 0===r?d+n:r)||1;this.setState({value:f}),this.onChangeDebounced((function(){a&&(f=Object(x.h_inputNumberValueLimits)(f,s.minTotalQty||1,s.maxTotalQty),t.setState({value:f})),c&&(u(f),t.manageCopiesForEngravingForWholesaleType(p,f))}))}}},{key:"checkQuantityDiff",value:function(e,t){return this.props.hasEngravingForWholesale&&e!==t&&(e<t&&t-e>=2||e>t&&e-t>=2||e>t&&1===t)}},{key:"manageCopiesForEngravingForWholesaleType",value:(o=A(regeneratorRuntime.mark((function e(t,n){var r,o,a,i,c,l,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,o=r.productManageDynamicCategories,a=r.productCategoryHelpersUpdate,i=r.loaderActionClear,c=r.loaderActionOverlayAdd,l=r.panels,r.layers,u=l.map((function(e){return e.categories})).flat(),h.default.isArray(u)){e.next=4;break}return e.abrupt("return");case 4:if(u.find((function(e){return"engravingForWholesale"===Object(E.getCategoryLegacyType)(e)}))){e.next=6;break}return e.abrupt("return");case 6:if(!(n<=1)){e.next=9;break}return e.next=9,a({path:"engravingForWholesale.repeatOptionsIndex",payload:null,reset:!0});case 9:t!==n&&((s=this.checkQuantityDiff(t,n))&&c(),setTimeout(A(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({quantity:n,prevQuantity:t,categoryType:"engravingForWholesale"});case 2:s&&i();case 3:case"end":return e.stop()}}),e)})))));case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"wholesaleOrderTotalQtyByLayers",value:function(){var e=this.props,t=e.layers,n=e.panels;return Object(w.g_getSumValuesOfLayers)({layers:t,panels:n,categoryType:"wholesaleOrder"})}},{key:"render",value:function(){var e=this,t=this.props,n=t.discounts,r=t.hasWholesaleOrder,o=t.settings,a=this.state.value,i=100,c={};if(n&&n.quantity&&n.quantity.enabled){var l=n.quantity.brackets.map((function(e){return e.minQty}));i=h.default.max(l),c[1]=1,c[i]=i}var u=!r||!!this.wholesaleOrderTotalQtyByLayers();return m.a.createElement(F,{className:"cpb-quantity"},u&&m.a.createElement(z,{className:"cpb-quantity-label"},j.I18n.t("addToCart.buttons.quantity")),m.a.createElement(q,{className:"cpb-quantity-actions"},u&&m.a.createElement(Q,{className:"cpb-quantity-value"+(r?" cpb-quantity-no-buttons":""),min:"1",step:"1",readOnly:!!r,onChange:function(t){var n=Number.parseInt(t.target.value)||1;e.productQuantityUpdate({value:n})},onKeyPress:function(t){[13,27].includes(t.charCode)&&e.productQuantityUpdate({value:a})},type:"number",value:a}),!r&&m.a.createElement(m.a.Fragment,null,m.a.createElement(W,{className:"cpb-quantity-button cpb-quantity-button-increase",disabled:a>=o.maxTotalQty,onClick:function(){return e.productQuantityUpdate({offset:1})}},"+"),m.a.createElement(W,{className:"cpb-quantity-button cpb-quantity-button-decrease",disabled:a<=o.minTotalQty,onClick:function(){return e.productQuantityUpdate({offset:-1})}},"-"))))}}])&&D(t.prototype,n),r&&D(t,r),i}(y.Component));t.default=Object(b.connect)((function(e){return{layers:Object(_.productSelectLayers)(e),panels:Object(_.productSelectPanels)(e),settings:e.App.settings,currentPanel:e.Product.panels[e.App.settings.currentTab],hasLoader:!!e.Loader.actions.length,quantity:e.Product.quantity,discounts:e.App.settings.discounts,hasQtyBreakdown:!!e.Product.panels.map((function(e){return!!e.categories.find((function(e){return"qtyBreakdown"===Object(E.getCategoryLegacyType)(e)&&!h.default.get(e,"syncWithQtyOption.enabled")}))})).length,hasWholesaleOrder:!!e.Product.panels.filter((function(e){return!!e.categories.find((function(e){return"wholesaleOrder"===Object(E.getCategoryLegacyType)(e)}))})).length,hasEngravingForWholesale:!!e.Product.panels.map((function(e){return!!e.categories.find((function(e){return"engravingForWholesale"===Object(E.getCategoryLegacyType)(e)}))})).length}}),(function(e){return T(T({},Object(g.bindActionCreators)({productQuantityUpdate:C.productQuantityUpdate,productManageDynamicCategories:C.productManageDynamicCategories,loaderActionOverlayAdd:P.loaderActionOverlayAdd,loaderActionClear:P.loaderActionClear,productCategoryHelpersUpdate:C.productCategoryHelpersUpdate},e)),{},{dispatch:e})}))(G)},"./lib/app/ui/components/aside/header.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./node_modules/jquery/dist/jquery.min.js"),s=n.n(u),p=n("./node_modules/styled-components/dist/styled-components.browser.esm.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var O=p.default.div(r||(r=h(["\n    \n"]))),j=p.default.h1(o||(o=h(["\n    font-size: 1.4em;\n    margin: 10px 0;\n"]))),x=p.default.p(a||(a=h(["\n    margin: 10px 0;\n"]))),w=p.default.p(i||(i=h(["\n    margin: 10px 0;\n    font-size: 0.9em;\n    font-weight: bold;\n"]))),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,n,r,o=m(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).getValue=e.getValue.bind(g(e)),e}return t=a,(n=[{key:"getValue",value:function(e){var t=s()("#product-builder");return"engine"===e?t.attr("engine")||"shopify":t.attr(e)}},{key:"render",value:function(){var e=this.props,t=e.productName,n=e.displayProductTitle,r=e.displayProductDescription,o=e.productDescription;return"magento"!==this.getValue("engine")?l.a.createElement(l.a.Fragment,null,n&&t&&l.a.createElement("h1",{className:"cpb-product-title"},t),r&&o&&l.a.createElement("div",{className:"cpb-product-description",dangerouslySetInnerHTML:{__html:o}})):l.a.createElement(O,{className:"cpb-product-header"},this.getValue("product-name")&&l.a.createElement(j,{className:"cpb-product-header-title"},this.getValue("product-name")),this.getValue("product-short-description")&&l.a.createElement(x,{className:"cpb-product-header-description"},this.getValue("product-short-description")),this.getValue("product-sku")&&l.a.createElement(w,{className:"cpb-product-header-sku"},this.getValue("product-sku")))}}])&&f(t.prototype,n),r&&f(t,r),a}(l.a.PureComponent);t.default=E},"./lib/app/ui/components/aside/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./lib/app/store/slices/Product/selectors.jsx"),o=n("./node_modules/react-redux/es/index.js"),a=n("./lib/app/ui/layouts/loader.jsx"),i=n("./lib/app/ui/components/aside/header.jsx"),c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./lib/app/ui/components/aside/panels/index.jsx"),s=n("./lib/app/store/slices/App/selectors.jsx"),p=n("./lib/app/ui/components/aside/panel/new.jsx"),d=n("./lib/app/ui/components/aside/reorder-panels-controls.jsx"),f=n("./lib/app/ui/components/aside/controls/actions.jsx"),y=n("./lib/app/ui/components/aside/controls/CustomerProductName.jsx"),m=l.a.memo((function(e){e.panels;var t=e.isAdmin,n=e.asideLoaderOverlay,r=e.productName,o=e.productDescription,c=e.currentTab,s=e.currentPanelID,m=e.addSaveConfigurationButton,b=e.previewDimensions,g=e.displayProductTitle,v=e.displayProductDescription,h=e.layout,O="cpb-panels-container ".concat(h," cpb-current-tab-index-").concat(c," ").concat(s),j={};return b&&b.height&&(j.minHeight=b.height),l.a.createElement("div",{className:O,style:j},n&&l.a.createElement(a.default,{fixedOverlay:!0}),l.a.createElement(i.default,{productName:r,productDescription:o,displayProductTitle:g,displayProductDescription:v}),l.a.createElement(u.default,null),t&&l.a.createElement(l.a.Fragment,null,l.a.createElement(p.default,{display:t}),l.a.createElement(d.default,{display:t})),l.a.createElement(f.default,null),l.a.createElement(y.default,{isEnabled:m}))}));t.default=Object(o.connect)((function(){return function(e){return{layout:e.App.settings.layout,isAdmin:Object(s.appSelectIsAdmin)(e),previewDimensions:e.App.ui.previewDimensions,panels:e.Product.panels,productName:e.Product.name,addSaveConfigurationButton:e.App.settings.addSaveConfigurationButton,displayProductTitle:e.App.settings.displayProductTitle,displayProductDescription:e.App.settings.displayProductDescription,productDescription:e.App.shop.productDescription,asideLoaderOverlay:!!e.Loader.asideLoaderOverlay,currentTab:Object(s.appSelectCurrentTab)(e),currentPanelID:Object(r.productSelectorDrawPanelWithSummaryByID)(e)}}}))(m)},"./lib/app/ui/components/aside/modals/reorder-panels.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./lib/app/ui/components/common/modal/reorder/index.jsx"),i=n("./node_modules/@shopify/polaris/index.es.js"),c=n("./node_modules/notie/dist/notie.min.js"),l=n.n(c);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,r,c=d(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this)).state={list:[]},e.listReorder=e.listReorder.bind(y(e)),e.submit=e.submit.bind(y(e)),e}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.props.list;this.setState({list:e.map((function(e,t){return e.order?e:Object.assign({},e,{order:t+1})}))})}},{key:"listReorder",value:function(e,t,n,r,o){if(this.mounted){var a=o,i=this.state.list;a=a.map((function(e,t){return Object.assign(e,{order:t+1})})),a=i.map((function(e){var t=a.filter((function(t){return t.title===e.title}))[0];return Object.assign({},e,{order:t.order})})),this.setState({newList:a})}}},{key:"submit",value:function(){var e=this.props,t=e.submit,n=e.close;t&&(t(this.state.list),l.a.alert({type:1,text:"Reorder Successful",time:3})),n()}},{key:"render",value:function(){var e=this.props.close,t=this.state.list;return this.mounted=!0,o.a.createElement("div",{className:"reorder_panels_tabs"},o.a.createElement(a.default,{list:t,callback:this.listReorder}),o.a.createElement(i.PageActions,{primaryAction:{content:"Apply",onAction:this.submit},secondaryActions:[{content:"Cancel",onAction:e}]}))}}])&&s(t.prototype,n),r&&s(t,r),u}(r.Component);t.default=b},"./lib/app/ui/components/aside/modals/reorder.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./lib/app/ui/components/common/modal/reorder/index.jsx"),i=n("./node_modules/@shopify/polaris/index.es.js"),c=n("./node_modules/lodash-es/lodash.default.js"),l=n("./node_modules/notie/dist/notie.min.js"),u=n.n(l);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,n,r,l=f(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=l.call(this)).state={list:[],type:"display"},e.changeListType=e.changeListType.bind(m(e)),e.listReorder=e.listReorder.bind(m(e)),e.getSortedList=e.getSortedList.bind(m(e)),e.submit=e.submit.bind(m(e)),e}return t=s,(n=[{key:"componentWillMount",value:function(){var e=this.props.list;this.setState({list:e.map((function(e){return e.zIndex?e:Object.assign({},e,{zIndex:1})}))})}},{key:"listReorder",value:function(e,t,n,r,o){if(this.mounted){var a=o,i=this.state.type,c=this.state.list;"preview"===i&&(a=a.map((function(e,t){return Object.assign(e,{zIndex:t+1})})),a=c.map((function(e){var t=a.find((function(t){return t.title===e.title}));return Object.assign({},e,{zIndex:t.zIndex})}))),this.setState({newList:a})}}},{key:"changeListType",value:function(e){this.setState({type:0===e?"preview":"display"})}},{key:"getSortedList",value:function(){var e=[],t=this.props.list,n=this.state.list;return t.forEach((function(t){var r=n.find((function(e){return e.title===t.title}));e.push(r)})),e}},{key:"submit",value:function(){var e=this.props,t=e.submit,n=e.close;t&&(t(this.state.list),u.a.alert({type:1,text:"Reorder Successful",time:3})),n()}},{key:"render",value:function(){var e=[],t=this.props.close,n=this.state,r=n.list,l=n.type;return this.mounted=!0,e="preview"===l?c.default.orderBy(r,["zIndex"],["asc"]):r,o.a.createElement("div",{className:"reorder_categories_tabs"},o.a.createElement(i.Tabs,{selected:"preview"===l?0:1,onSelect:this.changeListType,tabs:[{id:"preview",title:"Product Layers Preview"},{id:"display",title:"Options Panel"}],fitted:!0}),o.a.createElement(a.default,{list:e,callback:this.listReorder}),o.a.createElement(i.PageActions,{primaryAction:{content:"Apply",onAction:this.submit},secondaryActions:[{content:"Cancel",onAction:t}]}))}}])&&p(t.prototype,n),r&&p(t,r),s}(r.Component);t.default=g},"./lib/app/ui/components/aside/options/autocomplete-number-option/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./lib/app/utils/logic-engine.jsx"),i=n("./node_modules/react-redux/es/index.js"),c=n("./lib/app/utils/store/getters-isolated.jsx"),l=n("./lib/app/ui/components/aside/options/select-option/index.jsx"),u=n("./lib/app/ui/components/aside/options/autocomplete-number-option/methods/index.jsx"),s=n("./lib/app/utils/custom-react-hooks/index.jsx"),p=n("./node_modules/lodash-es/lodash.default.js");function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=Object(i.connect)((function(e){var t=e.Product,n=e.App,r=e.Editor,o=e.Global;return{layers:t.layers,customLayers:t.customLayers,settings:n.settings,bundleBuilderMode:n.settings.bundleBuilderMode,inventoryEnabled:p.default.get(o,"inventoryEnabled",!1),editor:r||{}}}))((function(e){var t=e.panel,n=e.category,i=e.layers,f=e.customLayers,m=e.settings,g=e.isAdminInterface,v=e.editor,h=e.bundleBuilderMode,O=e.inventoryEnabled,j=b(Object(r.useState)([]),2),x=j[0],w=j[1],E=y(y({},e),{},{valueList:x}),P=p.default.get(e,"onChange")||p.default.get(e,"input.onChange"),C=Object(s.usePrevious)(i),_=Object(s.usePrevious)(v);function k(){var r=[];T().map((function(o){var a=function(r){return g?{value:p.default.get(r,"option.data.value")}:p.default.find(e.layers,{panel:t.id,category:n.id,option:r.id})}(o);if(a){var i=o.option.data,c=i.inputStep,l=void 0===c?1:c,s=i.valuePreview,d=Object(u.getLabel)(s,a.value,l);r.push({label:d,value:parseFloat(a.value),id:o.id})}else if(0===o.option.data.value){var f=o.option.data,y=f.inputStep,m=void 0===y?1:y,b=f.valuePreview,v=Object(u.getLabel)(b,o.option.data.value,m);r.push({label:v,value:o.option.data.value,id:o.id})}else r.push({label:"",value:null,id:o.id})})),(!g||r.length)&&w(r)}function S(e,r){var a=u.getValue.bind(E)(e);return a&&0===a.value&&e.option.data.inputMinValue>0&&(a.value=null,a.label=""),o.a.createElement("div",{className:"cpb-option-type-select-container",key:e.id+r},o.a.createElement(l.default,{isSearchable:!0,selectHandleChange:function(r){return function(e,r){var o=p.default.isObject(e)?parseFloat(e.value)||0:e,a=u.getValue.bind(E)(r);if(!n.fake&&t){if(g){var c=(!a||parseFloat(a.value)!==o)&&o,l=x.map((function(e){var t=e.id===r.id,n=r.option.data,o=n.inputStep,a=void 0===o?1:o,i=n.valuePreview,l=t?Object(u.getLabel)(i,c,a):e.label;return y(y({},e),{},{value:parseFloat(t?c:e.value),label:!1!==c&&l})}));return w(l),void P(c)}var s=p.default.map(p.default.cloneDeep(n.options),(function(e){if(r&&r.id===e.id)p.default.set(e,"option.data.value",o);else{var a=p.default.find(i,{panel:t&&t.id,category:n&&n.id,option:e.id});a&&p.default.set(e,"option.data.value",a.value)}return e})).filter((function(e){return(!n.deselectOption||e.id!==r.id||o!==a.value)&&(e.id===r.id||p.default.find(i,{panel:t&&t.id,category:n&&n.id,option:e.id}))}));P(s)()}}(r,e)},selectOptions:Object(u.generateDropdownList)(e),selectValue:a}))}function T(){return d(n.options).filter((function(e){return!(!m.isAdmin&&(h||O))||Object(a.default)(e.logic,i,f,null,null,t)&&Object(c.gi_getOptionInStock)(e)}))}return Object(r.useEffect)((function(){n.options&&w(n.options.map((function(e){return{id:e.id,value:null,label:""}})))}),[]),Object(r.useEffect)((function(){t&&n&&g&&_.option!==v.option&&v.option&&k()}),[v.option]),Object(r.useEffect)((function(){t&&n&&!g&&(p.default.isEqual(C,i)||k())}),[i]),T().map(S)}))},"./lib/app/ui/components/aside/options/autocomplete.jsx":function(e,t,n){"use strict";n.r(t),function(e){n("./node_modules/@shopify/polaris/index.es.js");var r,o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/react-redux/es/index.js"),c=n("./lib/app/utils/logic-engine.jsx"),l=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=n("./node_modules/lodash/get.js"),s=n.n(u),p=n("./lib/app/utils/i18n.jsx"),d=n("./node_modules/downshift/dist/downshift.esm.js"),f=n("./lib/app/utils/store/getters.jsx");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E,P,C=l.default.div(r||(E=["\n    & input {\n      line-height: normal !important;\n      width: 100%;\n      border-radius: 4px;\n      border: 1px solid #ddd;\n    }\n"],P||(P=E.slice(0)),r=Object.freeze(Object.defineProperties(E,{raw:{value:Object.freeze(P)}})))),_=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,t);var n,r,o,i=O(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).state={value:"",isChanged:!1},t.optionToBeDisplayed=t.optionToBeDisplayed.bind(x(t)),t.handleChange=t.handleChange.bind(x(t)),t.filteredOptions=t.filteredOptions.bind(x(t)),t}return n=l,(r=[{key:"componentWillMount",value:function(){var t=this;e(document.body).on("PRODUCT_BUILDER_LAYER_UPDATE",(function(){t._mounted&&t.forceUpdate()}))}},{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"optionToBeDisplayed",value:function(e,t,n){var r=this.props,o=r.isAdmin,a=r.panel;return!!o||0===(s()(e,"rules.length")||0)||Object(c.default)(e,t,n,null,null,a)}},{key:"handleChange",value:function(e){var t=this.props,n=t.data,r=t.action,o=e;this.setState((function(){return{value:o,isChanged:!0}})),r(n.options.find((function(e){return e.id===o})))(o)}},{key:"filteredOptions",value:function(){var e=this,t=this.props,n=t.customLayers,r=t.layers,o=t.data,a=t.noDefault,i=t.isAdmin,c=t.locationId,l=t.inventoryLevels,u=t.bundleBuilderMode,s=t.inventoryEnabled,d=o;d.options||(d=this.props.category);var y=d.options;return a&&(y=[{preview:{type:"img",data:{front:null,back:null,left:null,right:null,top:null,bottom:null}},option:{data:{label:p.I18n.t("ui.select.notSelected"),value:""}},price:0,inStock:!0,sku:"",logic:{rules:[],action:"hide"},id:""}].concat(b(y))),y.filter((function(e){return i||!u&&!s&&e.inStock||(u||s)&&Object(f.g_getOptionInStock)(e,c,l)})).filter((function(t){return e.optionToBeDisplayed(t.logic,r,n,d)}))}},{key:"getValue",value:function(){var e=this.props,t=e.layers,n=e.category,r=e.panel,o=this.state.value;if(r&&n){var a=t.filter((function(e){return e&&n&&e.panel===r.id&&e.category===n.id}));a&&a.length>0&&(o=a[0].option)}return o}},{key:"render",value:function(){var e=this,t=(this.props.noDefault,this.getValue());return a.a.createElement(d.default,{className:"cpb-option cpb-option-type-select ".concat(t?"cpb-has-value":""),itemToString:function(e){return e?JSON.stringify(e):""},onChange:function(t){var n=t.id;return e.handleChange(n)},style:{width:"100%"}},(function(t){var n=t.getInputProps,r=t.getItemProps,o=t.getMenuProps,i=t.isOpen,c=t.inputValue,l=t.highlightedIndex,u=t.selectedItem,p=n();try{var d=JSON.parse(p.value);p.value=s()(d,"option.data.label")||p.value}catch(e){}return a.a.createElement("div",null,a.a.createElement(C,null,a.a.createElement("input",p)),a.a.createElement("ul",m({},o(),{style:{maxHeight:200,overflow:"auto"}}),i?e.filteredOptions().filter((function(e){return!c||e.option.data.label.toString().includes(c)})).map((function(e,t){return a.a.createElement("li",r({key:e.id,index:t,item:e,style:{backgroundColor:l===t?"lightgray":"white",fontWeight:u===e?"bold":"normal"}}),e.option.data.label)})):null))}))}}])&&v(n.prototype,r),o&&v(n,o),l}(o.Component);t.default=Object(i.connect)((function(e){return{layers:e.Product.layers,customLayers:e.Product.customLayers,isAdmin:e.App.settings.isAdmin,locationId:e.Routing.locationId,inventoryLevels:e.Inventory.levels,bundleBuilderMode:e.App.settings.bundleBuilderMode,inventoryEnabled:e.Global.inventoryEnabled}}))(_)}.call(this,n("./node_modules/jquery/dist/jquery.min.js"))},"./lib/app/ui/components/aside/options/checkbox.jsx":function(e,t,n){"use strict";n.r(t);var r,o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./lib/app/ui/components/common/forms/v3/input-checkbox.jsx"),l=n("./node_modules/lodash-es/lodash.default.js");n("./lib/app/ui/components/shared/props.jsx");var u,s,p=i.default.div(r||(u=["\n\t.cpb-checkbox {\n\t  &:first-child {\n\t    margin-top: 0 !important;\n\t  }\n\t  \n\t  label {\n\t    color: #000;\n        font-weight: normal !important;\n\t  }\n\t}\n"],s||(s=u.slice(0)),r=Object.freeze(Object.defineProperties(u,{raw:{value:Object.freeze(s)}}))));t.default=function(e){var t=e.category,n=e.panel,r=e.onChange,o=e.option,i=function(){if(o&&t&&t.fake)return l.default.get(o,"option.data.value");if(n&&t&&o){var r=l.default.find(e.layers,{panel:n.id,category:t.id,option:o.id});return l.default.get(r,"value")}};return a.a.createElement(p,{className:"cpb-checkbox-group"},o.showWhenOutOfStock&&o.inventory&&!1===o.inventory.availableForSale&&!e.isAdmin?a.a.createElement("section",{className:"out-stock-wrapper"},a.a.createElement("div",{className:"out-stock-overlay out-stock-option"},a.a.createElement("span",null,"Out of stock")),a.a.createElement(c.default,{label:l.default.get(o,"option.data.label"),value:i(),disabled:"true"})):a.a.createElement(c.default,{label:l.default.get(o,"option.data.label"),onChange:function(a){if(n&&t){var i=l.default.map(l.default.cloneDeep(t.options),(function(r){var i=l.default.find(e.layers,{panel:n.id,category:t.id,option:r.id});return r.id===o.id?l.default.set(r,"option.data.value",!!a):i&&i.option!==o.id?l.default.set(r,"option.data.value",!!i.value):l.default.set(r,"option.data.value",!1),r}));r&&r(i)()}},value:i()}))}},"./lib/app/ui/components/aside/options/color.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/@shopify/polaris/index.es.js"),p=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("./lib/app/utils/tooltip/option-tooltip.jsx"),f=n("./lib/app/constants/app.jsx"),y=n("./lib/app/ui/components/aside/controls/multi-currency/index.jsx"),m=n("./lib/app/ui/components/admin/editor/category/types.jsx");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _=p.default.div(r||(r=C(["\n    display: inline-block;\n    cursor: pointer;\n    margin: 4px;\n    height: 25px;\n    width: 25px;\n\n    &.cpb-active {\n      speak: none;\n      font-style: normal;\n      font-weight: 400;\n      font-variant: normal;\n      text-transform: none;\n      line-height: 1;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n      color: #fff;\n    }\n"]))),k=p.default.span(o||(o=C([""]))),S=p.default.span(a||(a=C(["\n    height: 25px;\n    width: 25px;\n    background: ",";\n    display: inline-block;\n    background-position: center !important;\n"])),f.APP_DEFAULT_BG),T=p.default.i(i||(i=C(["\n    display: none;\n"]))),I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(a,e);var t,n,r,o=x(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).onChange=e.onChange.bind(E(e)),e}return t=a,(n=[{key:"onChange",value:function(e){var t=this.props,n=t.active,r=t.category,o=t.panel,a=t.option,i=t.data.value;n?(r.deselectOption&&this.props.onChange(null),document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_OPTION_DEACTIVATE",{detail:{option:a,category:r,panel:o,color:i}}))):(this.props.onChange(i),document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_OPTION_ACTIVATE",{detail:{option:a,category:r,panel:o,color:i}})))}},{key:"render",value:function(){var e=this.props,t=e.currency,n=e.themeId,r=e.isAdmin,o=e.siteCurrencyConverter,a=e.locationId,i=this.props,c=i.data,u=i.active,p=i.category,f=i.optionID,b=i.option,g=i.productInventory,h=i.bundleBuilderMode,O=i.inventoryEnabled,j=b.sku,x=c.value,w=c.label||"",E=b.inventory;t=t||"USD";var P=b.showWhenOutOfStock&&b.inventory&&!1===b.inventory.availableForSale&&!this.props.isAdmin,C=new RegExp(/https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,}/gi),I=function(e){return!(!e||"string"!=typeof e)&&e.match(C)},A={backgroundColor:x||"#ffffff"},D=p.options.find((function(e){return e.id===f})).price;(I(x)||c.iconPreview&&I(c.iconPreview))&&(A={background:"url("+(c.iconPreview||x)+")"});var R=p&&p.optionTooltipTemplate&&l.a.createElement(d.default,{data:v(v({bundleBuilderMode:h,inventoryEnabled:O,productInventory:g,inventory:E},c),{},{price:D,sku:j,locationId:a,currency:"percentage"===Object(m.getCategoryLegacyType)(p)?"%":t}),template:p.optionTooltipTemplate,siteCurrencyConverter:o}),L=R?s.Tooltip:k;return P?l.a.createElement(L,{content:R},l.a.createElement(_,{className:"cpb-option cpb-option-type-color"},l.a.createElement("section",{className:"out-stock-wrapper"},l.a.createElement("div",{className:"out-stock-overlay out-stock-option"},l.a.createElement("span",{style:{fontSize:"8px",lineHeight:"7px"}},"Out of stock")),l.a.createElement(S,{className:"cpb-option-type-color-bg",style:A})),l.a.createElement(T,{className:"cpb-option-label"},w)),"aloha"===n&&!r&&l.a.createElement("div",{className:"cpb-option-info"},l.a.createElement("span",{className:"cpb-option-info-label"},w),D?l.a.createElement("span",{className:"cpb-option-info-price"},"+",l.a.createElement(y.default,{price:parseFloat(D),currency:t})):"")):l.a.createElement(L,{content:R},l.a.createElement(_,{onClick:this.onChange,className:"cpb-option cpb-option-type-color ".concat(u?"cpb-active":"")},l.a.createElement(S,{className:"cpb-option-type-color-bg",style:A}),l.a.createElement(T,{className:"cpb-option-label"},w)),"aloha"===n&&!r&&l.a.createElement("div",{className:"cpb-option-info"},l.a.createElement("span",{className:"cpb-option-info-label"},w),D?l.a.createElement("span",{className:"cpb-option-info-price"},"+",l.a.createElement(y.default,{price:parseFloat(D),currency:t})):""))}}])&&O(t.prototype,n),r&&O(t,r),a}(l.a.PureComponent);t.default=Object(u.connect)((function(e){return{currency:e.App.settings.currency,themeId:e.App.settings.theme.id,isAdmin:e.App.settings.isAdmin,siteCurrencyConverter:e.Global.siteCurrencyConverter,productInventory:e.Inventory,bundleBuilderMode:e.App.settings.bundleBuilderMode,inventoryEnabled:e.Global.inventoryEnabled}}),null,null,{pure:!0})(I)},"./lib/app/ui/components/aside/options/counter.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i=n("./node_modules/react/index.js"),c=n.n(i),l=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=n("./lib/app/utils/helpers/index.jsx"),s=n("./node_modules/lodash-es/lodash.default.js"),p=n("./lib/app/constants/global-isolated.jsx"),d=n("./lib/app/utils/string/index.jsx");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var x=l.default.div(r||(r=j(["\n      display: flex;"]))),w=l.default.button(o||(o=j(["\n      background: none;\n      border: none;\n      width: 1.5em;\n      height: 36px;\n      line-height: 36px;\n      transform: translateY(-1px);"]))),E=l.default.input(a||(a=j(["\n      text-align: center;\n      background: none;\n      border: none;\n      font-size: 30px;\n      width: 70px;\n\n      &::-webkit-outer-spin-button,\n      &::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n      }\n\n      /* Firefox */\n\n      &[type=number] {\n        -moz-appearance: textfield;\n      }\n\t"]))),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,r,o=b(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(v(t=o.call(this,e)),"state",{sValue:0}),t.onChangeDebounced=s.default.debounce(t.onChangeDebounced,500),t.getMinMaxValues=t.getMinMaxValues.bind(v(t)),t}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props.option,t=this.getValue();null===t&&(t=e.option.data.value);var n=this.formatValue(t);n!==t?this.onChange(n):this.setState({sValue:t})}},{key:"componentDidUpdate",value:function(e,t,n){var r=this.state.sValue;null!==r&&t.sValue===r&&r!==this.getValue()&&this.getValue()!==this.getValue(e)&&this.setState({sValue:this.getValue()})}},{key:"getLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.option,n=e.category,r=e.panel,o=e.layers,a=s.default.find(o,{panel:r&&r.id,category:n&&n.id,option:t&&t.id})||{};return a}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this.getLayer(e).value;return parseFloat(t)||null}},{key:"getMinMaxValues",value:function(e){var t=this.props,n=t.quantityBoxFromCategory,r=t.category,o=t.panel,a=t.minTotalQty,i=t.maxTotalQty,c=Number(e.option.data.inputMaxValue)||p.C_INPUT_MAX_VALUE,l=Number(e.option.data.inputMinValue)||0;return n&&n.enabled&&n.panel===o.id&&n.category===r.id&&n.option===e.id&&(c>i&&(c=i),l<a&&(l=a)),{minValue:l,maxValue:c}}},{key:"onChangeDebounced",value:function(e){s.default.isFunction(e)&&e()}},{key:"formatValue",value:function(e){var t=this.props.option,n=this.getMinMaxValues(t),r=n.minValue,o=n.maxValue,a=Object(u.h_inputNumberValueLimits)(e,r,o,Number.isInteger(e));return a}},{key:"onChange",value:function(e){var t=this,n=this.getOptionStep;e=parseFloat(parseFloat(e||"0").toFixed(Object(d.u_getDigits)(n)));var r=this.constructor.parseValue(e);this.setState({sValue:r},(function(){t.onChangeDebounced((function(){var e=t.props,n=e.option,o=e.onChange,a=e.category,i=e.panel,c=e.layers,l=t.formatValue(r),u=s.default.cloneDeep(a.options),p=s.default.map(u,(function(e){var t=s.default.find(c,{panel:i.id,category:a.id,option:e.id});return e.id===n.id&&s.default.set(e,"option.data.value",l),t&&t.option!==n.id&&s.default.set(e,"option.data.value",t.value),e}));o&&o(p)(),r!==l&&t.setState({sValue:l})}))}))}},{key:"getOptionStep",get:function(){var e=this.props.option;return s.default.get(e,"option.data.inputStep")||1}},{key:"render",value:function(){var e=this,t=this.state.sValue||0,n="cpb-panels-button cpb-increment"+(t?"":" cpb-disabled"),r=this.getOptionStep,o=this.props,a=o.option,i=o.category,l=a.option.data.label,u=a.showWhenOutOfStock&&a.inventory&&!1===a.inventory.availableForSale&&!this.props.isAdmin;return c.a.createElement(c.a.Fragment,null,u?c.a.createElement(x,{className:"cpb-input-group cpb-input-group-quantity"},c.a.createElement("section",{className:"out-stock-wrapper"},c.a.createElement("div",{className:"out-stock-overlay out-stock-option"},c.a.createElement("span",null,"Out of stock")),c.a.createElement("div",null,c.a.createElement(w,{className:n},"-"),c.a.createElement(E,{value:t,step:r,ref:"count",min:0,type:"number",onChange:function(t){return e.onChange(t.target.value)}}),c.a.createElement(w,{className:"cpb-panels-button cpb-increment"},"+")))):c.a.createElement("div",{className:"cpb-counter"},c.a.createElement(x,{className:"cpb-input-group cpb-input-group-quantity"},c.a.createElement(w,{className:n,onClick:function(){return e.onChange(t-r)}},"-"),c.a.createElement(E,{value:t,step:r,ref:"count",min:0,type:"number",onChange:function(t){return e.onChange(t.target.value)}}),c.a.createElement(w,{className:"cpb-panels-button cpb-increment",onClick:function(){return e.onChange(t+r)}},"+")),i.options.length>1&&c.a.createElement("div",{className:"cpb-counter__label"},l)))}}])&&y(t.prototype,n),r&&y(t,r),a}(c.a.PureComponent);O(P,"displayName","OptionsCounter"),O(P,"parseValue",(function(e){return isNaN(Number(e))||e<0?0:Number(e)})),t.default=P},"./lib/app/ui/components/aside/options/date.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"FORMAT_DATE",(function(){return O})),n.d(t,"FORMAT_TIME",(function(){return j})),n.d(t,"FORMAT_DATE_TIME",(function(){return x}));var r,o,a=n("./node_modules/react/index.js"),i=n.n(a),c=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),l=n("./node_modules/moment/moment.js"),u=n.n(l),s=n("./lib/app/ui/components/common/forms/v3/input-date-time.jsx"),p=n("./node_modules/lodash-es/lodash.default.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var O="MM/DD/YYYY",j="h:mm a",x="".concat(O," ").concat(j),w=c.default.div(r||(r=h(["\n    .rdtPicker {\n      width: 100% !important;\n      border: 1px solid rgba(0, 0, 0, 0.05) !important;\n      margin: 10px 0 !important;\n\n      td.rdtActive,\n      td.rdtActive:hover {\n        background-color: #337ab7 !important;\n      }\n    }\n"]))),E=c.default.label(o||(o=h(["\n    margin-top: 10px;\n"]))),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,n,r,o=m(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).onChange=e.onChange.bind(g(e)),e}return t=a,(n=[{key:"onChange",value:function(e){var t=this.props.onChange,n=e;this.setState({value:n}),t(n)}},{key:"render",value:function(){var e,t,n=this.props,r=n.data,o=n.layers,a=n.panel,c=n.category,l=n.timeFormat,d=n.dateFormat,f="";if(d&&(f=O),l&&(f=j),l&&d&&(f=x),a&&c){var y=o.find((function(e){return e&&c&&e.panel===a.id&&e.category===c.id}));e=(t=y&&y.value)&&u()(t).format(f)||r.label}var m=p.default.get(e,"toUpperCase")?e.toUpperCase():r.label||"";return i.a.createElement(w,{className:"cpb-option cpb-option-type-dateTime"},m&&i.a.createElement(E,null,m),i.a.createElement(s.default,{value:t,inline:!0,timeFormat:l,dateFormat:d,onChange:this.onChange}))}}])&&f(t.prototype,n),r&&f(t,r),a}(a.Component);t.default=P},"./lib/app/ui/components/aside/options/file-upload/components/file-upload.c.controls.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a=n("./lib/app/ui/components/common/icon-button.jsx"),i=n("./node_modules/react/index.js"),c=n.n(i),l=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=n("./lib/app/utils/async/index.jsx"),s=n("./lib/app/utils/get-query-params.jsx");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m=l.default.div(r||(r=y(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 30px;\n  width: 42px;\n  background: linear-gradient(to bottom, #ffffff, #f9fafb);\n  border: 1px solid #c4cdd5;\n  box-shadow: 0 1px 0 0 rgba(22, 29, 37, 0.05);\n  border-radius: 3px;\n\n  & span {\n    margin-right: 0 !important;\n    font-size: 12px;\n  }\n\n  width: auto;\n  padding-left: 10px;\n  padding-right: 10px;\n  margin-top: 0px;\n  z-index: 2;\n  cursor: pointer;\n"]))),b=l.default.input(o||(o=y(["\n  margin-left: 5px !important;\n"])));t.default=function(e){var t=e.setState,n=e.onRemoveImage,r=e.onBgRemove,o=e.onCorrectImageSize,l=e.state,p=e.showDeleteButton,f=void 0===p||p,y=e.removebgApiKey,g=e.hideButtons,v=void 0===g?[]:g,h=l.type&&l.type.split("/")[0]||null,O=Object(i.useRef)(null),j=function(e){var n=l.image;t(d(d({},l),{},{loading:!0})),e.target.checked?"https://api.thecustomproductbuilder.com/".includes("http://localhost")||"https://api.thecustomproductbuilder.com/".includes("ngrok")?r&&r("https://storage.googleapis.com/custom-product-builder-stage/57312936089/mao-stage-store-6862657945753-3P9gckdUbUTwznqX6F_rES_--no-bg.png",n,!0):Object(u.removeBgImage)()(l.image).always((function(e){200===e.status?r&&r(e.responseText,n,!0):(t(d(d({},l),{},{removeBgError:!0})),setTimeout((function(){r&&r(n,n,!1)}),1e3))})):r&&r(l.oldImageLink,n,!1)};Object(i.useEffect)((function(){var t=e.state;if(t&&(!t||t.option)){var n=Object(s.getQueryParams)(document.location.href).configid||Object(s.getConfigIdFromHash)(),r=t.option.beforeRemoveBg,o=t.category.removeBgSettings&&t.category.removeBgSettings.autoRemoveBg,a=O&&O.current&&O.current.checked,i=!n||e.wasUploaded&&!1===a;!r&&o&&i&&setTimeout((function(){x(!0)}),500)}}),[]);var x=function(e){e.target?(e.stopPropagation(),e.preventDefault(),e.target!==O.current&&O.current.click()):O.current.click()};return c.a.createElement("div",{className:"cpb-upload-buttons-wrapper"},c.a.createElement("div",{className:"cpb-upload-buttons"},f&&c.a.createElement(a.default,{icon:"lnr lnr-trash",primary:!1,onClick:function(){return n&&n()},tooltip:"Delete Preview",position:"left"}),c.a.createElement(a.default,{icon:"lnr lnr-magnifier-plus",primary:!1,onClick:function(e){return o(e)},data:{scale:"+"},tooltip:"Zoom in image",position:"left"}),c.a.createElement(a.default,{icon:"lnr lnr-magnifier-minus",primary:!1,onClick:function(e){return o(e)},data:{scale:"-"},tooltip:"Zoom out image",position:"left"}),c.a.createElement(a.default,{icon:"lnr lnr-chevron-height",primary:!1,onClick:function(e){return o(e)},data:{alignment:"contain"},tooltip:"Align for area cover",position:"left"}),c.a.createElement(a.default,{icon:"lnr lnr-undo",primary:!1,onClick:function(e){return o(e)},data:{rotate:"left"},tooltip:"Rotate Left",position:"left"}),c.a.createElement(a.default,{icon:"lnr lnr-redo",primary:!1,onClick:function(e){return o(e)},data:{rotate:"right"},tooltip:"Rotate Right",position:"left"})),c.a.createElement("div",{className:"cpb-upload-buttons cpb-upload-buttons-moving"},!v.includes("offset")&&c.a.createElement(c.a.Fragment,null,c.a.createElement(a.default,{icon:"lnr lnr-chevron-left",primary:!1,onClick:function(e){return o(e)},data:{offset:"left"},tooltip:"Move left",position:"left"}),c.a.createElement(a.default,{icon:"lnr lnr-chevron-right",primary:!1,onClick:function(e){return o(e)},data:{offset:"right"},tooltip:"Move right",position:"left"}),c.a.createElement(a.default,{icon:"lnr lnr-chevron-up",primary:!1,onClick:function(e){return o(e)},data:{offset:"up"},tooltip:"Move Up",position:"left"}),c.a.createElement(a.default,{icon:"lnr lnr-chevron-down",primary:!1,onClick:function(e){return o(e)},data:{offset:"down"},tooltip:"Move down",position:"left"})),c.a.createElement(a.default,{icon:"lnr lnr-sync",primary:!1,onClick:function(e){return o(e)},data:{flip:!0},tooltip:"Flip Image",position:"left"}),c.a.createElement(a.default,{primary:!1,hasUploadField:!0,tooltip:"Offset value (PX)",position:"left",datasetAction:"offset-value"},c.a.createElement("input",{type:"number",value:l.offsetValue,min:1,max:999,onChange:function(e){return t(d(d({},l),{},{offsetValue:Number(e.target.value)||1}))}}))),y&&"image"===h&&c.a.createElement(m,{onClick:function(e){return x(e)},"data-action":"remove-bg"},e.state.loading?c.a.createElement("div",null,"loading..."):e.state.removeBgError?c.a.createElement("div",null,"Error: image processing is not possible"):c.a.createElement(c.a.Fragment,null,c.a.createElement("span",null,"Remove Background"),e.state.checked?c.a.createElement(b,{ref:O,type:"checkbox",checked:!0,onChange:function(e){return j(e)}}):c.a.createElement(b,{ref:O,type:"checkbox",onChange:function(e){return j(e)}}))))}},"./lib/app/ui/components/aside/options/file-upload/components/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./lib/app/ui/components/aside/options/file-upload/components/file-upload.c.controls.jsx");n.d(t,"FileUploadControls",(function(){return r.default}))},"./lib/app/ui/components/aside/options/file-upload/hooks/index.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"fileUploadUseEffect",(function(){return l})),n.d(t,"testUploadImageOnMountUseEffect",(function(){return u}));var r=n("./node_modules/react/index.js"),o=(n("./lib/app/constants/general.jsx"),n("./node_modules/lodash-es/lodash.default.js")),a=n("./lib/app/utils/custom-react-hooks/index.jsx"),i=n("./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onTestUploadImageOnMount.jsx"),c=function(e){var t=e.panel,n=e.category,r=e.option,a=e.layers;return t&&n&&r&&o.default.find(a,{panel:t.id,category:n.id,option:r.id})};function l(){var e=this;if(this){var t=this.onUploadImage,n=Object(a.usePrevious)(this.layers);Object(r.useEffect)((function(){var n=e.prevState,r=e.panel,o=e.category,a=e.option,i=e.layers,l=e.state;c({panel:r,category:o,option:a,layers:i})||n.image||!l.image||t(null,{name:null,type:null})}),[]),Object(r.useEffect)((function(){var r=e.state,a=e.panel,i=e.category,l=e.layers,u=e.prevState,s=r.option,p=c({panel:a,category:i,option:s,layers:l});if(!o.default.isEqual(l,n)){if(p&&!r.image&&!u.image){var d=p.value||"",f=d.replace(/^.*[\\\/]/,""),y=f.split(".").pop()||"jpg",m=y?f.replace(y+".",""):f;m&&t&&t(d,{name:m,type:"image/".concat(y)})}!p&&r.image&&u.image&&t(null,{name:null,type:null})}}))}}function u(){var e=this;Object(r.useEffect)((function(){i.onTestUploadImageOnMount.bind(e)()}),[])}},"./lib/app/ui/components/aside/options/file-upload/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./lib/app/ui/components/common/forms/image-upload.jsx"),i=n("./lib/app/ui/components/aside/options/file-upload/components/index.jsx"),c=n("./lib/app/ui/components/aside/options/file-upload/methods/index.jsx"),l=n("./lib/app/ui/components/aside/options/file-upload/hooks/index.jsx"),u=n("./lib/app/constants/c_file-upload.jsx"),s=n("./lib/app/utils/custom-react-hooks/index.jsx"),p=n("./lib/app/utils/image-storage/getOptionPath.jsx"),d=n("./node_modules/lodash-es/lodash.default.js");n("./lib/app/store/index.jsx");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=e.category,n=e.optionID,f=e.data,m=e.customLayers,g=e.panel,v=e.layers,h=e.removebgApiKey,O=e.hideControls,j=void 0!==O&&O,x=e.shopId,w=t.options.find((function(e){return e.id===n})),E=(v.find((function(e){return e.option===w.id})),d.default.filter(m,(function(e){var r=e.image.source;return e.image.enabled&&g&&g.id===r.panel&&t&&t.id===r.category&&n===r.option}))),P=t.options.find((function(e){return e.id===n})),C=b(Object(r.useState)({option:P,preview:P.preview.data,image:P.fileUploadValue,beforeRemoveBgImage:P.beforeRemoveBg,beforeRemoveBgImageLink:null,oldImageLink:null,type:P.fileTypeValue,name:P.fileNameValue,offsetValue:10,category:t,wasUploaded:!1}),2),_=C[0],k=C[1],S=Object(s.usePrevious)(_);Object(r.useEffect)((function(){P.beforeRemoveBg?k(y(y({},_),{},{beforeRemoveBgImageLink:P.beforeRemoveBg,oldImageLink:P.beforeRemoveBg})):k(y(y({},_),{},{beforeRemoveBgImageLink:null,oldImageLink:null})),P.fileUploadValue&&P.beforeRemoveBg&&_.beforeRemoveBgImageLink?k(y(y({},_),{},{checked:!0})):!P.fileUploadValue||P.beforeRemoveBg||_.beforeRemoveBgImageLink?P.fileUploadValue||P.beforeRemoveBg||_.beforeRemoveBgImageLink||k(y(y({},_),{},{checked:!1,image:null})):k(y(y({},_),{},{checked:!1,image:P.fileUploadValue}))}),[t,n,f,m,g,v]);var T=y(y({},e),{},{setState:k,state:y(y({},_),{},{optionPath:Object(p.default)({layer:E,layers:v,activeLayer:null})}),prevState:S,getOption:P});T.onUploadImage=c.onUploadImage.bind(T);var I=_.type,A=_.name,D=_.image,R=_.beforeRemoveBgImage,L=f.label;return l.fileUploadUseEffect.bind(T)(),P.showWhenOutOfStock&&P.inventory&&!1===P.inventory.availableForSale&&!e.isAdmin?o.a.createElement("section",{className:"out-stock-wrapper"},o.a.createElement("div",{className:"out-stock-overlay out-stock-option"},o.a.createElement("span",null,"Out of stock")),o.a.createElement("div",{className:"cpb-option-dropzone"},o.a.createElement("label",{htmlFor:"title"},L),o.a.createElement(a.default,{maxSize:u.C_FILE_UPLOAD_SIZE,src:D,beforeRemoveBgSrc:P.beforeRemoveBg||R,beforeRemoveBgImageLink:_.oldImageLink,types:t.fileFormats,disableClick:j,shopId:x,panelID:g.id,categoryID:t.id,optionID:n},"File: ",A,o.a.createElement("br",null),"Type: ",I||A&&u.C_FILE_ALL_FORMATS_VALUES.find((function(e){return A.includes(e)})),o.a.createElement("br",null)))):o.a.createElement("div",{className:"cpb-option-dropzone"},o.a.createElement("label",{htmlFor:"title"},L),o.a.createElement(a.default,{maxSize:u.C_FILE_UPLOAD_SIZE,src:D,beforeRemoveBgSrc:P.beforeRemoveBg||R,beforeRemoveBgImageLink:_.oldImageLink,onChange:function(e,t){c.onUploadImage&&c.onUploadImage.bind(T)(e,t),k(y(y({},_),{},{wasUploaded:!0}))},types:t.fileFormats,disableClick:j,shopId:x,panelID:g&&g.id,categoryID:t.id,optionID:n},"File: ",A,o.a.createElement("br",null),"Type: ",I||A&&u.C_FILE_ALL_FORMATS_VALUES.find((function(e){return A.includes(e)})),o.a.createElement("br",null),!j&&o.a.createElement(i.FileUploadControls,{setState:k,state:_,themeId:e.themeId,onRemoveImage:function(){c.onUploadImage&&c.onUploadImage.bind(T)(null,{}),c.onRemoveImage.bind(T)},onCorrectImageSize:c.onCorrectImageSize.bind(T),showDeleteButton:!0,onBgRemove:c.onBgRemove.bind(T),removebgApiKey:h,wasUploaded:_.wasUploaded})))}},"./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onBgRemove.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var r=n("./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onUploadImage.jsx"),o=n("./lib/app/utils/image-storage/mockup.jsx"),a=n("./lib/app/utils/async/index.jsx");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)}))}}function p(e,t,n){return d.apply(this,arguments)}function d(){return(d=s(regeneratorRuntime.mark((function e(t,n,i){var l,u,s,p,d,f,y,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this;case 4:if(l=e.sent,l.getState,u=l.setState,l.onChange,s=l.state,p=l.category,d=this,!i){e.next=31;break}if(!p.removeBgSettings||!p.removeBgSettings.addMockup){e.next=23;break}return e.next=15,Object(o.default)(t,null,null,this.category);case 15:if(y=e.sent,m={name:"mockuped.png",mimetype:"image/png",buffer:y.split(",")[1]},e.t0=m,!e.t0){e.next=22;break}return e.next=21,Object(a.uploadImage)().bind(d)(m);case 21:e.t0=e.sent;case 22:f=e.t0;case 23:return e.next=25,r.default.bind(this)(t,{type:s.type||"image",name:s.name||"file-name"},n,f);case 25:return e.next=27,u(c(c({},s),{},{image:null}));case 27:return e.next=29,u(c(c({},s),{},{checked:i,oldImageLink:n,image:t}));case 29:e.next=33;break;case 31:return e.next=33,r.default.bind(this)(t,{type:s.type||"image",name:s.name||"file-name"},null,null);case 33:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},"./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onCorrectImageSize.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/lodash-es/lodash.default.js"),o=n("./lib/app/utils/image-storage/index.jsx"),a=n("./lib/app/ui/components/preview/render-konva/utils/point.jsx"),i=n("./lib/app/utils/helpers/index.jsx"),c=n("./lib/app/ui/components/aside/options/file-upload/utils/file-upload.u.controlHandler.jsx");t.default=function(e,t){if(this){var n=this.state,l=this.customLayers,u=e.currentTarget,s=n.customLayer,p=n.optionPath,d=n.image,f=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=s||r.default.find(l,{id:o.customLayerId}),d=r.default.get(p,"image.positioning");Object(c.default)(u,{onScale:function(r){var o=e?e.getScale():d.scale,a=n.offsetValue/100,i=o+("+"===r?a:-a);e&&e.setScale(i<0?0:i),t&&t({type:"scale",data:i<0?0:i,image:e})},onAlignment:function(n){e&&e.setCoverage(n),e&&e.setRotate(0),t&&t({type:"alignment",data:n,image:e})},onOffset:function(r){var o=Object(i.h_getCanvasSize)(),c="path"===p.type,l=n.offsetValue,u=e?c?Object(a.pointToCanvas)(e.getOffset(),o):e.getOffset():{x:d.x,y:d.y},s=u.x,f=u.y;switch(r){case"left":s-=l;break;case"right":s+=l;break;case"up":f-=l;break;case"down":f+=l}t&&t({type:"offset",data:{x:s,y:f},image:e}),c?e&&e.setOffset(Object(a.pointToPercent)({x:s,y:f},o)):e&&e.setOffset({x:s,y:f})},onRotate:function(r){var o=e?e.getRotate():d.rotate,a=n.offsetValue||1;switch(r){case"left":o-=a;break;case"right":o+=a}e&&e.setRotate(o),t&&t({type:"rotate",data:o,image:e})},onFlip:function(){var n=e?e.getFlip():r.default.get(p,"image.flip");e&&e.setFlip(!n),t&&t({type:"flip",data:!n,image:e})}})};r.default.isArray(p)?p.map((function(e){var t=e.path,n=e.customLayerId;o.default.getImage(d,t).then((function(e){return f(e,{customLayerId:n})})).catch((function(){return f(null)}))})):o.default.getImage(d,p).then(f).catch((function(){return f(null,!0)}))}}},"./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onRemoveImage.jsx":function(e,t,n){"use strict";n.r(t),t.default=function(){if(this){var e=this.getOption;delete e.fileUploadValue,delete e.beforeRemoveBg,delete e.fileNameValue,delete e.fileTypeValue,delete e.imageWithMockup}}},"./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onTestUploadImageOnMount.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"onTestUploadImageOnMount",(function(){return a}));var r=n("./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onUploadImage.jsx"),o=n("./lib/app/utils/image-storage/index.jsx");function a(){var e="https://stage-cdn.thecustomproductbuilder.com/8804663373/cpb-v2-stage-march-6585048334413-_cnPLPYIFOTjCDhPlqMlYx4m.jpg",t={type:"image/png",name:"test-image-1.png"};r.default.bind(this)(e,t),setTimeout((function(){o.default.getImage(e,"sC_vhfABuBAwCLI75Bzvo6dp").then((function(e){e.setCoverage("cover"),e.setScale(1),e.setOffset({x:0,y:0}),e.setRotate(0)}))}),1300)}},"./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onUploadImage.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./lib/app/utils/image-storage/index.jsx"),o=n("./node_modules/lodash-es/lodash.default.js"),a=n("./lib/app/constants/c_file-upload.jsx");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e,t,n,i){if(this){e=e||null;var l=this.getOption,u=this.setState,s=this.onChange,p=this.state,d=this.category,f=this.panel,y=this.layers,m=t.name,b=t.type;!b&&m&&a.C_FILE_ALL_FORMATS_VALUES.find((function(e){return m.includes(e)}))&&(b=a.C_FILE_ALL_FORMATS_VALUES.find((function(e){return m.includes(e)}))),/\./.test(b)&&(b="application/".concat(b.replace(/\./g,""))),l.fileUploadValue=e,l.beforeRemoveBg=n||null,l.fileNameValue=m||null,l.fileTypeValue=b||null,l.imageWithMockup=i||null;var g=[],v=d&&o.default.map(o.default.cloneDeep(d.options),(function(t){var r=f&&d&&o.default.find(y,{panel:f.id,category:d.id,option:t.id}),a=o.default.get(r,"fileUploadData")||{};if(l.id===t.id)o.default.set(t,"option.data.value",e),n?o.default.set(t,"option.data.beforeRemoveBg",n):o.default.set(t,"option.data.beforeRemoveBg",null),i?o.default.set(t,"option.data.imageWithMockup",i):o.default.set(t,"option.data.imageWithMockup",null),g.push({name:m,type:b});else{var c=o.default.get(r,"value")||null;o.default.set(t,"option.data.value",c),n?o.default.set(t,"option.data.beforeRemoveBg",n):o.default.set(t,"option.data.beforeRemoveBg",null),i?o.default.set(t,"option.data.imageWithMockup",i):o.default.set(t,"option.data.imageWithMockup",null),g.push({name:a.name,type:a.type})}return t}));u(c(c({},p),{},{name:m,type:b,image:e,checked:!1}));var h=v&&s&&s(v);h&&h(null,g),e&&r.default.getImage(e).then((function(e){e.setScale(1),e.setCoverage("cover"),e.setOffset({x:0,y:0}),e.setRotate(0)}))}}},"./lib/app/ui/components/aside/options/file-upload/methods/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onCorrectImageSize.jsx");n.d(t,"onCorrectImageSize",(function(){return r.default}));var o=n("./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onRemoveImage.jsx");n.d(t,"onRemoveImage",(function(){return o.default}));var a=n("./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onUploadImage.jsx");n.d(t,"onUploadImage",(function(){return a.default}));var i=n("./lib/app/ui/components/aside/options/file-upload/methods/file-upload.m.onBgRemove.jsx");n.d(t,"onBgRemove",(function(){return i.default}))},"./lib/app/ui/components/aside/options/file-upload/utils/file-upload.u.controlHandler.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"fileUploadUControlHandler",(function(){return i}));var r=n("./node_modules/lodash-es/lodash.default.js"),o=n("./lib/app/utils/merge.jsx"),a={onScale:function(){return null},onAlignment:function(){return null},onOffset:function(){return null},onFlip:function(){return null}},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){t=Object(o.mergeExceptArrays)(a,t);var n=e.querySelectorAll("[data-alignment], [data-scale], [data-offset], [data-rotate], [data-flip]");Object.keys(n||{}).forEach((function(e){var o=n[e].dataset.scale,a=n[e].dataset.alignment,i=n[e].dataset.offset,c=n[e].dataset.rotate,l=n[e].dataset.flip;o&&t.onScale(o),a&&t.onAlignment(a),i&&t.onOffset(i),c&&t.onRotate(c),r.default.isUndefined(l)||t.onFlip(l),document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_FILE_UPLOAD_POSITION_UPDATE",{detail:{}}))}))}};t.default=i},"./lib/app/ui/components/aside/options/font-select-option/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=(n("./node_modules/react-dom/server.browser.js"),n("./node_modules/react-redux/es/index.js")),i=(n("./lib/app/utils/string/index.jsx"),n("./lib/app/ui/components/aside/options/select-option/hooks/index.jsx")),c=n("./lib/app/ui/components/aside/options/select-option/methods/index.jsx"),l=n("./lib/app/ui/components/aside/options/select-option/index.jsx"),u=n("./node_modules/lodash-es/lodash.default.js");t.default=Object(a.connect)((function(e){return{layers:e.Product.layers,settingsFonts:e.App.settings.fonts}}))((function(e){var t=Object(i.useSelect)(),n=t.state,a=e.selectOptions,s=e.category,p=e.optionID,d=e.settingsFonts;function f(){return c.default.bind({props:e,useSelect:t}).apply(void 0,arguments)}return Object(r.useEffect)((function(){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=t.settingsFonts,r={panel:u.default.get(t,"panel.id"),category:u.default.get(t,"category.id")},o=u.default.find(t.layers,r)||{};if(!u.default.find(n.available,(function(e){return e===o.value})))return;return o.value}(),r=function(){if(s.fake){var t=u.default.get(e.data,"label");return!!u.default.find(d.available,(function(e){return e===t}))&&t}var n=u.default.find(u.default.get(s,"options"),{id:p});if(!n)return;var r=u.default.get(n,"option.data.defaultSelectValue");return!!u.default.find(d.available,(function(e){return e===r}))&&r}();!r||t||n.value||f({label:r,value:r}),t&&!n.value&&f({label:t,value:t})}),[]),o.a.createElement(l.default,{isSearchable:s.isSearchable,selectHandleChange:f,selectOptions:a,selectValue:n})}))},"./lib/app/ui/components/aside/options/index.jsx":function(e,t,n){"use strict";n.r(t),function(e){var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./lib/app/ui/components/aside/options/color.jsx"),i=n("./lib/app/ui/components/aside/options/counter.jsx"),c=n("./lib/app/ui/components/aside/options/options-img/index.jsx"),l=n("./lib/app/ui/components/aside/options/select.jsx"),u=n("./lib/app/ui/components/aside/options/autocomplete.jsx"),s=n("./lib/app/ui/components/aside/options/text.jsx"),p=n("./lib/app/ui/components/aside/options/multiple.jsx"),d=n("./lib/app/ui/components/aside/options/date.jsx"),f=n("./lib/app/ui/components/aside/options/file-upload/index.jsx"),y=n("./lib/app/ui/components/aside/options/input-multiple.jsx"),m=n("./node_modules/react-redux/es/index.js"),b=n("./lib/app/utils/logic-engine.jsx"),g=n("./lib/app/utils/store/getters.jsx"),v=n("./node_modules/lodash-es/lodash.default.js"),h=n("./lib/app/ui/components/aside/options/checkbox.jsx"),O=n("./lib/app/ui/components/aside/options/font-select-option/index.jsx"),j=n("./lib/app/ui/components/admin/editor/category/types.jsx"),x=n("./lib/app/ui/components/aside/options/autocomplete-number-option/index.jsx"),w=n("./lib/app/constants/category-type-display.jsx");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(C,t);var n,r,m,E=S(C);function C(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,C),(e=E.call(this)).state={fontsList:[]},e.getComponent=e.getComponent.bind(I(e)),e.optionToBeDisplayed=e.optionToBeDisplayed.bind(I(e)),e.isOptionActive=e.isOptionActive.bind(I(e)),e}return n=C,(r=[{key:"updateFontsList",value:function(){var e=this.props.settings;this.setState({fontsList:P(e.fonts.available.map((function(e){return{label:e,value:e}})))})}},{key:"componentDidUpdate",value:function(e,t,n){var r=this.props,o=r.settings,a=r.category,i=e.settings.fonts.available,c=o.fonts.available;[w.C_TD.fontFamily].includes(Object(j.getCategoryLegacyType)(a))&&v.default.isArray(i)&&v.default.isArray(c)&&(v.default.isEqual(i.sort(),c.sort())||this.updateFontsList())}},{key:"componentWillMount",value:function(){var t=this;e(document.body).on("PRODUCT_BUILDER_LAYER_UPDATE",(function(){t._mounted&&t.forceUpdate()}))}},{key:"componentDidMount",value:function(){var e=this.props.category;this._mounted=!0,[w.C_TD.fontFamily].includes(Object(j.getCategoryLegacyType)(e))&&this.updateFontsList()}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"optionToBeDisplayed",value:function(e,t,n,r){var o=this.props.panels;return!!r.fake||Object(b.default)(e,t,n,null,o)}},{key:"getComponent",value:function(e){var t=e.data,n=e.optionID,r=e.panel,m=e.category,b=e.active,v=this.props,E=v.action,P=v.layers,C=v.customLayers,_=v.optionListModal,k=v.removebgApiKey,S=v.themeId,T=v.settings,I=v.shopId,A=v.locationId,D=T.isAdmin,R=Object(j.getCategoryLegacyType)(m),L=Object(g.g_productEntity)("option",n,{categories:[m]});switch(R){case w.C_TD.color:return o.a.createElement(a.default,{option:L,data:t,category:m,optionID:n,onChange:E,layers:P,panel:r,active:b,isAdmin:D,locationId:A});case w.C_TD.counter:return o.a.createElement(i.default,{option:L,data:t,category:m,onChange:E,layers:P,panel:r,isAdmin:D,quantityBoxFromCategory:T.quantityBoxFromCategory,minTotalQty:T.minTotalQty,maxTotalQty:T.maxTotalQty,locationId:A});case w.C_TD.img:case w.C_TD.percentage:return o.a.createElement(c.default,{option:L,category:m,panel:r,action:E,locationId:A});case w.C_TD.inputMulti:case w.C_TD.wholesaleOrder:case w.C_TD.engravingForWholesale:case w.C_TD.fontSize:case w.C_TD.input:case w.C_TD.additionalPriceField:case w.C_TD.inputLong:return o.a.createElement(y.default,{option:L,data:t,category:m,locationId:A,active:b,onChange:E,panel:r,layers:P,isAdmin:D});case w.C_TD.text:return o.a.createElement(s.default,{option:L,data:t,optionID:n,category:m,onChange:E,active:b,isAdmin:D,locationId:A});case w.C_TD.multiple:return o.a.createElement(p.default,{locationId:A,option:L,data:t,category:m,active:b,onChange:E,isAdmin:D});case w.C_TD.select:return o.a.createElement(l.default,{locationId:A,option:L,data:t,category:m,onChange:E,layers:P,panel:r,isAdmin:D});case w.C_TD.autocomplete:return o.a.createElement(u.default,{locationId:A,data:t,category:m,onChange:E,layers:P,panel:r,isAdmin:D});case w.C_TD.autocompleteNumber:return o.a.createElement(x.default,{settings:T,data:t,category:m,onChange:E,layers:P,panel:r,isAdmin:D,locationId:A});case w.C_TD.dateTime:return o.a.createElement(d.default,{locationId:A,dateFormat:!0,timeFormat:!0,data:t,category:m,onChange:E,layers:P,panel:r,option:L,isAdmin:D});case w.C_TD.date:return o.a.createElement(d.default,{locationId:A,dateFormat:!0,timeFormat:!1,data:t,category:m,onChange:E,layers:P,panel:r,isAdmin:D});case w.C_TD.time:return o.a.createElement(d.default,{locationId:A,dateFormat:!1,timeFormat:!0,data:t,category:m,onChange:E,layers:P,panel:r,option:L,isAdmin:D});case w.C_TD.fileUpload:return o.a.createElement(f.default,{isAdmin:D,shopId:I,themeId:S,removebgApiKey:k,data:t,panel:r,category:m,layers:P,customLayers:C,active:b,optionID:n,hideControls:_,onChange:E,locationId:A});case w.C_TD.qtyBreakdown:return o.a.createElement(c.default,{locationId:A,option:L,category:m,panel:r,action:E});case w.C_TD.checkbox:return o.a.createElement(h.default,{locationId:A,data:t,layers:P,option:L,category:m,panel:r,isAdmin:D,action:E});case w.C_TD.fontFamily:return o.a.createElement(O.default,{selectOptions:this.state.fontsList,action:E,data:t,category:m,layers:P,panel:r,optionID:n,isSearchable:!0,option:L,isAdmin:D,locationId:A});case w.C_TD.calculateFields:case w.C_TD.printablearea:return;default:console.error("Option Type "+R+" Not Supported")}}},{key:"isOptionActive",value:function(){var e=this.props,t=e.panel,n=e.category,r=e.option,o=e.layers;return!!(t&&n&&r&&o)&&!!o.find((function(e){return e&&n&&e.panel===t.id&&e.category===n.id&&e.option===r.id}))}},{key:"render",value:function(){var e=this.props,t=e.option,n=e.layers,r=e.category,a=e.customClass,i=e.customLayers,c=e.panel,l=e.settings,u=t.option.data,s=Object(j.getCategoryLegacyType)(r),p=a+" "+(this.isOptionActive()?"active":""),d={type:s,data:u,category:r,panel:c,optionID:t.id,active:this.isOptionActive()},f=o.a.createElement("span",{className:p},this.getComponent(d));return!l.isAdmin&&t.logic&&t.logic.rules&&t.logic.rules.length>0?this.optionToBeDisplayed(t.logic,n,i,r)?f:null:f}}])&&_(n.prototype,r),m&&_(n,m),C}(o.a.PureComponent);t.default=Object(m.connect)((function(e){return{layers:e.Product.layers,panels:e.Product.panels,defaultOptions:e.App.settings.defaultOptions,customLayers:e.Product.customLayers,settings:e.App.settings,customFonts:e.Global.fonts,removebgApiKey:e.Global.removebgApiKey,themeId:e.App.settings.theme.id,shopId:e.Routing.shopId,locationId:e.Routing.locationId}}),null,null,{pure:!1})(D)}.call(this,n("./node_modules/jquery/dist/jquery.min.js"))},"./lib/app/ui/components/aside/options/input-multiple.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i=n("./node_modules/react/index.js"),c=n.n(i),l=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=n("./node_modules/react-redux/es/index.js"),s=n("./lib/app/utils/logic-engine.jsx"),p=n("./node_modules/lodash/get.js"),d=n.n(p),f=n("./lib/app/utils/helpers/index.jsx"),y=n("./node_modules/redux/es/redux.js"),m=n("./node_modules/lodash-es/lodash.default.js"),b=n("./node_modules/lodash-es/debounce.js"),g=n("./lib/app/utils/string/index.jsx"),v=n("./lib/app/utils/store/getters.jsx"),h=n("./lib/app/constants/global-isolated.jsx"),O=n("./lib/app/ui/components/admin/editor/category/types.jsx"),j=n("./lib/app/store/slices/Product/index.jsx");function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var D=l.default.div(r||(r=A(["\n    text-align: left ;\n    \n    &.cpb-option-type-input__wrapper-insert-characters {\n    \tposition:relative;\n    \t\n    \ttextarea {\n            flex: 1 0 auto;\n\t\t    width: 100%;\n\t\t    box-sizing: border-box !important;\n\t\t    padding-right: 40px;\n    \t}\n    \t.cpb-option-insert-character {\n    \t    align-items: flex-start !important;\n    \t}\n    }\n"]))),R=l.default.input(o||(o=A(["\n    padding: 6px 10px;\n    background: #fff ;\n    width: 50%;\n    color: #444 ;\n    outline: none;\n    border: 1px solid #ccc;\n    display: block;\n"]))),L=l.default.textarea(a||(a=A(["\n    padding: 6px 10px;\n    background: #fff;\n    width: 50%;\n    color: #444;\n    outline: none;\n    border: 1px solid #ccc;\n    resize: none;\n"]))),N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,n,r,o=_(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),I(S(e=o.call(this)),"isRepeatedOption",(function(t){var n=e.props,r=(n.layers,n.category),o=(n.panel,n.categoryHelpers);if("engravingForWholesale"===Object(O.getCategoryLegacyType)(r)&&r.categoryDynamic){var a=r.options.map((function(e,n){if(e.id===t.id)return n})).find((function(e){return+e||0===e}));return m.default.get(o,"engravingForWholesale.repeatOptionsIndex").find((function(e){return e===a}))}})),e.state={value:[]},e.inputRefs=[],e.optionToBeDisplayed=e.optionToBeDisplayed.bind(S(e)),e.onChangeDebounced=Object(b.default)(e.onChangeDebounced,500),e.onOptionRepeat=e.onOptionRepeat.bind(S(e)),e.filteredOptions=e.filteredOptions.bind(S(e)),e.updateOption=e.updateOption.bind(S(e)),e.currentValue=e.currentValue.bind(S(e)),e.restoreValue=e.restoreValue.bind(S(e)),e.insertCharacter=e.insertCharacter.bind(S(e)),e}return t=a,(n=[{key:"restoreValue",value:function(){var e=this.props,t=e.data,n=e.layers,r=t.options,o=[],a=n.map((function(e){return e&&e.option}));r&&r.length&&r.forEach((function(e){var r=n.find((function(n){return n&&t&&n.category===t.id&&n.option===e.id}));r&&-1!==a.indexOf(e.id)&&o.push(Object.assign({},e,{option:Object.assign({},e.option,{data:Object.assign({},e.option.data,{value:r.value})})}))})),this.setState({value:o})}},{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.data,r=(t.layers,n.options);this._cpbLoaded=!0,this.layers=m.default.clone(this.props.layers);var o=this;this.restoreValue(),document.body.addEventListener("PRODUCT_BUILDER_LAYER_UPDATE",(function(){o._mounted&&o.forceUpdate()})),document.body.addEventListener("PRODUCT_BUILDER_UPDATE_RESET",(function(){if(o._mounted){if(r&&r.length){var t=r.filter((function(t){return e.state.value.map((function(e){return t.id===e.id}))}));e.setState(e.state.value=t)}o.forceUpdate()}}))}},{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentDidUpdate",value:function(e,t,n){var r=this.props,o=r.data,a=r.category,i=r.layers,c=r.categoryHelpers,l=(r.panel,this.state.value),u=c.engravingForWholesale.repeatOptionsIndex;if(["engravingForWholesale"].includes(Object(O.getCategoryLegacyType)(o))||m.default.isEqual(this.props.layers,this.layers)||(this.layers=m.default.clone(this.props.layers)),m.default.isEqual(e.data.options,o.options)||m.default.isEqual(o.options,l)||["engravingForWholesale"].includes(Object(O.getCategoryLegacyType)(a))&&!a.categoryDynamic||this.setState({value:o.options}),!m.default.isEqual(e.layers,i)&&!m.default.isEqual(o.options,l)&&m.default.isEqual(l,t.value)&&["engravingForWholesale"].includes(Object(O.getCategoryLegacyType)(a))&&a.categoryDynamic){var s=this.state.value.map((function(e,t){var n=m.default.get(e,"option.data.value"),r=i.find((function(t){return t.option===e.id}));return r&&u.includes(t)?(n!==r.value&&(e.option.data.value=r.value),e):e}));this.setState({value:s})}if(!m.default.isEqual(e.layers,i)){var p=[];m.default.forEach(l,(function(e){m.default.isEqual(e,m.default.find(t.value,{id:e.id}))&&(m.default.find(i,{category:a.id,option:e.id})||p.push(e.id))})),m.default.isEqual(t.value,this.state.value)?this.updateDataOptionsFromLayers():p.length&&this.setState({value:l.filter((function(e){return!p.includes(e.id)}))})}}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"updateDataOptionsFromLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.data,n=e.layers,r=e.category,o=e.panel;m.default.isArray(t.options)&&this.setState({value:m.default.cloneDeep(t.options).map((function(e){var t=m.default.find(n,{panel:o.id,category:r.id,option:e.id});return t?m.default.set(e,"option.data.value",t.value):m.default.set(e,"option.data.value",""),e}))})}},{key:"optionToBeDisplayed",value:function(e,t,n){var r=this.props,o=r.isAdmin,a=r.panel;return!!o||0===(d()(e,"rules.length")||0)||Object(s.default)(e,t,n,null,null,a)}},{key:"filteredOptions",value:function(){var e=this,t=this.props,n=t.customLayers,r=t.layers,o=t.data,a=t.isAdmin,i=t.locationId,c=t.inventoryLevels,l=t.bundleBuilderMode,u=t.inventoryEnabled,s=o;return s.options||(s=this.props.category),s.options.filter((function(e){return a||!l&&!u&&e.inStock||(l||u)&&Object(v.g_getOptionInStock)(e,i,c)})).filter((function(t){return e.optionToBeDisplayed(t.logic,r,n,s)}))}},{key:"currentValue",value:function(e,t){var n=this.state.value,r=this.props,o=r.layers,a=r.category,i=(r.panel,r.categoryHelpers.engravingForWholesale.repeatOptionsIndex,n.find((function(t){return t.id===e.id})));if(this._cpbLoaded){var c="";"fontSize"===a.display&&(c=0),i=m.default.isNil(m.default.get(i,"option.data.value"))?c:i.option.data.value}else i=m.default.isNil(m.default.get(i,"option.data.value"))?e.option.data.value||zeroValue:i.option.data.value;var l=i;if(["wholesaleOrder"].includes(Object(O.getCategoryLegacyType)(a)))return l;var u="",s=m.default.find(o,{category:a.id,option:e.id});a&&e&&(u=s?s.value:"");var p=m.default.isNil(i)?u:i,d=m.default.get(this.inputRefs.find((function(t){return t.optionID===e.id})),"ref"),f=d&&d.value.toString().match(/^0+(?=\d)/);return f&&f[0].length&&"number"===this.getInputType()&&t&&1==t.step&&(p=Number(p).toString()),d&&"number"===this.getInputType()&&!m.default.isNumber(p)&&(p=d.value),p}},{key:"getMinMaxValues",value:function(e){var t=this.props,n=t.data,r=t.category,o=n&&(["wholesaleOrder","input","inputLong","additionalPriceField","counter"].includes(Object(O.getCategoryLegacyType)(n))||"fontSize"===r.display)?Number(e.option.data.inputMaxValue)||h.C_INPUT_MAX_VALUE:"";return{minValue:n&&(["wholesaleOrder","input","inputLong","additionalPriceField","counter"].includes(Object(O.getCategoryLegacyType)(n))||"fontSize"===r.display)?Number(e.option.data.inputMinValue)||0:"",maxValue:o}}},{key:"updateOption",value:function(e){var t=this,n=this.props,r=n.action,o=n.data,a=n.capitalize,i=void 0!==a&&a,c=this;return function(n){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],l=E({},c.state),u=l.value.map((function(e){return e.id})).indexOf(e.id),s=Number(e.option.data.inputLengthValue),p=n.target.value,d=m.default.get(e,"option.data.countSpaceAsCharacterForValidation"),y=d?p.length:p.replace(/\s/g,"").length;if(!(s&&y>s)){var b=m.default.get(e,"insertAnyCharacter.enabled");b&&(p=t.getInsertCharacterValue(e,p,!1)),i&&(p=p.charAt(0).toUpperCase()+p.slice(1));var g=Object.assign({},e,{option:Object.assign({},e.option,{data:Object.assign({},e.option.data,{value:p})})}),v=l.value;u<0?v.push(g):v.splice(u,1,g);var h=function(){if("wholesaleOrder"===Object(O.getCategoryLegacyType)(o)||"additionalPriceField"===Object(O.getCategoryLegacyType)(o)||"counter"===Object(O.getCategoryLegacyType)(o)){var e=t.getMinMaxValues(g),n=e.minValue,a=e.maxValue,i=v.find((function(e){return g.id===e.id}));i&&i.option.data&&(i.option.data.value=Object(f.h_inputNumberValueLimits)(E({},g).option.data.value,n,a,!0))}r(v)()};t.setState(l,(function(){a?t.onChangeDebounced(h):h()}))}}}},{key:"onOptionRepeat",value:function(e,t){(0,this.props.productCategoryHelpersUpdate)({path:"engravingForWholesale.repeatOptionsIndex",payload:t})}},{key:"onChangeDebounced",value:function(e){m.default.isFunction(e)&&e()}},{key:"getInputType",value:function(){var e=this.props.data,t=["wholesaleOrder"].includes(Object(O.getCategoryLegacyType)(e)),n=["wholesaleOrder","fontSize","additionalPriceField","counter"].includes(Object(O.getCategoryLegacyType)(e));return t||n?"number":"text"}},{key:"getInsertCharacterValue",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=m.default.get(e,"insertAnyCharacter.enabled"),o=m.default.get(e,"insertAnyCharacter.value");if(!r||!o)return t;var a=this.getCharactersCount(e,t),i=parseFloat(m.default.get(e,"option.data.inputLengthValue"))||h.C_INPUT_MAX_VALUE,c=t.replace(new RegExp(Object(g.u_escapeRegExp)(o),"gi"),"");c.length<=i&&(i-=c.length),n&&(a+=1),this.getCharactersCount(e,t)>i&&(a=i);for(var l=0;l<a;l++)c+=o;return c}},{key:"insertCharacter",value:function(e,t){var n={target:{value:this.getInsertCharacterValue(e,t,!0)}};this.updateOption(e)(n)}},{key:"getCharactersCount",value:function(e,t){var n=m.default.get(e,"insertAnyCharacter.value");return n?m.default.size(t.match(new RegExp(Object(g.u_escapeRegExp)(n),"gi")))||[].length:0}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=(t.onChange,t.layers,t.category),o=(t.panel,t.quantity),a=t.step,i=t.categoryHelpers,l=this.filteredOptions().map((function(t,l){var u=t.option.data.value,s=t.option.data.label,p=(t.option.data.countSpaceAsCharacter,["wholesaleOrder"].includes(Object(O.getCategoryLegacyType)(n))),d=Number(t.option.data.inputLengthValue)||"",f=d,y=Number(t.option.data.inputMinLengthValue)||"",b=e.getMinMaxValues(t),v=b.minValue,h=b.maxValue,j=p?v:s,x=a||p?1:"",w=t.option.data.readOnly,E=e.currentValue(t,{step:x}),P=m.default.get(t,"option.data.countSpaceAsCharacterForValidation"),C=P?E.length:Object(g.u_removeSpacesFromStr)(E).length;!1===P?("string"==typeof E||u)&&(d+=E.match(/\s/g)&&E.match(/\s/g).length):!0===P&&(d=f);var _="number"==typeof e.isRepeatedOption(t),k=m.default.get(t,"insertAnyCharacter.enabled")||m.default.get(t,"option.data.showCounterOfEnteredCharacters"),S=t.showWhenOutOfStock&&t.inventory&&!1===t.inventory.availableForSale&&!e.props.isAdmin,T="cpb-option-type-input__wrapper",I="cpb-option cpb-option-type-inputLong";k&&(T+=" cpb-option-type-input__wrapper-insert-characters",I+=" cpb-option-type-input__wrapper-insert-characters");var A=function(n){var r=n?"cpb-option-insert-character cpb-option-long":"cpb-option-insert-character";return c.a.createElement("div",{className:r},m.default.get(t,"insertAnyCharacter.enabled")&&c.a.createElement("div",{className:"cpb-option-insert-character-value",onClick:function(){return e.insertCharacter(t,E)},title:'Insert a character "'.concat(t.insertAnyCharacter.value,'" at the end of an input field')},t.insertAnyCharacter.value),m.default.get(t,"option.data.showCounterOfEnteredCharacters")&&c.a.createElement("div",{className:"cpb-option-insert-character-count"},C,"/",m.default.get(t,"option.data.inputLengthValue")))},N="engravingForWholesale"===Object(O.getCategoryLegacyType)(n)&&!n.categoryDynamic&&o>1&&!1===n.templateSameOnAll&&c.a.createElement("button",{className:"cpb-options-repeat-button ".concat(i.engravingForWholesale.repeatOptionsIndex.includes(l)?"cpb-active":""),onClick:function(){return e.onOptionRepeat(t,l)},title:"Repeat on all",type:"text"},"Repeat");return"inputLong"===Object(O.getCategoryLegacyType)(r)?c.a.createElement("span",{className:"option option-type-inputLong",key:t.id},c.a.createElement(D,{className:I},S?c.a.createElement("section",{className:"out-stock-wrapper"},c.a.createElement("div",{className:"out-stock-overlay out-stock-option"},c.a.createElement("span",null,"Out of stock")),c.a.createElement(L,{max:h,maxLength:d,min:v,minLength:y,name:u,placeholder:j,ref:function(n){return e.inputRefs[l]={optionID:t.id,ref:n}},value:E,disabled:!0})):c.a.createElement(L,{max:h,maxLength:d,min:v,minLength:y,name:u,onChange:e.updateOption(t),placeholder:j,ref:function(n){return e.inputRefs[l]={optionID:t.id,ref:n}},value:E}),k&&A(!0))):c.a.createElement("label",{className:T,key:t.id},p&&s&&c.a.createElement("span",{className:"cpb-option-type-input__wrapper-label"},s),S?c.a.createElement("section",{className:"out-stock-wrapper"},c.a.createElement("div",{className:"out-stock-overlay out-stock-option"},c.a.createElement("span",null,"Out of stock")),c.a.createElement(R,{max:h,maxLength:d,min:v,minLength:y,name:u,placeholder:j,readOnly:w,ref:function(n){return e.inputRefs[l]={optionID:t.id,ref:n}},step:x,type:e.getInputType(),disabled:!0})):c.a.createElement(R,{max:h,min:v,minLength:y,maxLength:d,name:u,onChange:e.updateOption(t),placeholder:j,readOnly:w,disabled:_,ref:function(n){return e.inputRefs[l]={optionID:t.id,ref:n}},step:x,type:e.getInputType(),value:E}),k&&A(),N)}));return c.a.createElement(c.a.Fragment,null,"inputLong"===Object(O.getCategoryLegacyType)(r)?l:c.a.createElement(D,{className:"cpb-option cpb-option-type-multiple"},l))}}])&&P(t.prototype,n),r&&P(t,r),a}(i.Component);t.default=Object(u.connect)((function(e){return{layers:e.Product.layers,customLayers:e.Product.customLayers,quantity:e.Product.quantity,isAdmin:e.App.settings.isAdmin,defaultOptions:e.App.settings.defaultOptions,categoryHelpers:e.Product.categoryHelpers,locationId:e.Routing.locationId,inventoryLevels:e.Inventory.levels,bundleBuilderMode:e.App.settings.bundleBuilderMode,inventoryEnabled:e.Global.inventoryEnabled}}),(function(e){return E(E({},Object(y.bindActionCreators)({productLayerUpdate:j.productLayerUpdate,productCategoryHelpersUpdate:j.productCategoryHelpersUpdate},e)),{},{dispatch:e})}))(N)},"./lib/app/ui/components/aside/options/inventory-tip.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/lodash-es/lodash.default.js"),o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/react-tooltip/dist/index.es.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,o,c=p(d);function d(){return l(this,d),c.apply(this,arguments)}return t=d,(n=[{key:"render",value:function(){var e=this.props,t=e.option,n=e.inventory,o=e.locationID,c=e.isEnabled,l=Number(r.default.get(t,"inventory.id"));if(!c||!l)return a.a.createElement(a.a.Fragment,null);var u=r.default.get(t,"sku"),s=n.levels.filter((function(e){return e.inventoryItemID===l})),p=!!s.length,d=s.find((function(e){return e.locationID===o})),f=r.default.get(d,"policy",r.default.get(t,"inventory.policy")),y="DENY"!==f,m=r.default.get(d,"available",0),b=!p||y||!!d&&m>0;return a.a.createElement("div",{className:"cpb-inventory-tip"},a.a.createElement("div",{className:"cpb-inventory-tip-sku"},"SKU: ",u),a.a.createElement("div",{className:"cpb-inventory-tip-amount ".concat(b?"cpb-active":""),"data-tip":"Available items: ".concat(m,", Policy: ").concat(f)},m?"Available: ".concat(m):"Out of stock"," ",f),a.a.createElement(i.default,{html:!0}))}}])&&u(t.prototype,n),o&&u(t,o),d}(a.a.PureComponent);t.default=y},"./lib/app/ui/components/aside/options/multiple.jsx":function(e,t,n){"use strict";n.r(t),function(e){var r,o,a,i,c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./node_modules/react-redux/es/index.js"),s=n("./lib/app/utils/logic-engine.jsx"),p=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("./node_modules/lodash/get.js"),f=n.n(d),y=n("./node_modules/react-image-fallback/lib/index.js"),m=n.n(y),b=n("./node_modules/@shopify/polaris/index.es.js"),g=n("./lib/app/constants/general.jsx"),v=n("./lib/app/utils/tooltip/option-tooltip.jsx"),h=n("./lib/app/utils/store/getters.jsx"),O=n("./lib/app/ui/components/admin/editor/category/types.jsx"),j=n("./node_modules/lodash-es/lodash.default.js"),x=n("./lib/app/constants/app.jsx");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var R=p.default.div(r||(r=D(["\n\tdisplay:flex;\n\tflex-wrap: wrap;\n"]))),L=p.default.span(o||(o=D(["\n    display: inline-block;\n    cursor: pointer;\n    margin-right: 5px;\n    margin-bottom: 5px;\n\t\t","\n    opacity: 0.7;\n    border: 2px solid transparent;\n    ","\n    &:hover {\n      opacity: 1;\n    }\n\n    &.cpb-active {\n      border-color: #337ab7;\n    }\n"])),(function(e){return e.colorCategory?"\n\t\t\tpadding: 3px 3px;\n\t\t\tborder-radius: 3px;\n    ":"\n\t\t\tpadding: 8px 8px;\t\n\t\t"}),(function(e){return e.haveIcons?"\n        width: 85px;\n        height: 85px;\n        padding: 0px;\n        display: inline-flex;\n        align-items: center;\n\t    justify-content: center;\n        \n        img {\n\t\t    height: 81px;\n\t\t    width: 81px;\n\t\t    display: inline-block;\n\t\t}\n    ":""})),N=p.default.span(a||(a=D(["\n    height: 25px;\n    width: 25px;\n    background: ",";\n    display: inline-block;\n    background-position: center !important;\n\t\tborder-radius: 3px;\n"])),x.APP_DEFAULT_BG),B=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(c,t);var n,r,o,a=S(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).optionToBeDisplayed=e.optionToBeDisplayed.bind(I(e)),e.selectOption=e.selectOption.bind(I(e)),e.isSelected=e.isSelected.bind(I(e)),e.filteredOptions=e.filteredOptions.bind(I(e)),e}return n=c,(r=[{key:"componentWillMount",value:function(){var t=this;e(document.body).on("PRODUCT_BUILDER_LAYER_UPDATE",(function(){t._mounted&&t.forceUpdate()}))}},{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"optionToBeDisplayed",value:function(e,t,n){var r=this.props,o=r.isAdmin,a=r.panel;return!!o||0===(f()(e,"rules.length")||0)||Object(s.default)(e,t,n,null,null,a)}},{key:"selectOption",value:function(e){var t=this,n=this;return function(){var r=n.props,o=r.action,a=r.layers,i=r.data,c=r.panel,l=i;l.options||(l=t.props.category);var u=a.filter((function(e){return e.category===l.id})).map((function(e){return l.options.find((function(t){return t.id===e.option}))}));if(1!==u.length||!t.isSelected(e)||l.deselectOption){var s=u.indexOf(e);l.limitOfSelectMultipleOptionsEnable&&l.limitOfSelectMultipleOptions&&!t.isSelected(e)&&u.length+1>l.limitOfSelectMultipleOptions||(s<0?u.push(e):u.splice(s,1),o(u)(null),t.isSelected(e)?document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_OPTION_DEACTIVATE",{detail:{option:e,category:l,panel:c,selectedOptions:u}})):document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_OPTION_ACTIVATE",{detail:{option:e,category:l,panel:c,selectedOptions:u}})))}}}},{key:"isSelected",value:function(e){var t=this.props,n=t.panel,r=t.data,o=t.layers;return(n?o.filter((function(e){return e&&r&&n&&e.panel===n.id&&e.category===r.id})).map((function(e){return e.option})):[]).indexOf(e.id)>=0}},{key:"filteredOptions",value:function(){var e=this,t=this.props,n=t.customLayers,r=t.layers,o=t.data,a=t.isAdmin,i=t.locationId,c=t.inventoryLevels,l=t.bundleBuilderMode,u=t.inventoryEnabled,s=o;return s.options||(s=this.props.category),{optionsList:s.options.filter((function(e){return a||!l&&!u&&e.inStock||(l||u)&&Object(h.g_getOptionInStock)(e,i,c)})).filter((function(t){return e.optionToBeDisplayed(t.logic,r,n,s)})),categoryData:s}}},{key:"renderOptions",value:function(){var e=this,t=this.filteredOptions(),n=t.optionsList,r=t.categoryData,o=this.props,a=o.siteCurrencyConverter,c=o.productInventory,u=o.bundleBuilderMode,s=o.inventoryEnabled,d=o.locationId,f=o.editorVersion;return n.map((function(t,n){var o=t.inventory,y=t.option.data.value,h=t.option.data.label,x="img"===r.display||f<2&&j.default.includes(y,"https:"),w=!x&&"color"===r.display,E=!!r.optionTooltipTemplate,C=t.price,_=t.sku,k=e.props.currency,S=void 0===k?"USD":k,T=t.showWhenOutOfStock&&t.inventory&&!1===t.inventory.availableForSale&&!e.props.isAdmin,I={className:"cpb-option-type-multiple-inner"+"".concat(e.isSelected(t)?" cpb-active":""),onClick:e.selectOption(t),body:h},A=t.option.data,R=r&&r.optionTooltipTemplate&&l.a.createElement(v.default,{data:P(P({bundleBuilderMode:u,inventoryEnabled:s,productInventory:c,inventory:o,locationId:d},A),{},{price:C,sku:_,currency:"percentage"===Object(O.getCategoryLegacyType)(r)?"%":S}),template:r.optionTooltipTemplate,siteCurrencyConverter:a}),B=R?b.Tooltip:p.default.span(i||(i=D([""])));if(x&&(I.className="cpb-option cpb-option-type-img ".concat(e.isSelected(t)?"cpb-active":""),I.onClick=function(){return""},I.body=l.a.createElement(B,{content:R},l.a.createElement("div",{ref:"image",onClick:e.selectOption(t)},l.a.createElement(m.a,{src:y||"",fallbackImage:"".concat(g.C_FALLBACK_IMAGE_HOST,"/images/imagenotfound.svg"),initialImage:"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/0.16.1/images/loader-large.gif",alt:h})))),w){var U=A.value,V=new RegExp(/https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,}/gi),M=function(e){return!(!e||"string"!=typeof e)&&e.match(V)},F={backgroundColor:U||"#ffffff"};(M(U)||A.iconPreview&&M(A.iconPreview))&&(F={background:"url("+(A.iconPreview||U)+")"}),I.className="cpb-option cpb-option-type-color ".concat(e.isSelected(t)?"cpb-active":""),I.onClick=function(){return""},I.body=l.a.createElement(B,{content:R},l.a.createElement("div",{ref:"color",onClick:e.selectOption(t)},l.a.createElement(N,{className:"cpb-option-type-color-bg",style:F})))}var z=T?l.a.createElement("section",{className:"out-stock-wrapper",key:t.id},l.a.createElement("div",{className:"out-stock-overlay out-stock-option"},l.a.createElement("span",null,"Out of stock")),l.a.createElement(L,{haveIcons:x,colorCategory:w,style:{minWidth:"40px"},className:I.className},I.body)):l.a.createElement(L,{key:t.id,haveIcons:x,colorCategory:w,className:I.className,onClick:I.onClick},I.body);return x||w?z:E?l.a.createElement(B,{key:"TooltipWrapper"+t.id,content:R},l.a.createElement("span",null,z)):l.a.createElement("span",{key:"RenderOption"+t.id},z)}))}},{key:"render",value:function(){return l.a.createElement(R,{className:"cpb-option cpb-option-type-multiple"},this.renderOptions())}}])&&_(n.prototype,r),o&&_(n,o),c}(c.Component);t.default=Object(u.connect)((function(e){return{layers:e.Product.layers,customLayers:e.Product.customLayers,isAdmin:e.App.settings.isAdmin,currency:e.App.settings.currency,siteCurrencyConverter:e.Global.siteCurrencyConverter,productInventory:e.Inventory,bundleBuilderMode:e.App.settings.bundleBuilderMode,inventoryEnabled:e.Global.inventoryEnabled,locationId:e.Routing.locationId,inventoryLevels:e.Inventory.levels,editorVersion:e.Global.editorVersion}}))(B)}.call(this,n("./node_modules/jquery/dist/jquery.min.js"))},"./lib/app/ui/components/aside/options/options-img/components/options-img.c.item.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i=n("./node_modules/react/index.js"),c=n.n(i),l=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=n("./lib/app/utils/tooltip/option-tooltip.jsx"),s=n("./node_modules/@shopify/polaris/index.es.js"),p=n("./lib/app/utils/string/index.jsx"),d=n("./node_modules/react-svg/dist/react-svg.esm.js"),f=n("./lib/app/constants/general.jsx"),y=n("./node_modules/react-image-fallback/lib/index.js"),m=n.n(y),b=n("./lib/app/ui/components/aside/controls/multi-currency/index.jsx"),g=n("./node_modules/react-redux/es/index.js"),v=n("./lib/app/store/slices/App/selectors.jsx"),h=n("./lib/app/store/slices/Global/selectors.jsx"),O=n("./lib/app/constants/category-type-display.jsx"),j=n("./lib/app/store/slices/Product/selectors.jsx"),x=n("./lib/app/ui/components/aside/options/options-img/hooks/index.jsx"),w=n("./lib/app/ui/components/aside/options/inventory-tip.jsx");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var k=l.default.div(r||(r=_(["\n  display: inline-block;\n  cursor: pointer;\n  padding: 2px;\n  overflow: hidden;\n  height: 85px;\n  width: 85px;\n\n  &.active {\n    speak: none;\n    font-style: normal;\n    font-weight: 400;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    color: #fff;\n  }\n\n  img {\n    height: 81px;\n    width: 81px;\n    display: inline-block;\n  }\n"]))),S=l.default.span(o||(o=_([""]))),T=l.default.div(a||(a=_(["\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-content: center;\n"]))),I=c.a.memo((function(e){var t=e.option,n=e.categoryId,r=e.panelId,o=e.action,a=e.optionTooltipTemplate,l=e.categoryType,y=e.currency,g=void 0===y?"USD":y,v=e.themeId,h=e.isAdmin,j=e.siteCurrencyConverter,E=e.productInventory,C=e.bundleBuilderMode,_=e.inventoryEnabled,I=e.optionLayer,A=e.deselectOption,D=e.locationId,R=t.price,L=t.sku,N=t.inventory,B=t.showWhenOutOfStock,U=!!I,V="aloha"===v,M="string"==typeof t.option.data.value?t.option.data.value:"",F=t.option.data.label||"",z=t.option.data,q=B&&N&&!1===N.availableForSale&&!h,W=a&&c.a.createElement(u.default,{data:P(P({bundleBuilderMode:C,inventoryEnabled:_,productInventory:E,inventory:N},z),{},{price:R,sku:L,currency:l===O.C_TD.percentage?"%":g}),template:a,siteCurrencyConverter:j,inventory:!0}),Q=W?s.Tooltip:S,G="cpb-option ";G+="cpb-option-type-".concat(l," "),G+=[O.C_TD.qtyBreakdown].includes(l)?Object(p.u_checkImgTypes)(M)?"cpb-option-qtyBreakdown-img ":"cpb-option-qtyBreakdown-text ":"",G+=U?"cpb-active ":" ";var H=Object(i.useCallback)((function(e){window.CPB.globalHooks.emit("svgBeforeInjection",{svg:e,option:t})}),[]),K=Object(x.useOptionsImgItemOnChange)({option:t,action:o,optionIsSelected:U,categoryId:n,panelId:r,deselectOption:A,categoryType:l},[t,U]),Y=Object(i.useMemo)((function(){return c.a.createElement(c.a.Fragment,null,(![O.C_TD.qtyBreakdown].includes(l)||Object(p.u_checkImgTypes)(M))&&M&&M.includes(".svg")?c.a.createElement(d.ReactSVG,{beforeInjection:H,className:"cpb-option-tooltip-img",src:M||"".concat(f.C_FALLBACK_IMAGE_HOST,"/images/imagenotfound.svg")}):M&&Object(p.u_checkImgTypes)(M)&&c.a.createElement(m.a,{className:"cpb-option-tooltip-img",src:M||"",fallbackImage:"".concat(f.C_FALLBACK_IMAGE_HOST,"/images/imagenotfound.svg"),initialImage:"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/0.16.1/images/loader-large.gif",alt:F}),!Object(p.u_checkImgTypes)(M)&&[O.C_TD.qtyBreakdown].includes(l)&&c.a.createElement(T,{className:"cpb-option-tooltip-inner-text"},M||F))}),[l,M]),X=c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{className:G,onClick:K},c.a.createElement(Q,{className:"cpb-option-tooltip-wrapper",content:W},q?c.a.createElement("section",{className:"out-stock-wrapper"},c.a.createElement("div",{className:"out-stock-overlay out-stock-option"},c.a.createElement("span",null,"Out of stock")),c.a.createElement("div",{className:"cpb-option-tooltip-inner"},Y)):c.a.createElement("div",{className:"cpb-option-tooltip-inner"},Y),c.a.createElement("div",{className:"cpb-option-label"},F)),c.a.createElement(w.default,{inventory:E,option:t,locationID:D,isEnabled:h&&(_||C)})),V&&!h&&c.a.createElement("div",{className:"cpb-option-info"},c.a.createElement("span",{className:"cpb-option-info-label"},F),R?c.a.createElement("span",{className:"cpb-option-info-price"},"+",c.a.createElement(b.default,{price:parseFloat(R),currency:g})):""));return V&&!h?c.a.createElement("div",{className:"option option-type-img"},X):c.a.createElement(c.a.Fragment,null,X)}));t.default=Object(g.connect)((function(){var e=Object(j.productSelectorLayerByProps)();return function(t,n){return{isAdmin:Object(v.appSelectIsAdmin)(t),currency:Object(v.appSelectCurrency)(t),themeId:Object(v.appSelectThemeID)(t),siteCurrencyConverter:Object(h.globalSelectCurrencyConverter)(t),productInventory:t.Inventory,bundleBuilderMode:t.App.settings.bundleBuilderMode,inventoryEnabled:t.Global.inventoryEnabled,optionLayer:e(t,{panelId:n.panelId,categoryId:n.categoryId,optionId:n.option.id}),locationId:t.Routing.locationId}}}))(I)},"./lib/app/ui/components/aside/options/options-img/hooks/index.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"useHideOptions",(function(){return c})),n.d(t,"useOptionsImgItemOnChange",(function(){return l}));var r=n("./node_modules/react/index.js"),o=n("./node_modules/lodash-es/lodash.default.js"),a=n("./lib/app/ui/components/admin/editor/category/types.jsx"),i=n("./lib/app/constants/category-type-display.jsx");function c(e,t){return Object(r.useMemo)((function(){var n=o.default.map(e,(function(e){return e.categories}));n=o.default.isArray(n)?n.flat():[];var r=o.default.find(n,(function(e){return Object(a.getCategoryLegacyType)(e)===i.C_TD.wholesaleOrder}));return!t.fake&&(Object(a.getCategoryLegacyType)(t)===i.C_TD.qtyBreakdown&&r||Object(a.getCategoryLegacyType)(t)===i.C_TD.qtyBreakdown&&!t.showTextImageButtons)}),[e,t])}function l(e){var t=e.option,n=e.action,o=e.optionIsSelected,a=e.categoryType,c=e.deselectOption,l=e.categoryId,u=e.panelId,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(r.useCallback)((function(){if(o){if(!c||[i.C_TD.qtyBreakdown].includes(a))return;document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_OPTION_DEACTIVATE",{detail:{option:t,category:l,panel:u}})),n([])(null)}else n&&n([t])(null),document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_OPTION_ACTIVATE",{detail:{option:t,category:l,panel:u}}))}),s)}},"./lib/app/ui/components/aside/options/options-img/index.jsx":function(e,t,n){"use strict";n.r(t);var r,o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./lib/app/ui/components/aside/options/options-img/hooks/index.jsx"),l=n("./node_modules/react-redux/es/index.js"),u=n("./lib/app/store/slices/Product/selectors.jsx"),s=n("./lib/app/ui/components/aside/options/options-img/components/options-img.c.item.jsx"),p=n("./lib/app/ui/components/admin/editor/category/types.jsx");var d,f,y=i.default.div(r||(d=[""],f||(f=d.slice(0)),r=Object.freeze(Object.defineProperties(d,{raw:{value:Object.freeze(f)}})))),m=a.a.memo((function(e){var t=e.panel,n=void 0===t?{}:t,r=e.category,i=e.availableOptions,l=e.panels,u=e.action,d=Object(c.useHideOptions)(l,r),f=Object(o.useCallback)((function(e){var t=Object(p.getCategoryLegacyType)(r);return a.a.createElement(s.default,{option:e,panelId:n.id,categoryId:r.id,categoryType:t,deselectOption:r.deselectOption,optionTooltipTemplate:r.optionTooltipTemplate,action:u,key:e.id||e.option.data.label})}),[]);return a.a.createElement(y,{className:"cpb-option__wrapper"},d?"":i.map(f))}));t.default=Object(l.connect)((function(){var e=Object(u.productSelectorAvailableItems)();return function(t,n){return{panels:Object(u.productSelectPanels)(t),availableOptions:e(t,{items:n.category.options})}}}))(m)},"./lib/app/ui/components/aside/options/qtyBreakdownTable.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a=n("./node_modules/react/index.js"),i=n.n(a),c=n("./node_modules/prop-types/index.js"),l=n("./node_modules/lodash-es/lodash.default.js"),u=n("./lib/app/ui/components/aside/controls/multi-currency/index.jsx"),s=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),p=n("./node_modules/rc-slider/es/index.js"),d=(n("./node_modules/rc-slider/assets/index.css"),n("./lib/app/utils/store/getters.jsx")),f=n("./lib/app/constants/global-isolated.jsx"),y=n("./lib/app/ui/components/admin/editor/category/types.jsx");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var k=s.default.tr(r||(r=_([""]))),S=s.default.div(o||(o=_([""]))),T=(new u.default,function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(a,e);var t,n,r,o=w(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={stateQty:0},t.onChange=t.onChange.bind(P(t)),t}return t=a,(n=[{key:"componentDidUpdate",value:function(e,t,n){var r=this.props,o=r.layers,a=r.quantity,i=r.category,c=r.panel,u=Number(a)||0,s=Number(e.quantity)||0,p=i.showTextImageButtons,d=e.category.showTextImageButtons,f=this.hasWholesaleCategory(),y=this.hasWholesaleCategory(e);if(!l.default.isEqual(o,e.layers)||u!==s)if(1===l.default.size(this.hasQtyBreakdownCategory())&&this.checkSliderVisible()&&this.getInputMinValue!==u&&0===u&&0===this.getStateQty)this.onChange(this.getInputMinValue);else if(u!==s||p!==d||l.default.size(f)!==l.default.size(y))this.onChange(u);else if(this.getStateQty===u){var m=l.default.find(o,{panel:c.id,category:i.id}),b=l.default.find(e.layers,{panel:c.id,category:i.id});m||b||this.onChange(u)}}},{key:"componentDidMount",value:function(){var e=this.props.quantity,t=this.state.stateQty,n=Number(e)||0;t!==n&&this.onChange(n)}},{key:"getStateQty",get:function(){return Number(this.state.stateQty)||0}},{key:"getInputMinValue",get:function(){var e=this.props.category,t=function(e){return l.default.get(e,"option.data.inputMinValue")};return e.options.reduce((function(e,n){return t(n)<e?t(n):e}),t(e.options[0]))}},{key:"getSumValuesOfLayers",get:function(){var e=this.props,t=e.panels,n=e.layers;return Object(d.g_getSumValuesOfLayers)({layers:n,panels:t,categoryType:"wholesaleOrder"})}},{key:"getOptionsList",value:function(){var e=this,t=this.props,n=t.category,r=t.settings,o=t.layers;return l.default.map(l.default.get(n,"options"),(function(t,a){var c="cpb-cpb-qtyBreakdown-table-item",s=l.default.get(t,"option.data.inputMinValue")||0,p=l.default.get(t,"option.data.label")||s||"",d=l.default.find(n.options,(function(e){return!!l.default.some(o,(function(t){return t.option===e.id}))}));if(d||!(l.default.size(e.hasWholesaleCategory())>1)){var f=d&&l.default.findIndex(n.options,d);return c+=!d||d.id!==t.id||l.default.size(e.hasWholesaleCategory())&&!e.getSumValuesOfLayers?"":" cpb-qtyBreakdown-table-item-active",c+=!l.default.isNil(f)&&a<f?" cpb-qtyBreakdown-table-item-prev":"",i.a.createElement(k,{className:c,key:a},i.a.createElement("td",null,p),i.a.createElement("td",null,i.a.createElement(u.default,{price:parseFloat(t.price),currency:r.currency})))}}))}},{key:"onChange",value:function(e){var t=this.state.stateQty,n=this.props.productQuantityUpdate;t===e?n(Number(e)):this.setState({stateQty:e},(function(){n(Number(e))}))}},{key:"productHasCategory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,n=t.panels,r=l.default.map(h(n),(function(e){return e.categories.map((function(t){return g(g({},t),{},{panelID:e.id})}))}));return r=l.default.isArray(r)?r.flat():[],l.default.filter(r,(function(t){return Object(y.getCategoryLegacyType)(t)===e}))}},{key:"hasWholesaleCategory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return this.productHasCategory("wholesaleOrder",e)}},{key:"hasQtyBreakdownCategory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return this.productHasCategory("qtyBreakdown",e)}},{key:"checkSliderVisible",value:function(){var e=this.props,t=e.category,n=e.layers,r=l.default.size(l.default.filter(this.getOptionsList())),o=l.default.find(t.options,(function(e){return!!l.default.some(n,(function(t){return t.option===e.id&&t.value}))}));return!l.default.size(this.hasWholesaleCategory())&&(!(l.default.size(this.hasQtyBreakdownCategory())>=1)||!!r&&o)}},{key:"render",value:function(){var e=this.props,t=e.layers,n=e.panels,r=e.settings,o=e.category,a=e.quantity;if(!o.showTableWithQtyBreakdown||r.isAdmin)return"";var c=Object(d.g_getSumValuesOfLayers)({layers:t,panels:n,categoryType:"wholesaleOrder"});return l.default.size(this.hasWholesaleCategory()>1)&&!c?"":i.a.createElement(S,{className:"cpb-qtyBreakdown-table"},this.checkSliderVisible()&&o.useRangeSliderForQuantity&&i.a.createElement("div",{className:"cpb-qtyBreakdown-table-slider"},i.a.createElement("div",{className:"cpb-qtyBreakdown-table-slider-title"},"Quantity ",a),i.a.createElement(p.default,{onChange:this.onChange,value:this.getStateQty,min:Number(l.default.get(r,"minTotalQty"))||this.getInputMinValue,max:Number(l.default.get(r,"maxTotalQty"))||f.C_INPUT_MAX_VALUE})),i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement(k,null,i.a.createElement("th",null,"Qty"),i.a.createElement("th",null,"Price Per Product"))),i.a.createElement("tbody",null,this.getOptionsList())))}}])&&j(t.prototype,n),r&&j(t,r),a}(a.Component));T.propTypes={category:c.object.isRequired,layers:c.array.isRequired,panels:c.array.isRequired,quantity:c.number.isRequired,settings:c.object.isRequired},T.defaultProps={category:{options:[]},layers:[],panels:[],quantity:1,settings:{currency:"USD"}},t.default=T},"./lib/app/ui/components/aside/options/radio.jsx":function(e,t,n){"use strict";n.r(t);var r,o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./node_modules/lodash-es/lodash.default.js"),l=n("./lib/app/utils/store/getters.jsx"),u=n("./lib/app/utils/logic-engine.jsx"),s=n("./lib/app/ui/components/common/forms/v3/input-radio.jsx");var p,d,f=i.default.div(r||(p=["\n  .cpb-radio {\n    &:first-child {\n      margin-top: 0 !important;\n    }\n  }\n"],d||(d=p.slice(0)),r=Object.freeze(Object.defineProperties(p,{raw:{value:Object.freeze(d)}})))),y=a.a.memo((function(e){var t=e.category,n=e.panel,r=e.onChange,o=e.customLayers,i=e.layers,p=e.isAdmin,d=e.locationId,y=e.inventoryLevels,m=e.bundleBuilderMode,b=e.inventoryEnabled,g=(e.mounted,t.options.filter((function(e){return p||!m&&!b&&e.inStock||(m||b)&&Object(l.g_getOptionInStock)(e,d,y)})).filter((function(e){return Object(u.default)(e.logic,i,o,null,null,n)}))),v=g.map((function(e){return{label:c.default.get(e,"option.data.label"),value:e.id}})),h=function(e){if(n&&t){var o=c.default.find(g,{id:e});r&&r([o])()}};return a.a.createElement(f,{className:"cpb-radio-group"},a.a.createElement(s.default,{name:t.id,options:v,category:t,value:function(){if((!t||!t.fake)&&n&&t){var e=c.default.find(i,{panel:n.id,category:t.id}),r=t&&t.options.find((function(e){return!!e.option.data.value})),o=r&&r.option.data.value,a=c.default.get(e,"value");return t&&!a&&o&&setTimeout((function(){h(o)}),0),a}}(),onChange:h}))}));t.default=y},"./lib/app/ui/components/aside/options/select-option/hooks/index.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"useSelect",(function(){return i}));var r=n("./node_modules/react/index.js");function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=function(){var e=o(Object(r.useState)({label:"",value:""}),2);return{state:e[0],setState:e[1]}}},"./lib/app/ui/components/aside/options/select-option/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./lib/app/ui/components/aside/options/select-option/react-select-option.jsx"),o=n("./lib/app/utils/string/index.jsx"),a=n("./node_modules/react-dom/server.browser.js"),i=n("./node_modules/react/index.js"),c=n.n(i),l=n("./node_modules/react-select/dist/react-select.browser.esm.js"),u=n("./node_modules/react-select/dist/Select-e1cf49ae.browser.esm.js"),s=n("./node_modules/prop-types/index.js"),p=n.n(s);function d(e){var t=e.selectValue,n=e.selectOptions,i=e.selectHandleChange,s=e.isSearchable;return c.a.createElement("div",{className:"cpb-option-type-select-wrapper"},c.a.createElement(l.default,{className:"cpb-option cpb-option-type-select ".concat(t.value?"cpb-has-value":""),components:{Option:r.default},filterOption:Object(u.c)({matchFrom:"any",stringify:function(e){return"".concat(Object(o.u_extractContent)(Object(a.renderToString)(e.label)))}}),isSearchable:s,onChange:i,options:n,value:t}))}d.propTypes={selectValue:p.a.object,selectOptions:p.a.array,selectHandleChange:p.a.func,isSearchable:p.a.bool},d.defaultProps={selectValue:{label:"",value:""},selectOptions:[],isSearchable:!1},t.default=d},"./lib/app/ui/components/aside/options/select-option/methods/index.jsx":function(e,t,n){"use strict";function r(e){var t=this.useSelect,n=this.props,r=n.category,o=n.optionID,a=n.action,i=r.options.find((function(e){return e.id===o}));if(r.deselectOption&&e.value===t.state.value)return t.setState({value:"",label:""}),i.option.data.value="",i.option.data.label="",void(_.isFunction(a)&&_.isFunction(a(null))?a(null)(e.value):a&&a(e.value));t.state.value!==e.value&&(t.setState(e),i.option.data.value=e.value,i.option.data.label=e.value,a&&a(e.value))}n.r(t),n.d(t,"default",(function(){return r}))},"./lib/app/ui/components/aside/options/select-option/react-select-option.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./lib/app/utils/image-storage/index.jsx"),o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/lodash-es/lodash.default.js"),c=n("./lib/app/ui/components/preview/render-konva/const.jsx");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=e.haveIcons,n=e.getStyles,o=e.innerProps,u=e.innerRef,p=e.label,d=e.data.icon,f=!!i.default.find(e.getValue(),(function(t){return t.value==e.value})),y=n("option",e);return delete y[":active"],delete y.padding,delete y.display,a.a.createElement("div",l({},o,{className:"cpb-option-select-option",style:s(s({},y),{},{backgroundColor:f?c.PRIMARY_COLOR:null,color:f?"white":"inherit",opacity:1}),ref:u}),t?d?a.a.createElement(r.default.img,{src:d}):a.a.createElement("div",{className:"cpb-image"}):"",a.a.createElement("span",null,p))}},"./lib/app/ui/components/aside/options/select.jsx":function(e,t,n){"use strict";n.r(t);var r,o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/react-redux/es/index.js"),c=n("./lib/app/utils/logic-engine.jsx"),l=n("./node_modules/react-select/dist/react-select.browser.esm.js"),u=n("./node_modules/react-select/dist/Select-e1cf49ae.browser.esm.js"),s=n("./lib/app/utils/image-storage/index.jsx"),p=n("./node_modules/lodash-es/lodash.default.js"),d=n("./lib/app/utils/store/getters.jsx"),f=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),y=n("./lib/app/utils/tooltip/option-tooltip.jsx"),m=n("./node_modules/react-dom/server.browser.js"),b=n("./lib/app/utils/string/index.jsx"),g=n("./lib/app/ui/components/admin/editor/category/types.jsx");function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C,_,k=f.default.div(r||(C=["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: space-between;\n  \n  > span.option-label-price {\n    display: inline;\n    width: auto;\n  }\n"],_||(_=C.slice(0)),r=Object.freeze(Object.defineProperties(C,{raw:{value:Object.freeze(_)}})))),S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,e);var t,n,r,o=x(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).state={value:void 0},e.optionToBeDisplayed=e.optionToBeDisplayed.bind(E(e)),e.handleChange=e.handleChange.bind(E(e)),e.filteredOptions=e.filteredOptions.bind(E(e)),e}return t=i,(n=[{key:"componentWillMount",value:function(){var e=this.props,t=e.layers,n=e.category,r=e.panel;if(!e.input){var o=t.filter((function(e){return e.category===n.id&&e.panel===r.id}));this.state.value=o.length?o[0].option:void 0}}},{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"componentWillReceiveProps",value:function(e){var t=e.input,n=e.layers,r=e.category,o=e.panel;if(e.optionID,!t){var a=this.state.value,i=n.filter((function(e){return e.category===r.id&&e.panel===o.id})),c=i.length?i[0].option:a;i.length||this.setState({value:""}),a!==c&&this.setState({value:c})}}},{key:"optionToBeDisplayed",value:function(e,t,n){var r=this.props,o=r.isAdmin,a=r.panel;return!!o||!e.rules||0===e.rules.length||Object(c.default)(e,t,n,null,null,a)}},{key:"handleChange",value:function(e){var t=this.props,n=t.data,r=t.action,o=t.category,a=(t.optionID,t.panel);if(o.deselectOption&&e.value===this.state.value)return this.setState({value:""}),void(p.default.isFunction(r)&&p.default.isFunction(r(null))&&r(null)(e.value));if(this.state.value!==e.value){this.setState({value:e.value});var i=n.options.find((function(t){return t.id===e.value}));i.showWhenOutOfStock&&i.inventory&&!1===i.inventory.availableForSale&&!this.props.isAdmin||(r&&r(i)(e.value),document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_OPTION_ACTIVATE",{detail:{option:e,category:o,panel:a}})))}}},{key:"filteredOptions",value:function(){var e=this,t=this.props,n=t.input,r=t.customLayers,o=t.layers,a=t.data,i=t.isAdmin,c=t.locationId,l=t.inventoryLevels,u=t.bundleBuilderMode,s=t.inventoryEnabled;if(n)return[];var p=a;return p.options||(p=this.props.category),p.options.filter((function(e){return i||!u&&!s&&e.inStock||(u||s)&&Object(d.g_getOptionInStock)(e,c,l)})).filter((function(t){return e.optionToBeDisplayed(t.logic,o,r,p)}))}},{key:"checkValueForDropdownCategory",value:function(e){var t=this.props,n=t.layers,r=t.panel,o=t.category;if(!["select"].includes(Object(g.getCategoryLegacyType)(o)))return e;var a=e&&p.default.find(n,{panel:r.id,category:o.id,option:e.value});return e&&!a&&(e=""),e}},{key:"render",value:function(){var e=this,t=this.props,n=t.input,r=(t.noDefault,t.layers,t.category),o=(t.panel,t.optionID),i=(t.data,t.currency),c=t.siteCurrencyConverter,p=(t.productInventory,t.bundleBuilderMode),d=t.inventoryEnabled,f=t.locationId,v=r.isSearchable,O=void 0!==v&&v,j=this.state.value,x=this.filteredOptions().filter((function(e){return e.option.data.value&&"string"==typeof e.option.data.value&&e.option.data.value.indexOf("://")>=0})).length,w=this.filteredOptions().map((function(t,n){var o=t.inventory,l=t.showWhenOutOfStock&&t.inventory&&!1===t.inventory.availableForSale&&!e.props.isAdmin,u=a.a.createElement(y.default,{data:{bundleBuilderMode:p,inventoryEnabled:d,locationId:f,productInventory:e.props.productInventory,inventory:o,price:parseFloat(t.price),currency:"percentage"===Object(g.getCategoryLegacyType)(r)?"%":i},template:r.selectLabelPriceTemplate,siteCurrencyConverter:c});return{value:t.id,label:l?a.a.createElement(k,{style:{background:"#80808085"},className:"option-label out-stock-option"},t.option.data.label,a.a.createElement("span",{className:"option-label-price"},u)):a.a.createElement(k,{className:"option-label out-stock-option"},t.option.data.label,a.a.createElement("span",{className:"option-label-price"},u)),icon:t.option.data.value}})),E=w.find((function(e){return e.id===o&&e.value===j})),P=n?{value:n.value,onChange:n.onChange}:{};return j||(E=""),E=this.checkValueForDropdownCategory(E),a.a.createElement("div",null,a.a.createElement(l.default,h({className:"cpb-option cpb-option-type-select ".concat(j?"cpb-has-value":""),components:{Option:function(e){var t=e.innerProps,n=e.innerRef,r=e.label,o=e.data.icon;return a.a.createElement("div",h({},t,{className:"cpb-option-select-option ".concat(x&&"cpb-option-select-icon"),ref:n}),x?o?a.a.createElement(s.default.img,{src:o}):a.a.createElement("div",{className:"cpb-image"}):"",a.a.createElement("span",null,r))}},filterOption:Object(u.c)({matchFrom:"any",stringify:function(e){return"".concat(Object(b.u_extractContent)(Object(m.renderToString)(e.label)))}}),isSearchable:O,onChange:this.handleChange,options:w,ref:function(t){return e.ref=t},value:E},P)))}}])&&O(t.prototype,n),r&&O(t,r),i}(o.Component);t.default=Object(i.connect)((function(e){return{layers:e.Product.layers,customLayers:e.Product.customLayers,isAdmin:e.App.settings.isAdmin,currency:e.App.settings.currency,siteCurrencyConverter:e.Global.siteCurrencyConverter,productInventory:e.Inventory,bundleBuilderMode:e.App.settings.bundleBuilderMode,inventoryEnabled:e.Global.inventoryEnabled,locationId:e.Routing.locationId,inventoryLevels:e.Inventory.levels}}))(S)},"./lib/app/ui/components/aside/options/text.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a=n("./node_modules/react/index.js"),i=n.n(a),c=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/@shopify/polaris/index.es.js"),u=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),s=n("./lib/app/utils/tooltip/option-tooltip.jsx"),p=(n("./lib/app/ui/components/aside/controls/multi-currency/index.jsx"),n("./lib/app/ui/components/admin/editor/category/types.jsx"));function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var w=u.default.div(r||(r=x(["\n    display: inline-block;\n    cursor: pointer;\n    margin-right: 5px;\n    margin-bottom: 5px;\n    padding: 8px 8px;\n    opacity: 0.7;\n    border: 2px solid transparent;\n    &:hover {\n      opacity: 1;\n    }\n\n    &.cpb-active {\n      border-color: #337ab7;\n    }\n"]))),E=u.default.span(o||(o=x([""]))),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,e);var t,n,r,o=h(a);function a(){return b(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.currency,n=e.locationId,r=this.props,o=r.data,a=r.onChange,c=r.active,u=r.category,d=(r.optionID,r.label,r.option),f=r.panel,m=(r.themeId,r.siteCurrencyConverter),b=r.bundleBuilderMode,g=r.inventoryEnabled,v=d.sku,h=o.value,O=o.label,j=d.showWhenOutOfStock&&d.inventory&&!1===d.inventory.availableForSale&&!this.props.isAdmin;t=t||"USD";var x=d.price,P=u&&u.optionTooltipTemplate&&i.a.createElement(s.default,{data:y(y({bundleBuilderMode:b,inventoryEnabled:g},o),{},{price:x,sku:v,locationId:n,currency:"percentage"===Object(p.getCategoryLegacyType)(u)?"%":t}),template:u.optionTooltipTemplate,siteCurrencyConverter:m}),C=P?l.Tooltip:E;return j?i.a.createElement(w,{style:{minWidth:"100px"},className:"cpb-option cpb-option-type-text"},i.a.createElement("section",{className:"out-stock-wrapper"},i.a.createElement("div",{className:"out-stock-overlay out-stock-option"},i.a.createElement("span",null,"Out of stock")),i.a.createElement(C,{content:P},i.a.createElement("div",null,O)))):i.a.createElement(w,{onClick:function(){return c?document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_OPTION_DEACTIVATE",{detail:{option:d,category:u,panel:f}})):document.body.dispatchEvent(new CustomEvent("PRODUCT_BUILDER_OPTION_ACTIVATE",{detail:{option:d,category:u,panel:f}})),c&&!u.deselectOption?"":a?a(h):""},className:"cpb-option cpb-option-type-text ".concat(c?"cpb-active":"")},i.a.createElement(C,{content:P},i.a.createElement("div",null,O)))}}])&&g(t.prototype,n),r&&g(t,r),a}(a.Component);t.default=Object(c.connect)((function(e){return{currency:e.App.settings.currency,themeId:e.App.settings.theme.id,siteCurrencyConverter:e.Global.siteCurrencyConverter,bundleBuilderMode:e.App.settings.bundleBuilderMode,inventoryEnabled:e.Global.inventoryEnabled}}))(P)},"./lib/app/ui/components/aside/panel/controls.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/redux/es/redux.js"),c=n("./lib/app/ui/components/common/modal/index.jsx"),l=n("./node_modules/sweetalert2/dist/sweetalert2.all.js"),u=n.n(l),s=n("./lib/app/ui/components/aside/modals/reorder.jsx"),p=n("./lib/app/ui/components/common/expand-menu/index.jsx"),d=n("./lib/app/store/slices/Product/index.jsx"),f=n("./lib/app/store/slices/Editor/index.jsx");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,n,r,a=O(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this)).state={reorder:!1},e.productPanelDelete=e.productPanelDelete.bind(x(e)),e.newCategory=e.newCategory.bind(x(e)),e.toggleReorder=e.toggleReorder.bind(x(e)),e.reorderCategory=e.reorderCategory.bind(x(e)),e.editPanel=e.editPanel.bind(x(e)),e.productPanelCopy=e.productPanelCopy.bind(x(e)),e}return t=i,(n=[{key:"toggleReorder",value:function(){this.setState({reorder:!this.state.reorder})}},{key:"editPanel",value:function(){var e=this.props,t=e.panel;(0,e.editorPanelEdit)(t)}},{key:"productPanelDelete",value:function(){var e=this.props,t=e.productPanelDelete,n=e.panel;u.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){if(e.isConfirmed)return t(n.id),u.a.fire({toast:!0,position:"top-end",showConfirmButton:!1,timerProgressBar:!0,timer:2e4,didOpen:function(e){e.addEventListener("click",u.a.close),e.addEventListener("mouseenter",u.a.stopTimer),e.addEventListener("mouseleave",u.a.resumeTimer)},title:"Panel Deleted",icon:"success"})}))}},{key:"productPanelCopy",value:function(){var e=this.props,t=e.productPanelCopy,n=e.panel,r=n.id,o=n.title+"-COPY";u.a.fire({title:"Make a copy of the panel",text:"Type a new panel name",input:"text",inputValue:o,inputPlaceholder:"Panel name",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Copy"}).then((function(e){if(e.isConfirmed){var n=e.value;t(r,n)}}),(function(){}))}},{key:"newCategory",value:function(){var e=this.props,t=e.panel;(0,e.editorCategoryEdit)({},t)}},{key:"reorderCategory",value:function(e){var t=this.props,n=t.panel;(0,t.productCategoriesOrderUpdate)(n.id,e)}},{key:"render",value:function(){var e=this.props,t=e.panel,n=e.hasValue;return o.a.createElement("div",null,o.a.createElement(p.default,{style:{position:"absolute",right:13,top:"50%",transform:"".concat(n?"translateY(calc(-50% - 4px))":"")},help:{intro:"Edit Panel",position:"left"},actions:[{icon:"lnr lnr-magic-wand",action:this.productPanelCopy,tooltip:"Copy Panel"},{icon:"lnr lnr-pencil",action:this.editPanel,tooltip:"Edit Panel"},{icon:"lnr lnr-file-add",action:this.newCategory,tooltip:"Add new category"},{icon:"lnr lnr-trash",action:this.productPanelDelete,tooltip:"Delete Panel"},{icon:"lnr lnr-layers",action:this.toggleReorder,tooltip:"Reorder Categories"}]}),o.a.createElement(c.side,{isOpen:this.state.reorder,onRequestClose:this.toggleReorder,contentLabel:"Reorder Categories"},o.a.createElement(s.default,{close:this.toggleReorder,title:"Reorder Categories",list:t.categories,submit:this.reorderCategory})))}}])&&v(t.prototype,n),r&&v(t,r),i}(r.Component);t.default=Object(a.connect)((function(e){return e}),(function(e){return b(b({},Object(i.bindActionCreators)({productPanelDelete:d.productPanelDelete,productCategoriesOrderUpdate:d.productCategoriesOrderUpdate,editorPanelEdit:f.editorPanelEdit,editorCategoryEdit:f.editorCategoryEdit,productPanelCopy:d.productPanelCopy},e)),{},{dispatch:e})}))(E)},"./lib/app/ui/components/aside/panel/index.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c,l=n("./node_modules/react/index.js"),u=n.n(l),s=n("./node_modules/react-redux/es/index.js"),p=n("./lib/app/ui/components/aside/category/index.jsx"),d=n("./lib/app/ui/components/aside/panel/controls.jsx"),f=n("./lib/app/ui/components/common/no-content.jsx"),y=n("./node_modules/styled-components/dist/styled-components.browser.esm.js");n("./node_modules/react-lazily-render/dist/esnext/index.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var w=y.default.div(r||(r=x(["\n    border: none;\n    box-shadow: none;\n    background: none;\n"]))),E=y.default.div(o||(o=x(["\n    position: relative;\n    min-height: ","\n"])),(function(e){return e.isAdmin?"60px":""})),P=y.default.h2(a||(a=x(["\n    font-size: 2.2em;\n    line-height: 2.2em;\n"]))),C=y.default.p(i||(i=x(["\n    font-weight: 300;\n    font-size: 0.95em;\n    color: #636363;\n    margin-bottom: 30px;\n    word-break: break-word;\n"]))),_=y.default.div(c||(c=x(["\n    *{\n      outline: none;\n    }\n"]))),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,e);var t,n,r,o=h(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this)}return t=a,(n=[{key:"renderCategories",value:function(){var e=this.props,t=e.isAdmin,n=e.panel,r=n.categories,o={isAdmin:t,panel:n};if(r.length){var a=-1;return r.forEach((function(e,t){""!==e.hideNext&&void 0!==e.hideNext&&-1===a&&(a=t)})),r.map((function(e,t){return u.a.createElement(p.default,b({key:e.id,num:t},o,{category:e,hideCategoriesIndex:a}))}))}return t&&u.a.createElement(f.default,{message:"You have no categories yet."})}},{key:"renderTitle",value:function(){var e=this.props,t=e.layout,n=e.panel,r=e.isAdmin,o="col-tabs"===t||"row-tabs"===t?"":n.title,a=n.description?u.a.createElement(C,{dangerouslySetInnerHTML:{__html:n.description},className:"cpb-panel-description"}):"";return u.a.createElement(E,{isAdmin:r},u.a.createElement(P,{className:"cpb-panel-title"},o),a,r&&u.a.createElement(d.default,{panel:n,hasValue:!!o||r}))}},{key:"render",value:function(){var e=this.props.layout;return u.a.createElement(w,{className:"cpb-panel-wrapper"},this.renderTitle(),u.a.createElement(_,{className:"cpb-panel-categories-container ".concat(e),"data-intro":"Edit Categories","data-position":"left"},this.renderCategories()))}}])&&g(t.prototype,n),r&&g(t,r),a}(u.a.PureComponent);t.default=Object(s.connect)((function(){return function(e,t){return{isAdmin:e.App.settings.isAdmin,layout:e.App.settings.layout,layers:e.Product.layers}}}))(k)},"./lib/app/ui/components/aside/panel/new.jsx":function(e,t,n){"use strict";n.r(t);var r,o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/redux/es/redux.js"),l=n("./node_modules/@shopify/polaris/index.es.js"),u=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),s=n("./lib/app/store/slices/Editor/index.jsx");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j,x,w=u.default.div(r||(j=["\n    margin-top: 70px;\n    margin-bottom: 10px;\n"],x||(x=j.slice(0)),r=Object.freeze(Object.defineProperties(j,{raw:{value:Object.freeze(x)}})))),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,e);var t,n,r,o=g(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).togglePanelNew=e.togglePanelNew.bind(h(e)),e}return t=i,(n=[{key:"togglePanelNew",value:function(){(0,this.props.editorPanelEdit)({})}},{key:"render",value:function(){return this.props.display?a.a.createElement(w,{"data-intro":"New Panel","data-position":"left"},a.a.createElement(l.Button,{primary:!0,fullWidth:!0,onClick:this.togglePanelNew},"New Panel")):null}}])&&m(t.prototype,n),r&&m(t,r),i}(o.Component);t.default=Object(i.connect)((function(e){return e}),(function(e){return f(f({},Object(c.bindActionCreators)({editorPanelEdit:s.editorPanelEdit},e)),{},{dispatch:e})}))(E)},"./lib/app/ui/components/aside/panels/hooks/index.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"useDrawPanels",(function(){return d})),n.d(t,"useOnDrawPanelsChangeLength",(function(){return f}));var r=n("./lib/app/ui/components/aside/panel/index.jsx"),o=n("./node_modules/react-tabs/esm/index.js"),a=n("./lib/app/ui/components/aside/printable-areas/index.jsx"),i=n("./node_modules/react/index.js"),c=n.n(i),l=n("./node_modules/lodash-es/lodash.default.js"),u=n("./lib/app/utils/custom-react-hooks/index.jsx"),s=(n("./node_modules/react-lazily-render/dist/esnext/index.js"),n("./node_modules/react-loading-skeleton/lib/index.js")),p=n.n(s),d=function(e,t,n,l){return Object(i.useMemo)((function(){var t=e.map((function(e,t){var n=c.a.createElement(r.default,{key:"panel_"+e.id,panel:e}),a=(c.a.Fragment,p.a,p.a,n);return l?c.a.createElement(o.TabPanel,{key:"tab_"+e.id,className:"cpb-product-panel"},a):a}));return n.length&&!l&&t.push(c.a.createElement(a.default,{key:"tab_PrintableElement"})),t}),[e])},f=function(e,t,n){Object(i.useEffect)((function(){var r=Object(u.usePrevious)(t),o=Object(u.usePrevious)(e),a=r,i=t;if(e===o&&a.length!==i.length){var c,s=a[o],p=i[e];if(s&&s.panel&&(l.default.get(p,"panel.id")&&p.panel.id!==s.panel.id||!l.default.get(p,"panel.id"))){var d=l.default.findIndex(i,(function(e){return e.panel&&e.panel.id===s.panel.id}));l.default.isNumber(d)&&(c=d)}l.default.isNumber(c)&&c!==e&&n(c)}}),[t,e])}},"./lib/app/ui/components/aside/panels/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./lib/app/ui/components/aside/app-tabs/index.jsx"),i=n("./node_modules/react-tabs/esm/index.js"),c=n("./node_modules/react-redux/es/index.js"),l=n("./lib/app/store/slices/Product/selectors.jsx"),u=n("./lib/app/store/slices/App/selectors.jsx"),s=n("./lib/app/utils/i18n.jsx"),p=n("./lib/app/ui/components/aside/summary.jsx"),d=n("./lib/app/ui/components/aside/panels/hooks/index.jsx"),f=o.a.memo((function(e){var t=e.printableAreas,n=e.layout,c=e.hasSummary,l=e.showSummarySection,u=e.drawPanels,f="col-tabs"===n||"row-tabs"===n,y="col-list"===n,m=Object(d.useDrawPanels)(u,n,t,f),b=Object(r.useMemo)((function(){return c&&f?o.a.createElement(i.TabPanel,{paneltitle:s.I18n.t("summary.title"),className:"cpb-product-panel"},o.a.createElement(p.default,null)):""}),[c,n]),g=Object(r.useMemo)((function(){return l&&y&&o.a.createElement(p.default,null)||""}),[l,n]);return o.a.createElement("div",null,f?o.a.createElement(a.default,{className:"cpb-panels-tabs",selectedTabClassName:"cpb-active"},m,b):o.a.createElement(o.a.Fragment,null,m,g))}));t.default=Object(c.connect)((function(e){return{printableAreas:Object(l.productSelectPrintableAreas)(e),layout:Object(u.appSelectLayout)(e),isAdmin:Object(u.appSelectIsAdmin)(e),hasSummary:Object(u.appSelectHasSummary)(e),showSummarySection:Object(u.appSelectShowSummarySection)(e),drawPanels:Object(l.productSelectorDrawPanels)(e)}}))(f)},"./lib/app/ui/components/aside/printable-areas/common.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a=n("./node_modules/react/index.js"),i=n.n(a),c=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),l=n("./lib/app/utils/i18n.jsx"),u=n("./node_modules/sweetalert2/dist/sweetalert2.all.js"),s=n.n(u);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h,O,j,x=c.default.div(r||(r=v([""]))),w=c.default.div(o||(o=v(["\n    border: 1px solid #aa0000;\n    background: #db0000;\n    color: #fff;\n    padding: 10px;\n    font-size: 16px !important;\n    cursor: pointer;\n    text-align: center;"]))),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o=y(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).deleteElement=e.deleteElement.bind(b(e)),e}return t=a,(n=[{key:"deleteElement",value:function(){var e=this.props,t=e.productPrintableElementDelete,n=e.values;s.a.fire({title:l.I18n.t("printableAreas.modals.delete.title"),text:l.I18n.t("printableAreas.modals.delete.message"),confirmButtonText:l.I18n.t("printableAreas.modals.delete.confirm"),cancelButtonText:l.I18n.t("printableAreas.modals.delete.cancel"),showCancelButton:!0,icon:"question"}).then((function(e){e.isConfirmed&&n.id&&t(n.id)}))}},{key:"render",value:function(){return i.a.createElement(x,null,i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-12"},i.a.createElement(w,{className:"cpb-printable-element-delete-button",onClick:this.deleteElement},i.a.createElement(l.Translate,{value:"printableAreas.form.helpers.delete"})))))}}])&&d(t.prototype,n),r&&d(t,r),a}(i.a.PureComponent);j="ElementFormCommon",(O="displayName")in(h=E)?Object.defineProperty(h,O,{value:j,enumerable:!0,configurable:!0,writable:!0}):h[O]=j,t.default=E},"./lib/app/ui/components/aside/printable-areas/controls.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c,l=n("./node_modules/react/index.js"),u=n.n(l),s=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),p=n("./lib/app/utils/i18n.jsx"),d=n("./node_modules/lodash-es/lodash.default.js");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var j=s.default.div(r||(r=O(["\n    \n"]))),x=s.default.div(o||(o=O(["\n    display: flex;\n   \n   &>div:last-child{\n   \t\tmargin-left: -1px;\n   }\n"]))),w=s.default.div(a||(a=O(["\n    border: 1px solid #aaa;\n    text-align: center;\n    padding: 12px;\n    min-width: 115px;\n    cursor: pointer;\n    \n    &:hover{\n    \tcolor: #29a8e0;\n    }\n"]))),E=s.default.i(i||(i=O(["\n    font-size: 22px;\n"]))),P=s.default.div(c||(c=O(["\n        font-size: 12px;\n    margin-top: 4px;\n"]))),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,e);var t,n,r,o=g(a);function a(){return y(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.newElement,n=e.areas,r=e.category,o=r&&n.filter((function(e){return e.category===r.id}));return u.a.createElement(j,null,u.a.createElement(x,{className:"cpb-printable-controls"},u.a.createElement(w,{onClick:function(){return t(d.default.get(o,"[0].id",null),"text")},className:"cpb-printable-controls-button"},u.a.createElement(E,{className:"lnr lnr-bold"}),u.a.createElement(P,null,u.a.createElement(p.Translate,{value:"printableAreas.controls.text"}))),u.a.createElement(w,{onClick:function(){return t(d.default.get(o,"[0].id",null),"img")},className:"cpb-printable-controls-button"},u.a.createElement(E,{className:"lnr lnr-picture"}),u.a.createElement(P,null,u.a.createElement(p.Translate,{value:"printableAreas.controls.raster"})))))}}])&&m(t.prototype,n),r&&m(t,r),a}(l.Component);t.default=C},"./lib/app/ui/components/aside/printable-areas/form.jsx":function(e,t,n){"use strict";n.r(t);var r,o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/redux/es/redux.js"),l=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=n("./node_modules/redux-form/es/reduxForm.js"),s=n("./lib/app/ui/components/aside/printable-areas/text.jsx"),p=n("./lib/app/ui/components/aside/printable-areas/raster.jsx"),d=n("./lib/app/ui/components/aside/printable-areas/common.jsx");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var o=x(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w,E,P=l.default.div(r||(w=["\n\tpadding: 0px;\n"],E||(E=w.slice(0)),r=Object.freeze(Object.defineProperties(w,{raw:{value:Object.freeze(E)}})))),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,e);var t,n,r,o=h(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).autoSave=e.autoSave.bind(j(e)),e}return t=i,(n=[{key:"componentWillMount",value:function(){var e=this.autoSave,t=this.props.initialValues;this.initialValues=JSON.stringify(t),this.interval=setInterval(e,500)}},{key:"componentWIllUnmount",value:function(){clearInterval(this.interval)}},{key:"autoSave",value:function(){var e=this.props,t=e.formData,n=e.submit,r=this.initialValues;t&&t.values&&r!==JSON.stringify(t.values)&&(this.initialValues=JSON.stringify(t.values),n())}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.formData,r=e.productPrintableElementDelete,o=e.fontsAvailable,i=e.elements,c=e.category,l=e.panels,u=e.productPrintableElementUpdate,f=i.find((function(e){return e.active}));return a.a.createElement(P,null,"text"===t?a.a.createElement(s.default,{values:n?n.values:{},fontsAvailable:o}):a.a.createElement(p.default,{values:n?n.values:{},element:f,category:c,panels:l,productPrintableElementUpdate:u}),a.a.createElement(d.default,{productPrintableElementDelete:r,values:n?n.values:{}}))}}])&&g(t.prototype,n),r&&g(t,r),i}(o.Component);C=Object(u.default)({form:"printable-element-edit",enableReinitialize:!0})(C);t.default=Object(i.connect)((function(e){return{formData:e.form["printable-element-edit"],fontsAvailable:e.App.settings.fonts.available,elements:e.Product.printableElements}}),(function(e){return m(m({},Object(c.bindActionCreators)({},e)),{},{dispatch:e})}))(C)},"./lib/app/ui/components/aside/printable-areas/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/redux/es/redux.js"),c=n("./node_modules/lodash-es/lodash.default.js"),l=n("./lib/app/ui/components/aside/printable-areas/form.jsx"),u=n("./lib/app/ui/components/aside/printable-areas/controls.jsx"),s=n("./lib/app/ui/components/aside/printable-areas/list/index.jsx"),p=n("./lib/app/store/slices/Product/index.jsx");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,e);var t,n,r,a=g(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this)).handleSubmit=e.handleSubmit.bind(h(e)),e}return t=i,(n=[{key:"handleSubmit",value:function(e){this.props.productPrintableElementUpdate(e)}},{key:"render",value:function(){var e=this.props,t=e.printableAreas,n=e.printableElements,r=e.productPrintableElementAdd,a=e.productPrintableElementDelete,i=e.productPrintableElementActiveSet,p=e.productPrintableElementUpdate,d=e.category,f=e.panels,y=n.find((function(e){return e.active}));return o.a.createElement("div",{className:"cpb-printable-element-wrapper"},"list"===c.default.get(d,"display")&&o.a.createElement(s.default,{elements:n,productPrintableElementActiveSet:i,productPrintableElementUpdate:p}),o.a.createElement(u.default,{newElement:r,areas:t,category:d}),y&&o.a.createElement(l.default,{initialValues:y||{},onSubmit:this.handleSubmit,type:y?y.type:"text",panels:f,category:d,productPrintableElementDelete:a,productPrintableElementUpdate:p}))}}])&&m(t.prototype,n),r&&m(t,r),i}(o.a.PureComponent);j(x,"displayName","PrintableAreasElementSettings");t.default=Object(a.connect)((function(e){return{printableElements:e.Product.printableElements,printableAreas:e.Product.printableAreas,supportedSku:e.Product.supportedSku,layers:e.Product.layers,panels:e.Product.panels}}),(function(e){return y(y({},Object(i.bindActionCreators)({productPrintableElementAdd:p.productPrintableElementAdd,productPrintableElementDelete:p.productPrintableElementDelete,productPrintableElementActiveSet:p.productPrintableElementActiveSet,productPrintableElementUpdate:p.productPrintableElementUpdate},e)),{},{dispatch:e})}),null,{pure:!0})(x)},"./lib/app/ui/components/aside/printable-areas/inputs/button.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a=n("./node_modules/react/index.js"),i=n.n(a),c=n("./node_modules/@shopify/polaris/index.es.js"),l=n("./node_modules/uid-safe/index.js"),u=n.n(l),s=n("./node_modules/styled-components/dist/styled-components.browser.esm.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h=s.default.div(r||(r=v(["\n    border: 1px solid #aaa;\n    display: inline-block;\n    margin: 5px;\n    margin-top: 41px;\n    border-radius: 3px;\n    height: 39px;\n    width: 39px;\n    font-size: 22px;\n    padding: 9px;\n    cursor: pointer;\n"]))),O=(s.default.i(o||(o=v(["\n    \n"]))),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o=y(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).onChange=e.onChange.bind(b(e)),e}return t=a,(n=[{key:"onChange",value:function(){var e=this.props,t=e.input,n=t.value,r=t.onChange,o=e.selectedValue;r(n.split(o).length>1?n.replace(o,""):"".concat(n," ").concat(o))}},{key:"render",value:function(){var e=this.props,t=e.input,n=(t.value,t.onChange,e.label),r=(e.type,e.selectedValue,e.icon);return u.a.sync(18),i.a.createElement(c.Tooltip,{content:"".concat(n||"-")},i.a.createElement(h,{onClick:this.onChange},i.a.createElement("i",{className:"lnr ".concat(r)})))}}])&&d(t.prototype,n),r&&d(t,r),a}(a.Component));t.default=O},"./lib/app/ui/components/aside/printable-areas/inputs/color.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./node_modules/uid-safe/index.js"),s=n.n(u),p=n("./node_modules/react-color/es/index.js"),d=n("./node_modules/styled-components/dist/styled-components.browser.esm.js");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var j=d.default.div(r||(r=O(["\n\tposition: relative;\n\tmargin: 10px 0;\n"]))),x=d.default.label(o||(o=O(["\n    display: block;\n    margin-bottom: 5px;\n"]))),w=d.default.input(a||(a=O(["\n    display: block;\n    border: 1px solid #aaa;\n\n    padding: 8px 12px;\n    font-size: 16px !important;\n    width: 100%;\n    color: #aaaaaa;\n"]))),E=d.default.div(i||(i=O(["\n\tpadding: 10px;\n    background: #fff;\n    position: absolute;\n    width: 100%;\n    border: 1px solid #aaa;\n    z-index: 1;\n    bottom: -255px;\n    border-top: none;\n    text-align: center;\n    \n    .chrome-picker{\n    \tmargin: auto;\n    }\n"]))),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,r,o=b(a);function a(){var e,t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=o.call(this),t=v(e),r=function(t){var n=e.props,r=n.input,o=(r.value,r.onChange);n.label,n.options,t&&t.hex&&o(t.hex)},(n="handleChangeComplete")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e.state={open:!1},e.toggleModal=e.toggleModal.bind(v(e)),e}return t=a,(n=[{key:"toggleModal",value:function(e){var t=this;return function(){t.setState({open:e})}}},{key:"render",value:function(){var e=this.props,t=e.input,n=t.value,r=(t.onChange,e.label),o=(e.options,s.a.sync(18)),a=this.state.open;return l.a.createElement(j,{onMouseEnter:this.toggleModal(!0),onMouseLeave:this.toggleModal(!1)},l.a.createElement(x,{htmlFor:o},r),l.a.createElement(w,{type:"text",id:o,style:{background:n||"#000000"},disabled:!0}),a&&l.a.createElement(E,null,l.a.createElement(p.ChromePicker,{color:n||"#000000",onChangeComplete:this.handleChangeComplete})))}}])&&y(t.prototype,n),r&&y(t,r),a}(c.Component);t.default=P},"./lib/app/ui/components/aside/printable-areas/inputs/range.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./node_modules/uid-safe/index.js"),s=n.n(u),p=n("./node_modules/react-input-range/lib/js/index.js"),d=n.n(p),f=n("./node_modules/styled-components/dist/styled-components.browser.esm.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var x=f.default.div(r||(r=j(["\n\tposition: relative;\n\tmargin: 10px 0;\n"]))),w=f.default.label(o||(o=j(["\n    display: block;\n    margin-bottom: 5px;\n"]))),E=f.default.input(a||(a=j(["\n    display: block;\n    border: 1px solid #aaa;\n\n    padding: 8px 12px;\n    font-size: 16px !important;\n    width: 100%;\n    color: #aaaaaa;\n"]))),P=f.default.div(i||(i=j(["\n\tpadding: 10px;\n    background: #fff;\n    position: absolute;\n    width: 100%;\n    border: 1px solid #aaa;\n    z-index: 1;\n    bottom: -28px;\n    border-top: none;\n\n"]))),C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,e);var t,n,r,o=g(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).state={open:!1},e.toggleModal=e.toggleModal.bind(h(e)),e}return t=a,(n=[{key:"toggleModal",value:function(e){var t=this;return function(){t.setState({open:e})}}},{key:"onChangeDebounced",value:function(e){_.isFunction(e)&&e()}},{key:"onChange",value:function(e){var t=this,n=this.props.input.onChange;this.setState({value:e},(function(){t.onChangeDebounced((function(){var r=t.props,o=r.minValue,a=r.maxValue;e=h_inputNumberValueLimits(e,o,a),n(e)}))}))}},{key:"getValue",value:function(){var e=this.props,t=e.maxValue,n=e.minValue,r=this.state.value;return r=(r=Number(r||0))>t?t:r<n?n:r,r=parseFloat(r.toFixed(2))}},{key:"render",value:function(){var e=this.props,t=e.input,n=t.value,r=t.onChange,o=e.maxValue,a=e.minValue,i=e.label,c=s.a.sync(18),u=this.state.open;return l.a.createElement(x,{onMouseEnter:this.toggleModal(!0),onMouseLeave:this.toggleModal(!1)},l.a.createElement(w,{htmlFor:c},i),l.a.createElement(E,{type:"number",id:c,value:Math.round(Number(n||0)),onChange:r}),u&&l.a.createElement(P,null,l.a.createElement(d.a,{formatLabel:function(e){return""},maxValue:o,minValue:a,value:Math.round(Number(n||0)),onChange:r})))}}])&&m(t.prototype,n),r&&m(t,r),a}(c.Component);t.default=C},"./lib/app/ui/components/aside/printable-areas/inputs/recent-images.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./node_modules/uid-safe/index.js"),s=n.n(u),p=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("./node_modules/react-image-fallback/lib/index.js"),f=n.n(d),y=n("./lib/app/utils/recent-images.jsx"),m=n("./lib/app/store/index.jsx"),b=n("./lib/app/store/slices/Product/index.jsx");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var P=m.default.dispatch,C=p.default.div(r||(r=E(["\n    width: 100%;\n    margin: 20px 0;\n"]))),_=p.default.h2(o||(o=E(["\n    font-size: 1.2em;\n"]))),k=p.default.div(a||(a=E(["\n    display: block;\n"]))),S=p.default.div(i||(i=E(["\n    display: inline-block;\n    width: 25%;\n    padding: 5px;\n    cursor: pointer;\n"]))),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,n,r,o=O(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this)).onChange=e.onChange.bind(x(e)),e}return t=a,(n=[{key:"onChange",value:function(e){var t=this.props,n=t.input,r=(n.value,n.onChange),o=t.elementID;return function(){var t=new Image;t.onload=function(){var n=150*t.height/t.width,r={id:o,image:{width:150,height:n},value:e};P(Object(b.productPrintableElementUpdate)(r))},t.src=e,r(e)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.input,r=(n.value,n.onChange,t.label),o=(t.type,t.selectedValue,t.icon,s.a.sync(18),Object(y.getImages)());return 0===o.lenght?null:l.a.createElement(C,null,l.a.createElement(_,null,"Recent Images"),l.a.createElement(k,null,o.map((function(t,n){return l.a.createElement(S,{key:n},l.a.createElement(f.a,{i:n,onClick:e.onChange(t),src:t||"",fallbackImage:"https://master.thecustomproductbuilder.com/images/imagenotfound.svg",initialImage:"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/0.16.1/images/loader-large.gif",alt:r}))}))))}}])&&v(t.prototype,n),r&&v(t,r),a}(c.Component);t.default=T},"./lib/app/ui/components/aside/printable-areas/inputs/select.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./node_modules/uid-safe/index.js"),s=n.n(u),p=n("./node_modules/styled-components/dist/styled-components.browser.esm.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var O=p.default.div(r||(r=h(["\n\tposition: relative;\n\tmargin: 10px 0;\n"]))),j=p.default.label(o||(o=h(["\n    display: block;\n    margin-bottom: 5px;\n"]))),x=p.default.div(a||(a=h(["\n\tposition: relative;\n\t\n\t&::after{\n    \tcontent: ' ';\n\t    width: 0;\n\t    height: 0;\n\t    position: absolute;\n\t    top: 50%;\n\t    right: 10px;\n\t    border-left: 6px solid transparent;\n\t    border-right: 6px solid transparent;\n\t    border-top: 6px solid #aaa;\n\t    transform: translateY(-50%);\n    }\n"]))),w=p.default.select(i||(i=h(["\n    display: block;\n    border: 1px solid #aaa;\n    padding: 8px 12px;\n    font-size: 16px !important;\n    width: 100%;\n    color: #aaaaaa;\n    background: #fff;\n    -webkit-appearance: none;\n    border-radius: 0; \n"]))),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,n,r,o=b(a);function a(){return f(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.input,n=t.value,r=t.onChange,o=e.label,a=e.options,i=e.placeholder,c=s.a.sync(18);return l.a.createElement(O,null,l.a.createElement(j,{htmlFor:c},o),l.a.createElement(x,null,l.a.createElement(w,{id:c,placeholder:i||"",value:n,onChange:r},a.map((function(e,t){return l.a.createElement("option",{key:t,value:e.value},e.label)})))))}}])&&y(t.prototype,n),r&&y(t,r),a}(c.Component);t.default=E},"./lib/app/ui/components/aside/printable-areas/inputs/text.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i=n("./node_modules/react/index.js"),c=n.n(i),l=n("./node_modules/uid-safe/index.js"),u=n.n(l),s=n("./node_modules/styled-components/dist/styled-components.browser.esm.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h=s.default.div(r||(r=v(["\n\tposition: relative;\n\tmargin: 10px 0;\n"]))),O=s.default.label(o||(o=v(["\n    display: block;\n    margin-bottom: 5px;\n"]))),j=s.default.input(a||(a=v(["\n    display: block;\n    border: 1px solid #aaa;\n\n    padding: 8px 12px;\n    font-size: 16px !important;\n    width: 100%;\n    color: #aaaaaa;\n"]))),x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,n,r,o=m(a);function a(){return d(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.input,n=t.value,r=t.onChange,o=e.label,a=e.type,i=e.placeholder,l=u.a.sync(18);return"number"===a&&(n=Number(n)),c.a.createElement(h,null,c.a.createElement(O,{htmlFor:l},o),c.a.createElement(j,{id:l,placeholder:i||"",type:a,value:n,onChange:r}))}}])&&f(t.prototype,n),r&&f(t,r),a}(i.Component);t.default=x},"./lib/app/ui/components/aside/printable-areas/list/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./lib/app/utils/i18n.jsx"),i=n("./lib/app/utils/image-storage/index.jsx");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y,m,b,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,r,c=p(d);function d(){return l(this,d),c.apply(this,arguments)}return t=d,r=[{key:"renderEmpty",value:function(){return o.a.createElement(a.Translate,{value:"printableAreas.item.empty"})}}],(n=[{key:"renderImage",value:function(e){return e.value?o.a.createElement(i.default.img,{className:"cpb-printable-item-image",src:e.value}):d.renderEmpty()}},{key:"renderText",value:function(e){var t=e.value;return"bold"===e.text.fontWeight&&(t=o.a.createElement("b",null,t)),"italic"===e.text.fontWeight&&(t=o.a.createElement("i",null,t)),e.value?o.a.createElement("div",{className:"cpb-printable-item-text"},'"',t,'"',o.a.createElement("small",null,"(",e.text.fontFamily,", ",e.text.fontSize,")")):d.renderEmpty()}},{key:"onClick",value:function(e){var t=this.props,n=t.productPrintableElementActiveSet,r=t.productPrintableElementUpdate;e.active?(e.active=!1,r(e)):n(e.id)}},{key:"render",value:function(){var e=this,t=this.props.elements;return o.a.createElement("div",{className:"cpb-printable-list"},t.map((function(t){return o.a.createElement("div",{className:"cpb-printable-item ".concat(t.active&&"cpb-active"),key:"pa-list-item-".concat(t.id),onClick:function(){return e.onClick(t)}},o.a.createElement("div",{className:"cpb-printable-item-title"},"img"===t.type?o.a.createElement(a.Translate,{value:"printableAreas.item.image"}):o.a.createElement(a.Translate,{value:"printableAreas.item.text"}),":"),"img"===t.type?e.renderImage(t):e.renderText(t))})))}}])&&u(t.prototype,n),r&&u(t,r),d}(o.a.PureComponent);b="PrintableElementsList",(m="displayName")in(y=g)?Object.defineProperty(y,m,{value:b,enumerable:!0,configurable:!0,writable:!0}):y[m]=b,t.default=g},"./lib/app/ui/components/aside/printable-areas/raster.jsx":function(e,t,n){"use strict";n.r(t);var r,o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./node_modules/redux-form/es/Field.js"),l=n("./lib/app/constants/web-fonts.jsx"),u=(n("./lib/app/ui/components/aside/printable-areas/inputs/range.jsx"),n("./lib/app/ui/components/common/forms/input-image-upload/index.jsx")),s=(n("./lib/app/ui/components/aside/printable-areas/inputs/recent-images.jsx"),n("./lib/app/utils/image-storage/index.jsx")),p=n("./lib/app/utils/i18n.jsx"),d=n("./node_modules/lodash-es/lodash.default.js");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}l.default.map((function(e){return{label:e.family,value:e.family}}));var x,w,E=i.default.div(r||(x=["\n    \n"],w||(w=x.slice(0)),r=Object.freeze(Object.defineProperties(x,{raw:{value:Object.freeze(w)}})))),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,e);var t,n,r,o=g(i);function i(){var e;y(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return j(h(e=o.call.apply(o,[this].concat(n))),"onChange",(function(){e.props.values.value})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=(e.type,e.values),n=e.element,r=e.category,o=e.panels,i=e.productPrintableElementUpdate,l=d.default.get(n,"value","")||"",f=d.default.get(r,"imagesSource"),y=d.default.get(r,"imagesSourcePanel"),m=d.default.get(r,"imagesSourceCategory"),b=[];if(f&&y&&m)try{var g=o.find((function(e){return e.id===y})).categories.find((function(e){return e.id===m})).options.map((function(e){return d.default.get(e,"preview.data")})).map((function(e){return Object.keys(e).map((function(t){return e[t]})).filter((function(e){return e}))}));b=d.default.flatten(g)}catch(e){console.error("Can't get images gallery from category",{imagesSource:f,imagesSourcePanel:y,imagesSourceCategory:m,panels:o,error:e})}return a.a.createElement(E,null,a.a.createElement("div",{className:"cpb-upload ".concat(l.length?"cpb-active":"")},a.a.createElement(c.default,{component:u.default,name:"value",elementID:d.default.get(t,"id",null),value:l})),b.length&&a.a.createElement("div",{className:"cpb-areas-gallery"},a.a.createElement("div",{className:"cpb-areas-gallery-title"},a.a.createElement(p.Translate,{value:"printableAreas.form.helpers.orSelect"})),a.a.createElement("div",{className:"cpb-areas-gallery-body"},b.map((function(e,t){return a.a.createElement("div",{className:"cpb-areas-gallery-image",onClick:function(){return i({id:n.id,value:e})},key:"cpb-areas-gallery-image-".concat(t)},a.a.createElement(s.default.img,{src:e,alt:""}))})))),null)}}])&&m(t.prototype,n),r&&m(t,r),i}(o.Component);t.default=P},"./lib/app/ui/components/aside/printable-areas/text.jsx":function(e,t,n){"use strict";n.r(t);var r,o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./node_modules/redux-form/es/Field.js"),l=n("./node_modules/redux-form/es/FormSection.js"),u=n("./lib/app/ui/components/aside/printable-areas/inputs/select.jsx"),s=n("./lib/app/ui/components/aside/printable-areas/inputs/text.jsx"),p=n("./lib/app/ui/components/aside/printable-areas/inputs/color.jsx"),d=n("./lib/app/ui/components/aside/printable-areas/inputs/range.jsx"),f=n("./lib/app/ui/components/aside/printable-areas/inputs/button.jsx"),y=n("./lib/app/utils/i18n.jsx");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x,w,E=i.default.div(r||(x=[""],w||(w=x.slice(0)),r=Object.freeze(Object.defineProperties(x,{raw:{value:Object.freeze(w)}})))),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,e);var t,n,r,o=h(i);function i(){return b(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.fontsAvailable.map((function(e){return{label:e,value:e}}));return a.a.createElement(E,null,a.a.createElement(c.default,{component:s.default,name:"value",type:"text",label:y.I18n.t("printableAreas.form.helpers.content"),placeholder:y.I18n.t("printableAreas.form.helpers.yourTextHere")}),a.a.createElement(l.default,{name:"text"},a.a.createElement(c.default,{component:u.default,name:"fontFamily",label:y.I18n.t("printableAreas.form.helpers.fontFamily"),options:e}),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-4"},a.a.createElement(c.default,{component:d.default,name:"fontSize",label:y.I18n.t("printableAreas.form.helpers.fontSize"),minValue:0,maxValue:100})),a.a.createElement("div",{className:"col-md-5"},a.a.createElement(c.default,{component:p.default,name:"fillColor",label:y.I18n.t("printableAreas.form.helpers.fontColor"),options:[{label:"Black",value:"#000000"},{label:"White",value:"#ffffff"}]})),a.a.createElement("div",{className:"col-md-3",style:{marginTop:"-9px"}},a.a.createElement(c.default,{component:f.default,name:"fontWeight",label:y.I18n.t("printableAreas.form.helpers.bold"),selectedValue:"bold",icon:"lnr-bold",value:"normal"}),a.a.createElement(c.default,{component:f.default,name:"fontWeight",label:y.I18n.t("printableAreas.form.helpers.italic"),selectedValue:"italic",icon:"lnr-italic",value:"normal"})))))}}])&&g(t.prototype,n),r&&g(t,r),i}(o.Component);t.default=P},"./lib/app/ui/components/aside/reorder-panels-controls.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/react-redux/es/index.js"),i=n("./node_modules/redux/es/redux.js"),c=n("./lib/app/ui/components/common/modal/index.jsx"),l=n("./lib/app/ui/components/aside/modals/reorder-panels.jsx"),u=n("./node_modules/@shopify/polaris/index.es.js"),s=n("./lib/app/store/slices/Product/index.jsx");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(i,e);var t,n,r,a=g(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this)).state={reorder:!1},e.toggleReorder=e.toggleReorder.bind(h(e)),e.reorderCategory=e.reorderCategory.bind(h(e)),e}return t=i,(n=[{key:"toggleReorder",value:function(){this.setState({reorder:!this.state.reorder})}},{key:"reorderCategory",value:function(e){(0,this.props.productPanelsOrderUpdate)(e)}},{key:"render",value:function(){var e=this.props,t=e.display,n=e.panels;return t?o.a.createElement("div",null,o.a.createElement(u.Button,{primary:!0,onClick:this.toggleReorder},o.a.createElement("span",{className:"lnr lnr-layers"}),"  ","Reorder Panels"),o.a.createElement(c.side,{isOpen:this.state.reorder,onRequestClose:this.toggleReorder,contentLabel:"Reorder Categories"},o.a.createElement(l.default,{close:this.toggleReorder,title:"Reorder Panels",list:n,submit:this.reorderCategory}))):null}}])&&m(t.prototype,n),r&&m(t,r),i}(r.Component);t.default=Object(a.connect)((function(e){return{panels:e.Product.panels}}),(function(e){return f(f({},Object(i.bindActionCreators)({productPanelsOrderUpdate:s.productPanelsOrderUpdate},e)),{},{dispatch:e})}))(j)},"./lib/app/ui/components/aside/summary.jsx":function(e,t,n){"use strict";n.r(t),function(e){var r,o,a,i,c,l,u,s,p,d,f,y,m,b,g,v,h,O=n("./node_modules/react/index.js"),j=n.n(O),x=n("./node_modules/react-redux/es/index.js"),w=n("./lib/app/utils/i18n.jsx"),E=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),P=n("./node_modules/lodash/isNil.js"),C=n.n(P),_=n("./lib/app/utils/image-storage/index.jsx"),k=n("./node_modules/lodash-es/lodash.default.js"),S=n("./lib/app/utils/check-platform.jsx"),T=n("./lib/app/ui/components/aside/controls/multi-currency/index.jsx"),I=n("./lib/app/utils/string/index.jsx"),A=n("./lib/app/ui/components/admin/editor/category/types.jsx"),D=n("./node_modules/fraction.js/fraction.js"),R=n.n(D);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=G(e);if(t){var o=G(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return W(this,n)}}function W(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var K=E.default.div(r||(r=H(["\n    padding: 20px;\n"]))),Y=E.default.div(o||(o=H(["\n    font-size: 1.4em;\n    line-height: 2.2em;\n"]))),X=E.default.div(a||(a=H([""]))),$=E.default.ul(i||(i=H(["\n    padding: 0;\n"]))),J=E.default.li(c||(c=H(["\n    list-style: none;\n    margin-bottom: 0;\n    display: flex;\n"]))),Z=E.default.div(l||(l=H(["\n    width: 100px;\n    height: 100px;\n"]))),ee=(E.default.img(u||(u=H(["\n\n"]))),E.default.div(s||(s=H(["\n    padding: 0 25px;\n"])))),te=E.default.div(p||(p=H(["\n    font-size: 1em;\n    margin-bottom: 3px;\n"]))),ne=E.default.ul(d||(d=H(["\n    padding: 0;\n"]))),re=E.default.li(f||(f=H(["\n    list-style: none;\n    color: #636363;\n    margin-bottom: 17px;\n"]))),oe=E.default.div(y||(y=H(["\n    font-size: 1em;\n"]))),ae=E.default.div(m||(m=H(["\n    color: #000000;\n    font-size: 1em;\n"]))),ie=E.default.div(b||(b=H(["\n    font-size: 1.2em;\n    line-height: 1em;\n"]))),ce=E.default.div(g||(g=H(["\n    font-size: 0.85em;\n    line-height: 1em;\n    opacity: 0.6;\n"]))),le=E.default.div(v||(v=H(["\n    text-align: right;\n    font-size: 1em;\n"]))),ue=E.default.li(h||(h=H(["\n    margin-top: 15px;\n"]))),se=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(i,t);var n,r,o,a=q(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(e=a.call(this)).summaryImageRef=j.a.createRef(),e.state={images:{}},e.calculateList=e.calculateList.bind(Q(e)),e}return n=i,(r=[{key:"componentWillMount",value:function(){this.image=_.default.getIcon("loading")}},{key:"componentDidMount",value:function(){this._mounted=!0,this.setImages(),this.checkImageStorageViews()}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"checkImageStorageViews",value:function(){var e=this,t=this.props.settings,n=this.state.images;"col-list"===t.layout&&(Object.keys(n).filter((function(e){return!!n[e]})).length||(this.setImages(),setTimeout((function(){e.checkImageStorageViews()}),250)))}},{key:"setImages",value:function(){var t=this,n=this.props.panels;k.default.uniqBy(V(n),(function(e){return e.selectView})).forEach((function(n,r){t.setState((function(r){var o,a=.4,i=e(".cpb-panels-tabs").innerWidth(),c=window.devicePixelRatio,l=void 0===c?1:c,u=(k.default.get(t,"summaryImageRef.getBoundingClientRect")&&t.summaryImageRef.getBoundingClientRect().width||64)*l;Object(S.default)()&&u&&i&&(o=u/i),o&&o>a&&(a=o);var s=U({},n.selectView,_.default.getViewData(n.selectView,a));return{images:B(B({},r.images),s)}}))}))}},{key:"calculateList",value:function(){var e=this.props,t=e.layers,n=e.panels,r=e.Global,o=e.settings,a=[];n.forEach((function(e){e.categories.forEach((function(n){n.options.forEach((function(o){var i=k.default.clone(t.find((function(t){return t.panel===e.id&&t.category===n.id&&t.option===o.id})));if(i){var c=o.option.data.label,l=k.default.get(o,"option.data.chargePerCharacter"),u=k.default.get(o,"option.data.countSpaceAsCharacter"),s=o.price||0,p=o.initialPrice;if(["checkbox"].includes(Object(A.getCategoryLegacyType)(n))&&!i.value)return;if(p&&(s=p),-1!==["input","inputLong","inputMulti","date","dateTime","time","counter","engravingForWholesale","fontSize","fontFamily","autocompleteNumber"].indexOf(Object(A.getCategoryLegacyType)(n))&&(i.value||!isNaN(i.value)&&"number"==typeof i.value)){var d=o.option.data.label;if("slash"===o.option.data.valuePreview){var f=new R.a(i.value).toFraction(!0);i.value="".concat(i.value<1?"0 ":"").concat(i.value||parseFloat(f)?f:"")}c="".concat(d?"".concat(d," - "):"").concat(i.value)}["wholesaleOrder"].includes(Object(A.getCategoryLegacyType)(n))&&!C()(i.value)&&(c="".concat(o.option.data.label," x").concat(i.value));var y=k.default.size(c);if(l)if(y=u?i&&i.value&&i.value.length:i&&i.value&&i.value&&Object(I.u_removeSpacesFromStr)(i.value.toString()).length,o.option.data.useCustomCharacterPrcies){var m=0,b=r.customCharacters;i.value&&i.value.toString().split("").map((function(e){if(" "!==e||u){var t=b.find((function(t){return t.name.toString()===e.toString()}));if(t){var n=parseFloat(t.price)||s||0;m+=n}else m+=parseFloat(s)}})),s=m}else s*=y;["additionalPriceField"].includes(Object(A.getCategoryLegacyType)(n))&&(s=i.value);var g={panel:e.id,id:n.id,category:n.title,type:Object(A.getCategoryLegacyType)(n),sku:o.sku,skuOrder:n.skuOrder,value:c,realValue:i.value,valueLength:y,optionData:o.option.data,cost:s};a.push(g)}}))}))}));var i=[];return n.forEach((function(e){var c={id:e.id,title:e.title,view:e.selectView,categories:[],skuPrefix:e.skuPrefix};c.view&&(c.previewImage=!0),c.categories=a.filter((function(t){return t.panel===e.id}));var l=o.skuTabSeparated&&c.skuPrefix?c.skuPrefix:"",u=[];k.default.forEach(c.categories,(function(e){e.sku.length&&k.default.isNumber(e.skuOrder)&&u.push({skuOrder:e.skuOrder,sku:e.sku})})),o.skuTabSeparated&&k.default.forEach(t,(function(t){var r=k.default.find(n,{id:t.panel}),o=r&&k.default.find(r.categories,{id:t.category}),a=o&&k.default.find(o.options,{id:t.option}),i=o&&o.assignedOrderSkuToPanels&&Object.keys(o.assignedOrderSkuToPanels);k.default.forEach(i,(function(t){var n=k.default.get(o,"assignedOrderSkuToPanels.".concat(e.id));k.default.isNumber(n)&&e&&e.assignSkuFromOtherPanels&&!k.default.find(u,{sku:a.sku,skuOrder:n})&&u.push({skuOrder:n,sku:a.sku})}))})),k.default.orderBy(u,"skuOrder","asc").map((function(e){e.sku.length&&(l+=e.sku)})),(r.inventoryEnabled||o.skuToCartProps)&&l.length&&(c.sku=l),i.push(c)})),i.filter((function(e){return e.categories.length>0}))}},{key:"render",value:function(){var e=this,t=this.state.images,n=this.props.currency,r=this.props,o=r.layout,a=r.price,i="col-tabs"===o||"row-tabs"===o?"":w.I18n.t("summary.title");this.list=this.calculateList(),n=n||"USD";var c=["engravingForWholesale","input","inputLong"];return j.a.createElement(K,{className:"cpb-selection-summary"},j.a.createElement(Y,{className:"cpb-selection-summary-title"},i),j.a.createElement(X,null,j.a.createElement($,{className:"cpb-selection-summary-list"},this.list.map((function(r,o){return j.a.createElement(J,{className:"cpb-selection-summary-list-item",key:r.id},r.previewImage&&j.a.createElement(Z,{className:"cpb-summary-image-container"},j.a.createElement("img",{alt:"",className:"cpb-summary-image",ref:function(t){return e.summaryImageRef=t},src:t[r.view]||e.image})),j.a.createElement(ee,{className:"cpb-summary-content-wrapper"},j.a.createElement(te,{className:"cpb-selection-summary-list-item-panel"},r.title),r.sku?j.a.createElement("div",{className:"cpb-summary-sku"},"SKU: ",r.sku):"",j.a.createElement(ne,{className:"cpb-selection-summary-list-item-categories"},r.categories.filter((function(e){return!c.includes(Object(A.getCategoryLegacyType)(e))||!!e.value})).map((function(e){return j.a.createElement(re,{className:"cpb-summary-list-item-category",key:e.id},j.a.createElement("div",{className:"row"},j.a.createElement("div",{className:"col-md-8"},j.a.createElement(oe,{className:"cpb-selection-summary-list-item-category-title"},e.category),j.a.createElement(ie,{className:"cpb-selection-summary-list-item-category-value"},e.value),e.sku&&j.a.createElement(ce,{className:"cpb-selection-summary-list-item-category-sku"},e.sku)),j.a.createElement("div",{className:"col-md-4"},Number(e.cost)>0?j.a.createElement(le,{className:"cpb-selection-summary-list-item-category-price"},k.default.get(e,"optionData.chargePerCharacter")&&!k.default.isUndefined(e.realValue)&&j.a.createElement("div",null,e.valueLength,"x"),"percentage"===Object(A.getCategoryLegacyType)(e)?j.a.createElement(j.a.Fragment,null,e.cost,"%"):j.a.createElement(T.default,{currency:n,price:parseFloat(e.cost)})):"",e.valueInitial&&j.a.createElement(le,{className:"cpb-selection-summary-list-item-category-price"},j.a.createElement("small",null,"x"),e.valueInitial))))})))))})),j.a.createElement(ue,{className:"cpb-selection-summary-total"},j.a.createElement(ne,null,j.a.createElement(re,null,j.a.createElement("div",{className:"row"},j.a.createElement("div",{className:"col-md-8"},j.a.createElement(ae,{className:"cpb-selection-summary-total-label"},j.a.createElement(w.Translate,{value:"summary.helpers.total"}))),j.a.createElement("div",{className:"col-md-4"},j.a.createElement(le,{className:"cpb-selection-summary-total-price"},j.a.createElement(T.default,{currency:n,price:parseFloat(a)}))))))))))}}])&&F(n.prototype,r),o&&F(n,o),i}(O.Component);t.default=Object(x.connect)((function(e){return{layout:e.App.settings.layout,currency:e.App.settings.currency,layers:e.Product.layers,panels:e.Product.panels,price:e.Product.price,view:e.App.settings.currentView,settings:e.App.settings,Global:e.Global}}))(se)}.call(this,n("./node_modules/jquery/dist/jquery.min.js"))},"./lib/app/ui/components/common/expand-menu/index.jsx":function(e,t,n){"use strict";n.r(t);var r,o=n("./node_modules/react/index.js"),a=n.n(o),i=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./node_modules/@shopify/polaris/index.es.js"),l=n("./lib/app/ui/components/common/icon-button.jsx");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b,g,v=i.default.div(r||(b=["\n    .Polaris-ButtonGroup{\n      margin-top: 0 !important;  \n      .Polaris-ButtonGroup__Item{\n        width: 0;\n        height: 36px;\n        opacity: 0;\n        transition: all 0.5s ease-in-out;\n        \n        &:last-child{\n          width: inherit;\n          opacity: 1;\n\n          .Polaris-Button{\n            border-radius: 3px !important;\n            \n            .Polaris-Button__Content{\n              transition: all 0.5s ease-in-out;\n            }\n          }\n        }\n      }\n    }\n    \n    &:hover{\n      .Polaris-ButtonGroup{\n        .Polaris-ButtonGroup__Item{\n          width: 48px;\n          opacity: 1;\n\n          &:last-child{\n            .Polaris-Button{\n              border-radius: 0 3px 3px 0 !important;\n\n              .Polaris-Button__Content{\n                transform: rotate(45deg);\n              }\n            }\n          }\n        }\n      }\n    }\n"],g||(g=b.slice(0)),r=Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(g)}})))),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,o=f(i);function i(){return s(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.style,r=e.help;return r=r||{},a.a.createElement(v,{style:n},a.a.createElement(c.ButtonGroup,{segmented:!0},t.map((function(e,t){return a.a.createElement(l.default,{key:t,icon:e.icon,onClick:e.action,primary:!0,tooltip:e.tooltip})})),a.a.createElement(l.default,{icon:"lnr lnr-plus-circle",primary:!0,tooltip:"More",intro:r.intro,position:r.position})))}}])&&p(t.prototype,n),r&&p(t,r),i}(o.Component);t.default=h},"./lib/app/ui/components/common/forms/input-image-upload/index.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a,i,c,l,u,s=n("./node_modules/react/index.js"),p=n.n(s),d=n("./node_modules/react-redux/es/index.js"),f=n("./node_modules/react-dropzone/dist/index.js"),y=n.n(f),m=n("./node_modules/sweetalert2/dist/sweetalert2.all.js"),b=n.n(m),g=n("./lib/app/utils/async/index.jsx"),v=n("./lib/app/ui/components/common/icon-button.jsx"),h=n("./node_modules/react-image-fallback/lib/index.js"),O=n.n(h),j=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),x=n("./lib/app/utils/string/index.jsx"),w=n("./lib/app/constants/c_file-upload.jsx"),E=n("./lib/app/constants/general.jsx");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var D=j.default.div(r||(r=A([""]))),R=j.default.div(o||(o=A(["\n    padding: 0;\n    display: flex;\n    flex-direction: row-reverse;\n    justify-content: flex-end;\n    align-items: flex-start;\n  \n    \n    .cpb-icon-button {\n        margin-left: 15px;\n    }\n"]))),L=j.default.div(a||(a=A(["\n    min-height: 165px;\n    min-width: 165px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]))),N=j.default.i(i||(i=A(["\n    font-size: 4em;\n"]))),B=j.default.div(c||(c=A(["\n    font-size: 2em;\n    margin: 10px;\n    font-weight: 400;\n"]))),U=j.default.img(l||(l=A(["\n    width: 75px;\n    display: block;\n    margin: auto;\n    margin-top: 50px;\n"]))),V=j.default.div(u||(u=A(["\n    font-size: 1.4em;\n    margin: auto;\n    text-align: center;\n    margin-top: 30px;\n"]))),M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,e);var t,n,r,o=k(a);function a(){var e,t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=o.call(this),t=T(e),r="InputImageUpload",(n="displayName")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e.state={loading:!1},e.onDrop=e.onDrop.bind(T(e)),e.removeImage=e.removeImage.bind(T(e)),e}return t=a,(n=[{key:"removeImage",value:function(){(0,this.props.input.onChange)("")}},{key:"onDrop",value:function(e,t){var n=this.props.input.onChange,r=this;if(t.length)return b.a.fire("Oops...","We only support ".concat(w.C_FILE_IMG_FORMATS_LABELS," smaller than ").concat(w.C_FILE_UPLOAD_SIZE/1024/1024," MB."),"warning");var o=e[0],a=new FileReader;a.onloadend=function(e){var t=new Image;t.onload=function(){var t=e.target.result||event.srcElement.result,a=o.type;t=t.split(",")[1];var i=o.name;Object(g.uploadImage)().bind(r)({mimetype:a,buffer:t,name:i}).then((function(e){n(e),r.setState({loading:!1})})).catch((function(e){n(o.preview)}))},t.src=a.result},a.readAsDataURL(o),this.setState({loading:!0},(function(){n(o.preview)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.input.value,r=t.label,o=this.state.loading,a=!Object(x.u_checkImgTypes)(n),i=p.a.createElement(R,null,p.a.createElement(v.default,{icon:"lnr lnr-trash",primary:!0,onClick:this.removeImage,tooltip:"Delete Preview",position:"left"}),p.a.createElement(L,null,p.a.createElement(O.a,{src:n||"",fallbackImage:"".concat(E.C_FALLBACK_IMAGE_HOST,"/images/imagenotfound.svg"),initialImage:"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/0.16.1/images/loader-large.gif",alt:"Preview",style:{maxWidth:"100%",maxHeight:"165px",marginTop:"0"}}))),c=p.a.createElement("div",{className:"Polaris-Labelled__LabelWrapper"},p.a.createElement("div",{className:"Polaris-Label"},p.a.createElement("label",{className:"Polaris-Label__Text"},r||"Preview")));if(""===n||!n||a){var l=function(t){var n=t.className,r=t.children;return p.a.createElement(y.a,{onDrop:e.onDrop,multiple:!1,maxSize:w.C_FILE_UPLOAD_SIZE,className:n,activeClassName:"cpb-active",accept:w.C_FILE_IMG_FORMATS_VALUES.join(",")},r)};i=p.a.createElement(l,{className:"cpb-drop-zone"},p.a.createElement(N,{className:"lnr lnr-cloud-upload"}),p.a.createElement(B,null,"Drag files or click to upload"))}return o?p.a.createElement(D,null,c,p.a.createElement(U,{src:"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/0.16.1/images/loader-large.gif"}),p.a.createElement(V,null,"Uploading...")):p.a.createElement(D,null,c,i)}}])&&C(t.prototype,n),r&&C(t,r),a}(p.a.PureComponent);t.default=Object(d.connect)((function(e){return{shopId:e.Routing.shopId}}))(M)},"./lib/app/ui/components/common/modal/reorder/index.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/react-reorder/src/index.js"),i=n.n(a);n("./lib/app/ui/components/common/modal/reorder/list-item.jsx");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,n,r,a=p(c);function c(){return l(this,c),a.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.list,n=e.callback,r=e.itemKey,a=t&&"function"==typeof t.map?t:[];return o.a.createElement(i.a,{reorderId:"cpb-options-list",itemKey:r||"id",onReorder:n,disabled:!1,placeholderClassName:"cpb-is-placeholder",draggedClassName:"cpb-is-dragged",autoScroll:!0,className:"cpb-options-reorder"},a.map((function(e,t){var n=e.option&&e.option.data?e.option.data.label:null;return o.a.createElement("div",{key:"cpb-options-list-item-".concat(t),className:"cpb-option-reorder-item"},e.title||n||"-")})))}}])&&u(t.prototype,n),r&&u(t,r),c}(r.Component);t.default=y},"./lib/app/ui/components/common/modal/reorder/list-item.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));var r,o,a,i=n("./node_modules/react/index.js"),c=n.n(i),l=n("./node_modules/@shopify/polaris/index.es.js"),u=n("./node_modules/styled-components/dist/styled-components.browser.esm.js");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=u.default.div(r||(r=g(["\n    display: block;\n    padding: 10px 15px;\n    margin-bottom: -1px;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    cursor: move;\n    overflow: auto;\n"]))),h=u.default.div(o||(o=g(["\n    float: right;\n"]))),O=u.default.i(a||(a=g(["\n    margin-right: 5px;\n"]))),j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o=y(a);function a(){return p(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props.item,t=e.option&&e.option.data?e.option.data.label:null;return c.a.createElement(v,null,e.title||t||"-",c.a.createElement(h,null,c.a.createElement(l.Badge,null,c.a.createElement(O,{className:"lnr lnr-layers"}),e.zIndex)))}}])&&d(t.prototype,n),r&&d(t,r),a}(i.Component)},"./lib/app/ui/components/common/no-content.jsx":function(e,t,n){"use strict";n.r(t);var r,o,a=n("./node_modules/react/index.js"),i=n.n(a),c=n("./node_modules/@shopify/polaris/index.es.js"),l=n("./node_modules/styled-components/dist/styled-components.browser.esm.js");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=l.default.div(r||(r=b([""]))),v=l.default.div(o||(o=b(["\n    &.no-button {\n      .Polaris-EmptyState__Actions {\n        display: none;\n      }\n    }\n\n    .Polaris-EmptyState{\n      img{\n        height: ",";\n      }\n    }\n"])),(function(e){return e.height?e.height:"initial"})),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,n,r,o=f(a);function a(){return s(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"getActions",get:function(){return{content:this.props.button,onAction:this.props.callback}}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.button,r=(e.callback,e.height);return i.a.createElement(g,null,i.a.createElement(v,{className:n?"":"no-button",height:r},i.a.createElement(c.EmptyState,{heading:t||"No Content",action:this.getActions,image:"https://cdn.shopify.com/s/files/1/0757/9955/files/empty-state.svg"})))}}])&&p(t.prototype,n),r&&p(t,r),a}(i.a.PureComponent);t.default=h},"./lib/app/utils/tooltip/option-tooltip.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/prop-types/index.js"),i=n.n(a),c=n("./lib/app/ui/components/aside/controls/multi-currency/index.jsx"),l=(n("./lib/app/utils/async/index.jsx"),n("./node_modules/lodash-es/lodash.default.js"));n("./lib/app/utils/async/services/shopify.jsx");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,a=f(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),g(m(e=a.call(this)),"displayName","OptionTooltip"),g(m(e),"tags",{label:function(e){return e.label},price:function(t){return"%"===t.currency?"".concat(t.price,"%"):o.a.createElement(c.default,s({},t,{siteCurrencyConverter:e.props.siteCurrencyConverter}))},sku:function(e){return e.sku},stockQuantity:function(t){return l.default.isNil(e.state.stockQuantity)?"":e.state.stockQuantity>0?" in stock:".concat(e.state.stockQuantity," "):" Out of stock "}}),e.state={stockQuantity:null},e.stockQuantity=e.getStockQuantity.bind(m(e)),e}return t=i,(n=[{key:"componentDidMount",value:function(){this.getStockQuantity()}},{key:"getStockQuantity",value:function(){var e=this.props.data,t=e.inventory,n=e.locationId,r=e.productInventory,o=l.default.get(r,"levels",[]);if(t&&n&&r){var a=Number(t.id),i=o.find((function(e){return e.locationID===n&&e.inventoryItemID===a}));if(i){var c=i.available;return this.setState({stockQuantity:c}),c}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=[t.template];return Object.keys(this.tags).map((function(t){var n=[];r.map((function(r){"function"==typeof r?n.push(r):r.split("{{".concat(t,"}}")).map((function(r,o){o&&n.push(e.tags[t]),n.push(r)}))})),r=n})),r.map((function(e,t){return"function"==typeof e?o.a.createElement("span",{key:t},e(n)):o.a.createElement("span",{key:t},e)}))}}])&&p(t.prototype,n),r&&p(t,r),i}(o.a.PureComponent);g(v,"propTypes",{data:i.a.object,template:i.a.string}),g(v,"defaultProps",{data:{label:"",price:0,currency:"USD",sku:""},template:"{{label}} {{price}}"}),t.default=v},"./lib/app/utils/update-layer-by-option.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/lodash-es/lodash.default.js"),o=n("./lib/app/utils/helpers/index.jsx"),a=n("./node_modules/lodash/isNil.js"),i=n.n(a),c=n("./lib/app/store/index.jsx"),l=n("./lib/app/schemas/option.jsx"),u=n("./lib/app/ui/components/admin/editor/category/types.jsx"),s=n("./lib/app/store/slices/Product/index.jsx"),p=n("./lib/app/store/slices/App/index.jsx");function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,c,"next",e)}function c(e){m(a,r,o,i,c,"throw",e)}i(void 0)}))}}function g(){return(g=b(regeneratorRuntime.mark((function e(t,n,a){var f,m,b,g,v,h,O,j,x,w,E,P,C=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=this.props,m=f.category,b=f.panel,g=f.layers,v=f.quantity,h=f.settings,O=this.props.defaultOptions,j=h.currentView,x={productLayerUpdate:function(){return c.default.dispatch(s.productLayerUpdate.apply(void 0,arguments))},productManageDynamicCategories:function(){return c.default.dispatch(s.productManageDynamicCategories.apply(void 0,arguments))},productCategoryUpdate:function(){return c.default.dispatch(s.productCategoryUpdate.apply(void 0,arguments))},productCategoryHelpersUpdate:function(){return c.default.dispatch(s.productCategoryHelpersUpdate.apply(void 0,arguments))},appSettingsCurrentViewUpdate:function(){return c.default.dispatch(p.appSettingsCurrentViewUpdate.apply(void 0,arguments))}},w=[],Array.isArray(t)||(t=[t]),E=Object.keys(h.views).filter((function(e){return h.views[e]})),E[h.currentSlideIndex],m.selectView&&m.selectView!==j&&x.appSettingsCurrentViewUpdate(m.selectView),t.forEach((function(e,t){if(e){var o,c=i()(n)?e.option.data.value:n;"object"===y(n)&&(c=r.default.get(n,"value")||c),-1!==["color","input","autocompleteNumber"].indexOf(Object(u.getCategoryLegacyType)(m))&&null===n&&(c=null),"fileUpload"===Object(u.getCategoryLegacyType)(m)&&a.length&&r.default.get(a,"".concat(t,".type"))&&r.default.get(a,"".concat(t,".name"))&&(o={name:a[t].name,type:a[t].type}),"radio"===Object(u.getCategoryLegacyType)(m)&&(c=e.id);var s={panel:b.id,category:m.id,option:e.id,preview:e.preview&&e.preview.data||l.default.preview,value:c,price:e.price||0,zIndex:m.zIndex,fileUploadData:o,sku:e.sku,inventory:e.inventory?Boolean(e.inventory):e.inventory,categoryParentID:m.categoryParentID};-1!==["fileUpload","input"].indexOf(Object(u.getCategoryLegacyType)(m))&&(c||(s.remove=!0)),s.remove&&(s.price=0),(null===c&&["autocompleteNumber","fileUpload"].includes(Object(u.getCategoryLegacyType)(m))||["fontFamily"].includes(Object(u.getCategoryLegacyType)(m))&&""===c)&&(s=null),s&&w.push(s)}})),["input","inputLong","inputMulti","multiple","qtyBreakdown","fileUpload","counter","wholesaleOrder","engravingForWholesale","fontFamily","fontSize","img","percentage","additionalPriceField","autocompleteNumber","time","checkbox","calculateFields"].includes(Object(u.getCategoryLegacyType)(m))||(w=w.filter((function(e){return!g.find((function(t){return["date","dateTime"].includes(Object(u.getCategoryLegacyType)(m))?t.panel===e.panel&&t.category===e.category&&t.option===e.option&&t.value===n:t.panel===e.panel&&t.category===e.category&&t.option===e.option}))}))),["qtyBreakdown"].includes(Object(u.getCategoryLegacyType)(m))&&(O={}),e.next=14,x.productLayerUpdate({layers:d(w),defaultOptions:O,parents:{panel:b.id,category:m.id},params:{updateByUserChanges:!1}});case 14:return P=e.sent,function(){if(!["input","inputLong","inputMulti","multiple","wholesaleOrder","engravingForWholesale","img","qtyBreakdown","additionalPriceField","counter"].includes(Object(u.getCategoryLegacyType)(m))){var e=d(P.panels).map((function(e){return e.categories})).flat();return["engravingForWholesale"].forEach((function(t){return function(t){var n=e.filter((function(e){return t===Object(u.getCategoryLegacyType)(e)&&!e.categoryDynamic}));d(P.layers).map((function(r){return!!e.length&&d(n).map((function(e){if(e.categoryDynamic||!1!==e.templateSameOnAll||e.id!==m.categoryParentID||(e.templateSameOnAll=!0,x.productCategoryUpdate(e,b.id),x.productCategoryHelpersUpdate({path:"engravingForWholesale.repeatOptionsIndex",payload:null,reset:!0})),!C.categoryToBeDisplayed(e.logic,P.layers,P.customLayers))return!1;var n=Object(o.h_getCategoryItems)({panels:[b],categoryType:t},{categoryID:r.category});return!(!n||n&&!n.categoryDynamic)&&P.quantity>1}))})).flat().filter((function(e){return e})).length||e.find((function(e){return e.categoryDynamic}))&&n.find((function(e){return e.templateSameOnAll}))&&x.productManageDynamicCategories({quantity:1,prevQuantity:v,categoryType:"engravingForWholesale"})}(t)}))}}(),e.abrupt("return",P);case 17:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}t.default=function(e,t,n){return g.apply(this,arguments)}}}]);